/*! BARNES-BUILDER 2018-06-16 */
function attachPickupToCart(){var a=$("#bopisFormSubmit"),b=$(".btn-pick-in-store"),c=($("#productDetail #prodInfoContainer #prodPromo .price"),function(a){var c=$(a).find(".btn-pick-in-store");return c.length||(c=b),c});BN.uXHR.Form.apply(a),a.on("amplifiFormBeforeSubmit",function(){var a=c(this),b=$('<div class="spinner spinner__large"><img src="'+$("input[name=imagePath]").val()+'spinner.svg" tabindex="0" role="alert" aria-live="polite" aria-label="Loading..." aria-busy="true"></div>').addClass("mini-cart-spinner");$spinnerZone=a.closest("div.pdp-bopis-message").addClass("spinner-container"),b.appendTo($spinnerZone)}).on("amplifiFormSuccess",function(b,d){var e=c(this);e.css("opacity","1"),$(".spinner").remove(),loadHeaderElement($("#bagContentsContainer"),webContextRoot+"/includes/shopping-bag.jsp",!0,!0);var f=e.get(0),g=a;if(addToCartModalCall(!1,f,d,g),"undefined"!=typeof s_setP){updateAnalyticsCart();var h=$(".pdp-form"),i={element:h,updateType:"add",addedFrom:"pdp"};analyticsShoppingCart(b,i)}}).on("amplifiFormError",function(a,b){$(".spinner").remove();var d=c(this);d.css("opacity","1"),("true"==b.storeInventoryUnavailable||1==b.storeInventoryUnavailable)&&$.ajax({type:"POST",url:"/cartridges/ProductDetailContent/ProductDetailTypes/includes/pdp-store-item-unavailable.jsp",success:function(a){$(".pdp-bopis-message").html(a)}})})}function showHideBopisSection(){var a=$(".bopis-pdp-details-hide").text().trim();"See Details"===a?($(".bopis-pdp-details-hide").attr("aria-expanded","true"),$(".bopis-pdp-details-hide").text("Hide"),$(".bopis-pdp-details-hide").removeClass("rotate-arrow"),$(".bopis-pdp-details-hide").addClass("rotate-arrow-down"),$(".bopis-pdp-details-hide").addClass("action-right"),$(".findMyStoreDetailsLink").removeClass("hidden"),$(".findMyStoreDetailsLink").attr("aria-hidden","false"),setTimeout(function(){$(".findMyStoreDetailsLink :tabbable:first").focus()},0)):"Hide"===a&&($(".bopis-pdp-details-hide").attr("aria-expanded","false"),$(".bopis-pdp-details-hide").text("See Details"),$(".bopis-pdp-details-hide").removeClass("rotate-arrow-down"),$(".bopis-pdp-details-hide").removeClass("action-right"),$(".findMyStoreDetailsLink").addClass("hidden"),$(".findMyStoreDetailsLink").attr("aria-hidden","true"))}function yesnoCheck(){document.getElementById("rentIsChecked").checked&&(document.getElementById("wishlistAdd").style.display="none"),document.getElementById("wishlistAdd").style.display=document.getElementById("newUsed").checked?"none":"block"}function pdpAjax(){var a=$("#totalFormatsOnLoad").val();void 0==a&&(a=0);var b="?skuId="+$("input#productSkuId").val()+"&productId="+$("input#productPId").val()+"&listPrice="+$("input#listPrice").val()+"&salePrice="+$("input#salePrice").val()+"&availabilityStatus="+$("input#availabilityStatus").val()+"&skuType="+$("input#skuType").val()+"&totalFormatsOnLoad="+a;$.ajax({url:webContextRoot+"/cartridges/ProductDetailContent/ProductDetailTypes/includes/pdp-bopis-message.jsp"+b}).done(function(a){$("#defaultPdpMessage").addClass("hidden").empty(),$("#defaultPdpMessage").append(a),$(".pdp-commerce-zone #defaultPdpMessage").removeClass("hidden");var b=$("#bopisEligibleMessage").val(),c=$("#storeName").val(),d=$("#storeID").val();"undefined"!=typeof s_setP&&(void 0==s_getP("digitalData.user[0].profile[0].profileInfo.storeName")&&(s_setP("digitalData.user[0].profile[0].profileInfo.storeName",c),s_setP("digitalData.user[0].profile[0].profileInfo.storeID",d)),"productAvailable"==b?s_setP("digitalData.product[0].attributes.pickupInStoreStatus","instore pickup available:geo or selected"):"productNotAvailable"==b?s_setP("digitalData.product[0].attributes.pickupInStoreStatus","instore pickup unavailable:geo or store selected"):"storeNotAvailable"==b&&s_setP("digitalData.product[0].attributes.pickupInStoreStatus","instore pickup available: geo or store unselected")),sessionStorage.setItem("storeName",c),sessionStorage.setItem("storeID",d),sessionStorage.setItem("bopisLocationSet","true"),attachPickupToCart(),$(".bopis-pdp-details-hide").on("click",function(){showHideBopisSection()})}).always(function(){"undefined"!=typeof performance.mark&&"undefined"!=typeof performance.measure&&(performance.mark("PDP_bopis_functionality_loading_ends"),performance.measure("PDPBopisRibbonDur","PDP_bopis_functionality_loading_starts","PDP_bopis_functionality_loading_ends"))})}BN.giftCard=BN.giftCard||{};var moreTabClicked=!1;BN.giftCard.updatePrice={init:function(){BN.giftCard.updatePrice.adjustTotal(),$(".eBookDeviceCompatible").tooltip(),$("#cardValue").on("keyup mouseup",BN.giftCard.updatePrice.adjustTotal),$("#cardValue").on("blur",BN.giftCard.updatePrice.cardValue_validate),$("#numCards").on("change",BN.giftCard.updatePrice.adjustTotal)},cardValue_validate:function(){var a=$(this).parent();if(this.required){var b=this.value;if(""!=b)var c=parseInt(b);""!=b&&c>=10&&350>=c?(a.removeClass("invalid").addClass("valid"),$(this).removeAttr("aria-invalid")):(a.removeClass("valid").addClass("invalid"),$(this).attr("aria-invalid",!0))}},adjustTotal:function(){var a=$("#cardValue").val();$("#cardValue").val(a.replace(/\D/g,""));var b=$("#cardValue").val(),c=$("#numCards").val(),d=parseInt(b)*parseInt(c),e=isNaN(d);$("#numCards-option-list").attr("role","combobox"),$(".totalGiftPrice").html(e?"<sup>$</sup>0.00":"<sup>$</sup>"+d+".00")}},setTimeout(function(){$(".pdpPage  #prodImage .slick-list:first").css("height","auto")},300),$(document).ready(function(){function a(a){$("#prodInfoContainer .header-zone span.current-price").attr("aria-hidden","true"),$("#prodInfoContainer .header-zone s.old-price").attr("aria-hidden","true"),$("#prodInfoContainer .header-zone span.saved-percent").attr("aria-hidden","true"),$("#prodInfoContainer .header-zone span#adaLabelTxt").show(),$("#prodInfoContainer .header-zone span.current-price-tBook").html($(a).closest("li").find("span.current-price").text()),$("#prodInfoContainer .header-zone span.saved-percent-tBook").html($(a).closest("li").find("span.saved-percent").text())}function b(){$("#pdp-tabs .tabpanels-container .tabpanels .tabpanel").each(function(){var a=$(this);a.parent().length>0&&(a.parent().removeAttr("aria-hidden"),a.parent().removeAttr("tabindex")),"false"==a.attr("aria-hidden")?a.find("a").attr("tabindex","0"):a.find("a").attr("tabindex","-1")}),$('#productInfoTabs li[role="presentation"] a').each(function(){var a=$(this).attr("aria-controls");$("#"+a).find("h2").removeAttr("tabindex"),"false"===$("#"+a).attr("aria-hidden")?$("#"+a).removeClass("invisible"):$("#"+a).addClass("invisible")}),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').each(function(a){$(this).on("keydown",function(b){var c=$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').length,d=a;if(d===c-1)if(b.shiftKey||9!=b.keyCode){if(b.shiftKey&&9==b.keyCode){b.stopPropagation(),b.preventDefault();var e=$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] a:visible');if(e.length>1)if($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0){var f=$(e[e.length-2]),g=f.parents(".expandable-section"),h=isInViewPort(f,g);if(h)f.focus();else{for(var i="",j=e.length-3;j>=0;j--){var k=$(e[j]),l=k.parents(".expandable-section"),m=isInViewPort(k,l);if(m){i=k;break}}""===i?$("#productInfoTabs").find(":tabbable:last").length>0?$("#productInfoTabs").find(":tabbable:last").focus():$("#hero-section-placeholder").find(":tabbable:last").focus():i.focus()}}else $(e[e.length-2]).focus();else $("#productInfoTabs").find(":tabbable:last").length>0?$("#productInfoTabs").find(":tabbable:last").focus():$("#hero-section-placeholder").find(":tabbable:last").focus(),b.stopPropagation(),b.preventDefault()}}else $("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0&&$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus(),b.stopPropagation(),b.preventDefault();else if(!b.shiftKey&&9==b.keyCode){b.stopPropagation(),b.preventDefault();var n;if(n=$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0?$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').length-2:$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').length-1,n>d)if($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0){var f=$($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible')[d+1]),g=f.parents(".expandable-section"),h=isInViewPort(f,g);h?f.focus():$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0?($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").focus(),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").addClass("focus")):$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus()}else $($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible')[d+1]).focus();else $('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0?($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").focus(),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").addClass("focus")):$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0&&$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus()}})})}function c(a){moreTabClicked=a.hasClass("more-tab")?!0:!1,setTimeout(function(){var b="";$('#productInfoTabs li[role="presentation"] a').each(function(){var a=$(this).attr("aria-controls");$("#"+a).find("h2").removeAttr("tabindex"),"false"===$("#"+a).attr("aria-hidden")?$("#"+a).removeClass("invisible"):$("#"+a).addClass("invisible")}),$("#productInfo-overview").removeAttr("tabindex"),$("#"+a.attr("aria-controls")).find("h2").removeAttr("tabindex"),a.parents(".tab-list-container").siblings(".tabpanels-container").find(".tabpanel").each(function(){return $(this).attr("tabindex","-1"),"false"===$(this).attr("aria-hidden")?void(b=$(this)):void 0}),moreTabClicked?$(".more-tab").focus().addClass("focus"):(a.removeClass("focus"),a.blur(),a.removeAttr("aria-selected"),a.attr("aria-selected","true"),a.addClass("focus"),a.focus()),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".slick-slider").removeAttr("tabindex")},500),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').each(function(a){$(this).on("keydown",function(b){var c=$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').length,d=a;if(d===c-1)if(b.shiftKey||9!=b.keyCode){if(b.shiftKey&&9==b.keyCode){b.stopPropagation(),b.preventDefault();var e=$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible');if(e.length>1)if($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0){var f=$(e[e.length-2]),g=f.parents(".expandable-section"),h=isInViewPort(f,g);if(h)f.focus();else{for(var i="",j=e.length-3;j>=0;j--){var k=$(e[j]),l=k.parents(".expandable-section"),m=isInViewPort(k,l);if(m){i=k;break}}""===i?$("#productInfoTabs").find(":tabbable:last").length>0?$("#productInfoTabs").find(":tabbable:last").focus():$("#hero-section-placeholder").find(":tabbable:last").focus():i.focus()}}else $(e[e.length-2]).focus();else $("#productInfoTabs").find(":tabbable:last").length>0?$("#productInfoTabs").find(":tabbable:last").focus():$("#hero-section-placeholder").find(":tabbable:last").focus(),b.stopPropagation(),b.preventDefault()}}else $("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0&&$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus(),b.stopPropagation(),b.preventDefault();else if(!b.shiftKey&&9==b.keyCode){b.stopPropagation(),b.preventDefault();var n;if(n=$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0?$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').length-2:$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').length-1,n>d)if($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0){var f=$($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible')[d+1]),g=f.parents(".expandable-section"),h=isInViewPort(f,g);h?f.focus():$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0?($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").focus(),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").addClass("focus")):$("#pdp-tab-container").parent().next().find(":tabbable:first").length>0?$("#pdp-tab-container").parent().next().find(":tabbable:first").focus():$("#pdp-tab-container").parent().next().next().find(":tabbable:first").focus()}else $($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible')[d+1]).focus();else $('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0?($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").focus(),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").addClass("focus")):$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0&&$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus()}})})}function d(a){var b=0;$('#productInfoTabs li[role="presentation"]:visible').each(function(){b+=$(this).width()}),$("#pdp-tabs #pdp-tab-container .tab-highlight-underline").width(b);var c=$('#productInfoTabs li[role="presentation"]:visible').first().position().left;a&&(c+=50),$("#pdp-tabs #pdp-tab-container .tab-highlight-underline").css("transform","translateX("+c+"px)")}function e(a){var b=$(a.target);b.parents(".more-tab").length&&(b=b.parents(".more-tab"));b.parent().position().left;setTimeout(function(){$('#productInfoTabs li[role="presentation"] a').each(function(){$(this).removeClass("activeTab").attr({"aria-selected":"false"})}),$(this).addClass("activeTab").attr({"aria-selected":"true"})},500);var c=!1;b.parent().is(":last-child")&&b.parent().prev().removeClass("rule-hidden"),b.parent().next().addClass("rule-hidden"),b.hasClass("more-tab")&&(c=!0,b.parent().addClass("rule-hidden"),"true"==b.attr("show-menu")?($('#productInfoTabs li[role="presentation"]').each(function(a){o>a?$(this).hide():a>o&&$(this).show()}),b.attr("show-menu",!1),b.removeClass("link-with-arrow"),b.find(".left-arrow-wrapper").show(),b.parent().next().find("a").click(),b.parent().addClass("no-left-border")):($('#productInfoTabs li[role="presentation"] ').each(function(a){o>a?$(this).show():a>o&&$(this).hide()}),b.attr("show-menu",!0),b.addClass("link-with-arrow"),b.find(".left-arrow-wrapper").hide(),b.parent().prev().find("a").click(),b.parent().removeClass("no-left-border"))),$('#productInfoTabs li[role="presentation"]:visible').length>0&&d(c)}function f(){$("[name=rental-options]").attr("checked","checked");var a=$(".availablilityStatus").val();if("undefined"==typeof a||"1001"==a){$(".purchase-button-container").hide(),$(".rentDaysHy, .rentDays, .days, .header-zone .saved-percent").hide();var b='<span class="outOfStockText"><strong>Temporarily Out of Stock Online</strong></span>';$("#prodInfoContainer .header-zone span.current-price").append(b)}}function g(){t=1,$(".tBook").length>0&&"neverForSaleProduct"==$(".tBook").children().attr("id")&&$('<div id="neverForSaleProduct" class="grdnt-fade-white hidden"><h3 class="never-for-sale-message-heading"><strong>This Item is Not Available</strong></h3></div>').insertAfter("#prodPromo");var a=$(".availablilityStatus").val();"undefined"==typeof a||"1001"==a?$(".multi-product-select .purchase-options-item .purchase-info").hide():($(".multi-product-select .purchase-options-item .purchase-info").show(),$("#btnAddTextbook").show(250),$("#btnInstPurTextbook").show(250),$(".removable-divider").show(250))}$("body").hasClass("pdpPage")&&$("#pdp-tabs").find("b").replaceWith(function(){return $("<strong>").append($(this).html())}),$("#prodImage").find(".slick-list").removeAttr("aria-live"),$("#prodImage").find(".slick-slide").removeAttr("role").removeAttr("aria-label"),$("#prodImage").find(".slick-track").removeAttr("role");var h=$("#isBopisEnabled").val(),i=$("#showMultipleBuyOption").val(),j=function(a){var b=a.split("-")[2];-1!=b.indexOf("BuyNew")?($(".textbook-pdp-bopis").removeClass("hidden"),$(".textbook-pdp-bopis").attr("aria-hidden",!1)):($(".textbook-pdp-bopis").addClass("hidden"),$(".textbook-pdp-bopis").attr("aria-hidden",!0))};if($("[data-option='BuyNew']").is(":checked")){var k=$("[data-option='BuyNew']").closest("label").attr("id");j(k)}"false"==i&&"true"==h&&$(".textbook-pdp-bopis").length>0&&($(".textbook-pdp-bopis").removeClass("hidden"),$(".textbook-pdp-bopis").attr("aria-hidden",!1)),$(document).on("text-ad-loaded",function(){{var a=($("#reviews-container").outerHeight(!0),$("#reviews-list").outerHeight(!0)),b=$("#adcontainer1").outerHeight(!0);$("#reviews-container").find(".row:first").outerHeight(!0),$("#reviews-container").find(".reviews-view-all").outerHeight(!0)}a>b?$("#reviews-list").height(a):($("#reviews-list").height(b+10),$(".customer-reviews-ad-col").css({top:"10px"}))}),$(".pdp-form").find(".out-of-stock")&&$(".pdp-form").removeClass("col-lg-6"),$("input[id^=checkBox]").click(function(a){var b=(a.target.id,a.target.checked),c=a.target.value;b?($("#bundleQuantity"+c).val($("#hidBundleQuantity"+c).val()),$("#bundleCatalogRefId"+c).val($("#hidBundleCatalogRefId"+c).val()),$("#bundleProductId"+c).val($("#hidBundleProductId"+c).val())):($("#bundleQuantity"+c).val(""),$("#bundleCatalogRefId"+c).val(""),$("#bundleProductId"+c).val(""));var d=0,e=0,f=0;$("input[id^=indPrice]").each(function(a){var b=Number($($("input[id^=indPrice]")[a]).val());$("input#checkBox"+a).is(":checked")&&(d+=b,e++),f++});var g=$("div#totalPrice p").text(),h=g.match(/\d/).index;g=g.substr(0,h),$("div#totalPrice p").text(g+d.toFixed(2)),e==f?($("#bundleProductSubmitButton").val("ADD ALL TO CART"),$("#bundleProductSubmitButton").removeAttr("disabled")):e>0?($("#bundleProductSubmitButton").val("ADD TO CART"),$("#bundleProductSubmitButton").removeAttr("disabled")):($("#bundleProductSubmitButton").val("Please select an item"),$("#bundleProductSubmitButton").attr("disabled","disabled"))});var l=$("#breadCrumbsText").val(),m=new RegExp("[0-9]");""==l||m.test(l)||$(".breadCrumbNav").removeClass("hidden"),0==$(".pdp-giftCard").length&&0==$(".pdp-eGiftCards").length&&($("#pdp-tabs .tabpanels-container .tabpanels .tabpanel .expandable-section").each(function(){var a=$(this);a.parent().find(".show-more-pdp").length||a.height()>302&&a.parent().append('<div class="text--center mt-s focus"><a href="javascript:void(0);" class="read-more show-more-pdp" aria-expanded="false" tabindex="0">Show More</a></div>')}),$(".expandable-section").css({height:"302px","column-width":"53.75rem"}),$("#pdp-tabs .tab-container").css({height:"515px"})),$(".multi-author-carousel :tabbable:first").on("keydown",function(a){a.shiftKey||9!==a.keyCode||(a.preventDefault(),a.stopPropagation(),$(".multi-author-carousel :tabbable:last").focus())}),$(".multi-author-carousel :tabbable:last").on("keydown",function(a){if(a.shiftKey||9!==a.keyCode)a.shiftKey&&9===a.keyCode&&(a.preventDefault(),a.stopPropagation(),$(".multi-author-carousel :tabbable:first").focus());else{a.preventDefault(),a.stopPropagation();var b=$(".multi-author-carousel").find(".slick-current");b.find(":tabbable").length>0?b.find(":tabbable:first").focus():$(".multi-author-carousel").next().find(":tabbable:first").focus()}}),$(".multi-author-slide").each(function(){$(this).hasClass("slick-current")?$(this).removeClass("invisible"):$(this).addClass("invisible"),$(this).find(":tabbable:first").on("keydown",function(a){a.shiftKey&&9===a.keyCode&&(a.preventDefault(),a.stopPropagation(),$(".multi-author-carousel :tabbable:last").focus())}),$(this).find(":tabbable:last").on("keydown",function(a){a.shiftKey||9!==a.keyCode||(a.preventDefault(),a.stopPropagation(),$(".multi-author-carousel").next().find(":tabbable:first").focus())})}),$(".multi-author-carousel").next().find(":tabbable:first").on("keydown",function(a){if(a.shiftKey&&9===a.keyCode){a.preventDefault(),a.stopPropagation();var b=$(".multi-author-carousel").find(".slick-current");b.find(":tabbable").length>0?b.find(":tabbable:last").focus():$(".multi-author-carousel").find(":tabbable:last").focus()}}),$("#ProductDetailsTab").find("h2").removeAttr("tabindex"),$(".slick-slider").on("afterChange",function(a,b,c){$(".product-image-slide").hasClass("focus")&&$(b.$slides[c]).find("a").focus()}),$("#prodImage").find("a:first").on("keydown",function(a){a.shiftKey&&9==a.keyCode&&(a.preventDefault(),$("#prodImage").prevAll(':not("script"):first').length>0?$("#prodImage").prevAll(':not("script"):first').find(".product-thumb:visible:last").find("a").focus():($("#prodImage").parents("#productDetail").prevAll(':not("script"):first').find(":tabbable:last").focus(),$("#prodImage").parents("#productDetail").prevAll(':not("script"):first').find(":tabbable:last").addClass("focus")))}),0==$("#prodImage").find(".product-shelf-curl").length&&$("#prodImage").find("a").on("keydown",function(a){var b=$("#prodImage").find("a:last");a.shiftKey||9!=a.keyCode||($(this).is(b)?($("#prodImage").nextAll(':not("script"):first').find(":tabbable:first").focus(),$("#prodImage").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus"),a.stopPropagation(),a.preventDefault()):$(this).nextAll(':not("script"):first').find("a").length>0?($(this).nextAll(':not("script"):first').find("a").focus(),a.preventDefault()):($("#prodImage").children("section").find("a").focus(),a.preventDefault()))}),$("#prodImage").find(".product-shelf-curl").length>0&&$("#prodImage .product-shelf-curl").find(".page-curl").on("keydown",function(a){var b=$("#prodImage").find(".product-image-slide:last");a.shiftKey||9!=a.keyCode||$(this).parents(".product-image-slide").is(b)&&($("#prodImage").nextAll(':not("script"):first').find(":tabbable:first").focus(),$("#prodImage").nextAll(':not("script"):first').find(":tabbable:first").addClass("focus"),a.stopPropagation(),a.preventDefault())}),$(".product-thumbs").find(".product-thumb").removeAttr("aria-label"),$(".product-thumb").find("a").on("keydown",function(a){a.stopPropagation(),a.preventDefault();{var b=$(".product-thumbs").find(".product-thumb:visible:first"),c=$(".product-thumbs").find(".product-thumb:visible:last");$(".product-thumbs").find(".product-thumb:last"),$(".product-thumbs").find(".product-thumb:first")}a.shiftKey||9!=a.keyCode?a.shiftKey&&9==a.keyCode&&($(this).parents(".product-thumb").is(b)?$(b).prevAll(".product-thumb").length>0?$(this).parents(".slick-slide").parents(".slick-slider").slick("slickPrev"):$(this).parents("#productDetail").prevAll(':not("script"):first').find(":tabbable:last").focus():$(this).parents(".product-thumb").prevAll(':not("script"):first').find("a").focus()):$(this).parents(".product-thumb").is(c)?$(c).nextAll(".product-thumb").length>0?$(this).parents(".slick-slide").parents(".slick-slider").slick("slickNext"):$("#prodImage").find(".product-image-slide:first").find("a").focus():$(this).parents(".product-thumb").nextAll(':not("script"):first').find("a").focus()}),$(document).on("click",'#productInfoTabs li[role="presentation"] a',function(a){a.preventDefault(),b(),e(a)});var n=$('#productInfoTabs li[role="presentation"]'),o=$("#pdpContentTabLimit").val();n.each(function(a){a>=o&&($(this).hide(),n.length>a&&a==o&&$("#productInfoTabs li:nth-child("+o+")").after('<li role="presentation"><a class="tab link-with-arrow more-tab" show-menu=true href="javascript:void(0)" role="tab" aria-selected=true><span class="hidden left-arrow-wrapper pr-xxs"><span class="link-with-left-arrow "></span></span> <span> More</span> </a></li>'))}),$('#productInfoTabs li[role="presentation"] a').first().click(),$('#productInfoTabs li[role="presentation"] a').on("keydown",function(a){13==a.keyCode&&(a.preventDefault(),$(a.target).click(),c($(a.target)));var b=$('#productInfoTabs li[role="presentation"]').find(":tabbable:visible").length,d=$('#productInfoTabs li[role="presentation"]').find(":tabbable:visible").index($(this));if(d===b-1&&!a.shiftKey&&9==a.keyCode){if($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible').length>0)if($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").length>0){var e=$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible:first'),f=e.parents(".expandable-section"),g=isInViewPort(e,f);g?$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible:first').focus():($('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").focus(),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"]').find(".read-more").addClass("focus"))}else $('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible:first').focus();else $("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").length>0&&$("#pdp-tab-container").parents(".PageContent").nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus();a.stopPropagation(),a.preventDefault()}}),$('#pdp-tabs .tabpanels-container .tabpanels div[aria-hidden="false"] :tabbable:visible:last').on("keydown",function(a){a.shiftKey||9!=a.keyCode||($("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").length>0?$("#pdp-tab-container").parent().nextAll(':not("script"):first').find(":tabbable:first").focus():$("#pdp-tab-container").parent().nextAll(':not("script"):first').nextAll(':not("script"):first').find(":tabbable:first").focus(),a.stopPropagation(),a.preventDefault())}),b(),$(".show-more-pdp").on("click",function(){var a=!1;$(this).parents(".multi-author-slide").length>0&&(a=!0),"Show More"==$(this).html()?($(this).html("Show Less"),$(this).attr("aria-expanded","true"),a?$(this).parent().siblings(".expandable-section").removeAttr("style"):$(".tabpanel").each(function(){var a=$(this);"false"==a.attr("aria-hidden")&&$(a).find(".expandable-section").removeAttr("style")}),$("#pdp-tabs .tab-container").removeAttr("style")):($(this).html("Show More"),$(this).attr("aria-expanded","false"),$(".tabpanel").each(function(){var a=$(this);"false"==a.attr("aria-hidden")&&($(a).find(".expandable-section").removeAttr("style"),$(a).find(".expandable-section").css({height:"302px","column-width":"53.75rem"}))}),a||$("#pdp-tabs .tab-container").css({height:"515px"}),$("html, body").animate({scrollTop:$("#pdp-tabs").offset().top-100},500))}),$(".show-less-pdp").on("click",function(){$(this).removeClass("show-less-pdp").addClass("show-more-pdp").html("Show More"),$(".tabpanel").each(function(){var a=$(this);"false"==a.attr("aria-hidden")&&$(a).find(".expandable-section").css({height:"530px"})}),$("#pdp-tabs .tab-container").css({height:"530px"})}),$("#availableFormats").on("click","li.tab a",function(a){try{var b=$(this),c=b.attr("href"),d=c.split("ean="),e=d[1],f=$(this).closest("li").find("a.tabTitle").text();"undefined"!=typeof s_setP&&trackProdFormatsClick(f);var g={action:"customer-product-format-selected",ean:e,format:f};
makeBnLoggingCall(g,{callback:function(){location.href=c},preventDefault:!0},a)}catch(h){}}),$("#otherAvailFormats-replacement").on("keydown",function(a){var b=a.keyCode||a.which;13===b&&$(this).blur()}),$("#otherAvailFormats-option-list").children("li").find("a").on("click",function(){$("#otherAvailFormats").blur()});var p=$("#otherAvailFormats").find(":selected").data("format");if($("#otherAvailFormats").on("blur",function(a){try{{var b=$(this).val(),c=b.split("ean="),d=c[1],e=$(this).find(":selected").data("format");$(".pdp-commerce-zone h2")[0].firstChild.data}if(p!==e){"undefined"!=typeof s_setP&&trackProdFormatsClick(e);var f={action:"customer-product-format-selected",ean:d,format:e};makeBnLoggingCall(f,{callback:function(){location.href=b},preventDefault:!0},a)}}catch(g){}}),$("#episodeDetail").length){var q=$("#episodeDetail");$.ajax({url:"/cartridges/ProductDetailContent/ProductDetailTypes/includes/episodes-list.jsp",cache:!1,type:"post",data:{eans:q.attr("data-eans")}}).done(function(a){q.html(a),$("#lowestPriceEpisodeButton").text($("#lowestPriceEpisode").attr("data-lowpriceepisode")),$(".pdp-form").off(),attachCartAction()})}openLoginModalNew(".PageContent .btn-instant-purchase",{preventDefault:"conditionally",successCallback:function(){$.ajax({url:SITE_ROOT+"/includes/digitalDataResponse.jsp"}).done(function(a){null!==a&&"undefined"!=typeof a&&""!==a&&"undefined"!=typeof digitalData&&""!==digitalData&&null!==digitalData&&(digitalData.user=JSON.parse(JSON.parse(a).digitalData).user)}),$(".sign-in-instant-purchase").is(":visible")&&($(".btn-instant-purchase").removeClass("strict-hidden"),$(".sign-in-instant-purchase").addClass("strict-hidden"))}}),$(".btn-instant-purchase").closest("form").on("submit",function(){var a=$(".btn-instant-purchase");a.length&&a.addClass("disabled");var b=$("#btnInstPurTextbook");b.length&&b.addClass("disabled");var c=$("#btnInstPureMag");c.length&&c.addClass("disabled")}),initializeTextAreaCounter($("#cardMessage"),$("#cardMessage").parent().find(".limit-notifier")),$("#cardMessage").on("focus",function(){$(this).removeClass("user-error")}),$(".pdp-gc").length>0&&BN.giftCard.updatePrice.init(),$("#pdp-tab-container").find(".show-more-pdp").on("keydown",function(a){a.shiftKey||9!=a.keyCode||($("#pdp-tab-container").parent().next().find(":tabbable:first").length>0?$("#pdp-tab-container").parent().next().find(":tabbable:first").focus():$("#pdp-tab-container").parent().next().next().find(":tabbable:first").focus(),a.stopPropagation(),a.preventDefault())}),$(".editorial-reviews").find("button").on("click",function(){$(this).show(),"false"==$(this).attr("aria-expanded")&&$("html, body").animate({scrollTop:$("#EditorialReviews").offset().top-$(".sticky-commerce").height()},500)}),$(".read-more a").on("click",function(a){a.preventDefault();var b=$(this),c=$(this).parent().parent();"false"==b.attr("aria-expanded")?(b.attr("aria-expanded","true"),c.focus()):b.attr("aria-expanded","false"),c.toggleClass("summarized"),b.parent().toggleClass("fade"),"read more"===b.text().toLowerCase()||"see more"===b.text().toLowerCase()?(b.text("Show Less"),b.removeClass("down-arrowhead"),b.addClass("up-arrowhead")):(b.text("Read More"),b.removeClass("up-arrowhead"),b.addClass("down-arrowhead"))}),$(".show-more a").on("click",function(a){a.preventDefault();var b=$(this),c=$(this).parent().parent();c.toggleClass("summarized"),b.parent().toggleClass("fade"),"show more"===b.text().toLowerCase()?(b.text("Show Less"),b.removeClass("down-arrowhead"),b.addClass("up-arrowhead"),b.attr("aria-expanded","true"),c.focus()):(b.text("Show More"),b.removeClass("up-arrowhead"),b.addClass("down-arrowhead"),b.attr("aria-expanded","false"))}),$("#CastCrew").addClass("summarized"),$("#CastCrew .read-more").addClass("fade"),$("#SceneIndex").addClass("summarized"),$("#SceneIndex .read-more").addClass("fade"),$("#Menu").addClass("summarized"),$("#Menu .read-more").addClass("fade"),$("#SceneIndex article").height()<168&&$("#SceneIndex .read-more").hide(),$("a.formatModal").click(function(a){a.preventDefault()});var r=$("main[role=main] input[name=rental-options]:checked"),s=$("main[role=main] input[name=rental-options]").not(r);s.parents("label").siblings().slideUp("fast"),s.parents("form").siblings().slideUp("fast"),s.siblings(".price").removeClass("no-display"),r.siblings(".price").addClass("no-display"),$(".multi-product-select").children().each(function(a,b){$(b).find("input[type=radio]").attr("checked")||$(b).addClass("grdnt-fade-white")}),$("input[name=rental-options]","main[role=main]").on("click",function(){var a=$(this),b=(/ipad|android|android 3.0|xoom|sch-i800|kindle/i.test(navigator.userAgent.toLowerCase()),$("main[role=main] input[name=rental-options]")),c=(b.not(a),a.parents("li")),d=b.parents(".subscriptions-container");c.is(":first-child")?d.children("li:first-child").removeClass("top-border"):d.children("li:first-child").addClass("top-border"),c.removeClass("grdnt-fade-white"),c.siblings().addClass("grdnt-fade-white"),$(".selectBox-container").css("overflow","visible")});var t=0;if($(".purchase-options").filter(function(){return $(this).children("li").length<2}).length&&$(".purchase-options-title").hide(),$(".multi-product-select").length>0){var u="";if($("[name=rental-options]").length>0){1==$("[name=rental-options]").length&&f();var v=!1;$("[name=rental-options]").each(function(b,c){var d=!1;if($(c).prop("checked")){d=!0,$(c).siblings(".radio__text-container").find(".radio__text").children("[data-price]").hide();var e=$(c).attr("data-option");if("market"==e&&($("#btnAddTextbook").hide(),$("#btnInstPurTextbook").hide(),$(".removable-divider").hide(),$(".purchase-button-container").attr("style","border:none !important"),$(".header-zone .current-price").children().hasClass("outOfStockText")&&$(".header-zone .current-price").hide()),$(c).closest("ul").hasClass("tBook"))if(u="tBook",$("#prodInfoContainer .header-zone span.current-price").html($(c).closest("li").find("span.current-price").html()),$("#prodInfoContainer .header-zone s.old-price").html($(c).closest("li").find("s.old-price").html()),$("#prodInfoContainer .header-zone span.saved-percent").html($(c).closest("li").find("span.saved-percent").html()),a(c),"checked"==$("#rentIsChecked").attr("checked")){$(".header-zone header h2 .days").html($("#rentalRates-button-label").text().split("-")[0]),$(".header-zone header h2 .rentDaysHy").html("&nbsp;-&nbsp;");var f=$(".availablilityStatus").val();$(".header-zone header h2 .rentDays").html("undefined"==typeof f||"1001"==f?"Rent &nbsp;":"Rent for&nbsp;")}else{$(".rentDaysHy, .rentDays, .header-zone .saved-percent").hide();var g=$(this).parent().find(".radio__text").attr("data-trigger");$(".header-zone .use-textbook").html("&nbsp;-&nbsp;"),$(".header-zone .use-method").html(g)}else if($(c).closest("ul").hasClass("eMag")){u="eMag";var h=$("#prodInfoContainer .header-zone .eMag .sticky-format").html($(c).closest("label").find(".radio__text-container").text()),i=h.html(),j=i.split("-")[0]+"-Per Issue";$("#prodInfoContainer .header-zone .eMag .sticky-format").html(j),$("#prodInfoContainer .header-zone span.current-price").html($(c).closest("li").find("span.current-price").html()),$("#prodInfoContainer .header-zone span.color-stone").html($(c).closest("li").find("span.sub-details").length>0?$(c).closest("li").find("span.sub-details").html():"")}$(c).siblings(".radio__text").children("[data-price]").hide();var k=$(c).parents(".purchase-options-item");$(k).find(".purchase-info").show(),"rent"===$(c).attr("data-option")&&($(c).parent().find("[data-price]").hide(),$("#btnInstPurTextbook").hide()),v=!0}(0==d||1==$("[name=rental-options]").length&&"rent"==$("[name=rental-options]").data("option"))&&$(".rentDaysHy, .rentDays, .header-zone .saved-percent").hide()}),0==v&&($("#btnAddTextbook").hide(250),$("#btnInstPurTextbook").hide(250),$(".removable-divider").hide(250),$(".purchase-button-container").attr("style","border:none !important"))}else $(this).find(".tBook").length>0&&($("#prodInfoContainer .header-zone span.current-price").html($("#BuyNew span.current-price").html()),$("#prodInfoContainer .header-zone s.old-price").html($("#BuyNew s.old-price").html()),$("#prodInfoContainer .header-zone span.saved-percent").html($("#BuyNew span.saved-percent").html()),$(".rentDaysHy, .rentDays, .header-zone .saved-percent").hide()),$("#btnAddTextbook").hide(250),$("#btnInstPurTextbook").hide(250),$(".removable-divider").hide(250),$(".purchase-button-container").attr("style","border:none !important"),g();if($(".purchase-button-container").hasClass("strict-hidden")&&$(".purchase-button-container").removeClass("strict-hidden"),$(".purchase-options-item").find("input[type='radio']").on("keydown",function(a){13===a.keyCode&&(a.preventDefault(),a.stopPropagation())}),$("[name=rental-options]").click(function(){var b=this,c=this.checked,d=this.name;if($("[name=rental-options]").each(function(){this!=b&&this.checked===!0&&(this.checked=!1),$(this).removeAttr("checked")}),$(this).attr("checked","checked"),"tBook"==u){var e=$(this).parent().attr("id");j(e),$("#prodInfoContainer .header-zone span.current-price").html($(this).closest("li").find("span.current-price").html()),$("#prodInfoContainer .header-zone s.old-price").html($(this).closest("li").find("s.old-price").html()),$("#prodInfoContainer .header-zone span.saved-percent").html($(this).closest("li").find("span.saved-percent").html()),a(this),$("#prodInfoContainer .tBook .used-condition").show(),$("#prodInfoContainer .header-zone span.saved-percent").hasClass("mark-saved-percent")&&($("#prodInfoContainer .header-zone span.saved-percent").removeClass("mark-saved-percent"),$("#prodInfoContainer .pdp-commerce-zone .purchase-button-container").removeClass("markButton"))}else if("eMag"==u){var f=$("#prodInfoContainer .header-zone .eMag .sticky-format").html($(this).closest("label").find(".radio__text-container").text()),g=f.html(),h=g.split("-")[0]+"-Per Issue";$("#prodInfoContainer .header-zone .eMag .sticky-format").html(h),$("#prodInfoContainer .header-zone span.current-price").html($(this).closest("li").find("span.current-price").html()),$("#prodInfoContainer .header-zone span.color-stone").html($(this).closest("li").find("span.sub-details").length>0?$(this).closest("li").find("span.sub-details").html():"")}if("checked"==$("#rentIsChecked").attr("checked")){$(".rentDaysHy, .rentDays, .header-zone .saved-percent").hide();var i=($("#rent").find(".out-of-stock"),'<span class="outOfStockText"><strong>Temporarily Out of Stock Online</strong></span>'),k=$(".availablilityStatus").val();("undefined"==typeof k||"1001"==k)&&$("#prodInfoContainer .header-zone span.current-price").append(i)}$(this).closest("[role=radio]").attr("aria-checked",c),$("input[name="+d+"]").not(this).closest("[role=radio]").removeProp("checked");var k=$(this).parent().find("input.availablilityStatus").val();if($(".purchase-info").hide(250),$("[data-price]").show(),$("[data-price="+$(this).attr("data-option")+"]").hide(),$("#"+$(this).attr("data-option")).show(250),"rent"===$(this).attr("data-option"))$("#btnAddTextbook").show(250),$("#btnInstPurTextbook").hide(250),$(".removable-divider").show(250),$(".header-zone .use-method").html(""),$(".header-zone .use-textbook").html(""),("undefined"==typeof k||"1001"==k)&&($("#btnAddTextbook").hide(),$(".rentDaysHy, .rentDays, .days, .header-zone .saved-percent").hide(),$(".purchase-button-container").attr("style","border:none !important"));else if("market"===$(this).attr("data-option")){$("[data-price]").show(),$(".info-label").hide(250);var l=$(this).parent().find(".radio__text").attr("data-trigger");$(".header-zone .use-textbook").html("&nbsp;-&nbsp;"),$(".header-zone .use-method").html(l),$("#btnAddTextbook").hide(250),$("#btnInstPurTextbook").hide(250),$(".removable-divider").hide(250),$(".purchase-button-container").attr("style","border:none !important");var m=$(this).closest("label").find(".radio__text-container .price").html().split("$")[1];$("#prodInfoContainer .header-zone span.current-price").html("<sup>$</sup>"+m),$("#prodInfoContainer .header-zone s.old-price").html(""),$("#prodInfoContainer .header-zone span.saved-percent").html(""),$("#prodInfoContainer .header-zone span.current-price").attr("aria-hidden","false"),$("#prodInfoContainer .header-zone span#adaLabelTxt").hide(),$("#prodInfoContainer .header-zone span.saved-percent").addClass("mark-saved-percent"),$("#prodInfoContainer .pdp-commerce-zone .purchase-button-container").addClass("markButton")}else{$("#btnInstPurTextbook").show(250),$(".info-label").show(250);var l=$(this).parent().find(".radio__text").attr("data-trigger");$(".header-zone .use-textbook").html("&nbsp;-&nbsp;"),$(".header-zone .use-method").html(l),"1001"!=k?($("#btnAddTextbook").show(250),$("#btnInstPurTextbook").show(250),$(".removable-divider").show(250)):($("#btnAddTextbook").hide(250),$("#btnInstPurTextbook").hide(250),$(".removable-divider").hide(250),$(".purchase-button-container").attr("style","border:none !important"))}if("checked"==$("#rentIsChecked").attr("checked")){var k=$(".availablilityStatus").val();$(".header-zone header h2 .days").html($("#rentalRates-button-label").text().split("-")[0]),$(".header-zone header h2 .rentDaysHy").html("&nbsp;-&nbsp;"),$(".header-zone header h2 .rentDays").html("undefined"==typeof k||"1001"==k?"Rent &nbsp;":"Rent for&nbsp;")}else $(".header-zone header h2 .days").html(""),$(".header-zone header h2 .rentDays").html(""),$(".header-zone header h2 .rentDaysHy").html("");if("market"!==$(this).attr("data-option")&&"true"===$("#enableBopis").val()){var n=$(this).attr("data-option"),o=!1;switch(n){case"BuyNew":o="1001"!==$("#newAvailabilityStatus").val()&&"true"!==$("#neverForSale").val();break;case"BuyUsed":o="1001"!==$("#usedAvailablilityStatus").val();break;case"rent":o="1001"!==$("#rentalAvailabilityStatus").val()}o?($("#btnAddTextbook").show(250),"rent"!==$(this).attr("data-option")&&$("#btnInstPurTextbook").show(250)):($("#btnAddTextbook").hide(250),$("#btnInstPurTextbook").hide(250))}}),$(".purchase-options-item")&&$(".purchase-options-item").find("input[type=radio]").length>0){var w=$($(".purchase-options-item").find("input[type=radio]")[0]).data("option");if($(".purchase-options-item").find("input[type=radio]:checked").length>0&&(w=$($(".purchase-options-item").find("input[type=radio]:checked")).data("option")),"market"!==w&&"true"===$("#enableBopis").val()){var x=!1;switch(w){case"BuyNew":x="1001"!==$("#newAvailabilityStatus").val()&&"true"!==$("#neverForSale").val();break;case"BuyUsed":x="1001"!==$("#usedAvailablilityStatus").val();break;case"rent":x="1001"!==$("#rentalAvailabilityStatus").val()}x||($("#btnAddTextbook").hide(250),$("#btnInstPurTextbook").hide(250))}}$(document).on("click","#btnAddTextbook, #btnAddeMag",function(){t?$(".multi-product-select .purchase-options-item .btn-addtocart").trigger("click"):$(".multi-product-select").find("[checked]").closest("fieldset").parent().find("input[type=submit]").trigger("click")}),$(document).on("click","#btnInstPurTextbook, #btnInstPureMag",function(){t?($(this).addClass("disabled"),$(".multi-product-select .purchase-options-item .btn-instant-purchase").trigger("click")):($(this).addClass("disabled"),$(".multi-product-select").find("[checked]").closest("fieldset").parent().siblings().find(".btn-instant-purchase").trigger("click"))}),$("#rentalRates").on("change",function(){var b=$("option:selected",this).attr("data-rental-rate"),c=$("option:selected",this).attr("data-rental-return-date"),d=$("option:selected",this).attr("data-rental-discount"),e=$(".rental-price .current-price"),f=$(".return-date"),g=$(".rental-price .discount-amount-value"),h=parseFloat(b).toFixed(2);e.html("<sup>$</sup>"+h),f.text(c),g.text(d),$(".header-zone header h2 .days").html($("#rentalRates-button-label").text().split("-")[0]),$("#prodInfoContainer .header-zone span.current-price").html($(this).closest("li").find("span.current-price").html()),$("#prodInfoContainer .header-zone s.old-price").html($(this).closest("li").find("s.old-price").html()),$("#prodInfoContainer .header-zone span.saved-percent").html($(this).closest("li").find("span.saved-percent").html()),a(this)})}attachCartAction(),$("body").hasClass("pdpPage")&&"undefined"!=typeof performance.mark&&"undefined"!=typeof performance.measure&&($(".pdp-form").find(".btn-addtocart").length>0&&"add to cart"===$(".pdp-form").find(".btn-addtocart").val().toLowerCase()?(performance.mark("Addtocart_loading_ends"),performance.measure("AddToCartDur","Addtocart_loading_starts","Addtocart_loading_ends")):"undefined"!=typeof performance.clearMarks&&performance.clearMarks("Addtocart_loading_starts")),$(".expand-cvv-container").hide();var y=!1;if($(".nook-devices-apps .show").on("click",function(){$(".expand-cvv-container").toggle(),0==y?($(".nook-devices-apps .show img").attr("src","/static/img/sprites/tooltip-active.png"),$(this).addClass("open"),y=!0):($(".nook-devices-apps .show img").attr("src","/static/img/sprites/plus-expand.png"),$(this).removeClass("open"),y=!1)}),$("#videoInfo").length>0){{var z=$(".par.parsys"),A=$("#videoInfo"),B=z.find("ul[id^=video-carousel]"),C=(z.children(".video-access-box-carousel"),A.find(".caroufredsel_wrapper"));C.children("a"),C.children("ul").children("a")}B.children("a").remove()}$(".PageContent form.ip-form").on("amplifiFormSuccess",function(){}).on("amplifiFormError",function(a,b){var c=$("form.ip-form .btn-instant-purchase");c.length&&c.hasClass("disabled")&&c.removeClass("disabled");var d=$("#btnInstPurTextbook");d.length&&d.hasClass("disabled")&&d.removeClass("disabled");var e=$("#btnInstPureMag");e.length&&e.hasClass("disabled")&&e.removeClass("disabled"),!b.response.data.instantPurchaseError&&b.response.data.errors.length>0?BN.Validate.DisplayErrors($(".PageContent")[1],b.response.data.errors,null,null,null,b):new BN.Modal.Browse.PDP.InstantPurchase(null,b.response.data,b.response.data.tplParams)});var D=$("#truncatedOverview");D.length>0&&(D.children().length>0?D.children().not(":empty").last().append("&hellip;"):D.append("&hellip;")),""==$(".textbook-item #prodInfoContainer .header-zone s.old-price").html()&&$("#prodInfoContainer .header-zone span.discount-amount").removeClass("saved-percent")});;/*! BARNES-BUILDER 2018-06-16 */
var FlashDetect=new function(){var a=this;a.installed=!1,a.raw="",a.major=-1,a.minor=-1,a.revision=-1,a.revisionStr="";var b=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(a){return c(a)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(a){var b="6,0,21";try{a.AllowScriptAccess="always",b=c(a)}catch(d){}return b}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(a){return c(a)}}],c=function(a){var b=-1;try{b=a.GetVariable("$version")}catch(c){}return b},d=function(a){var b=-1;try{b=new ActiveXObject(a)}catch(c){b={activeXError:!0}}return b},e=function(a){var b=a.split(",");return{raw:a,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]}},f=function(a){var b=a.split(/ +/),c=b[2].split(/\./),d=b[3];return{raw:a,major:parseInt(c[0],10),minor:parseInt(c[1],10),revisionStr:d,revision:g(d)}},g=function(b){return parseInt(b.replace(/[a-zA-Z]/g,""),10)||a.revision};a.majorAtLeast=function(b){return a.major>=b},a.minorAtLeast=function(b){return a.minor>=b},a.revisionAtLeast=function(b){return a.revision>=b},a.versionAtLeast=function(){var b=[a.major,a.minor,a.revision],c=Math.min(b.length,arguments.length);for(i=0;c>i;i++){if(b[i]>=arguments[i]){if(c>i+1&&b[i]==arguments[i])continue;return!0}return!1}},a.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var c="application/x-shockwave-flash",g=navigator.mimeTypes;if(g&&g[c]&&g[c].enabledPlugin&&g[c].enabledPlugin.description){var h=g[c].enabledPlugin.description,i=f(h);a.raw=i.raw,a.major=i.major,a.minor=i.minor,a.revisionStr=i.revisionStr,a.revision=i.revision,a.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(var h=-1,j=0;j<b.length&&-1==h;j++){var k=d(b[j].name);if(!k.activeXError&&(a.installed=!0,h=b[j].version(k),-1!=h)){var i=e(h);a.raw=i.raw,a.major=i.major,a.minor=i.minor,a.revision=i.revision,a.revisionStr=i.revisionStr}}}()};FlashDetect.JS_RELEASE="1.0.4";;/*! BARNES-BUILDER 2018-06-16 */
function isBrowseriDeviceCompatible(){var a=["iphone","ipod","ipad"],b=navigator.userAgent.toLowerCase(),c=a.length;for(i=0;c>i;i++)if(b.search(a[i])>-1&&b.search("webkit")>-1)return!0;return!1}function KitCloudAPIController(){this.parseQueryString=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[?&|&amp;]"+a+"=([^&#]*)"),c=b.exec(window.location.href);return null==c?"":c[1]},this.parseQueryStringWithDefault=function(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[?&|&amp;]"+a+"=([^&#]*)"),d=c.exec(window.location.href);return null==d?b:d[1]},this.parseQueryStringArray=function(a){try{for(i in a){name=a[i],name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[?&|&amp;]"+name+"=([^&#]*)"),c=b.exec(window.location.href);if(null!=c)return c[1]}}catch(d){return""}return""}}function addCustomScriptsforHTML5Live(a,b){function c(){g++,g===e.length&&b()}function d(a){$.ajax({url:a,dataType:"script",success:c})}a||(a="https://ovp.piksel.com");var e=new Array(a+"/jsapi/livePlayer.js",a+"/jsapi/3/jquery.countdown.js");AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH&&""!=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH&&e.push(a+"/jsapi/akamaihtml5-min.js");var f,g=0;for(f=0;f<e.length;f++)d(e[f])}function resizePlayer(){var a=document.getElementById("em_container"),b=document.getElementsByTagName("iframe")[0],c=a.clientHeight+"px",d=a.clientWidth+"px";(c!==b.style.height||d!==b.style.width)&&(b.style.width=d,b.style.height=c)}var KitCloudAPI=new KitCloudAPIController;;/*! BARNES-BUILDER 2018-06-16 */
var swfobject=function(){function a(){"complete"==u.readyState&&(u.parentNode.removeChild(u),b())}function b(){if(!L){if(N.ie&&N.win){var a=o("span");try{var b=C.getElementsByTagName("body")[0].appendChild(a);b.parentNode.removeChild(b)}catch(c){return}}L=!0,I&&(clearInterval(I),I=null);for(var d=E.length,e=0;d>e;e++)E[e]()}}function c(a){L?a():E[E.length]=a}function d(a){if(typeof B.addEventListener!=v)B.addEventListener("load",a,!1);else if(typeof C.addEventListener!=v)C.addEventListener("load",a,!1);else if(typeof B.attachEvent!=v)p(B,"onload",a);else if("function"==typeof B.onload){var b=B.onload;B.onload=function(){b(),a()}}else B.onload=a}function e(){for(var a=F.length,b=0;a>b;b++){var c=F[b].id;if(N.pv[0]>0){var d=n(c);d&&(F[b].width=d.getAttribute("width")?d.getAttribute("width"):"0",F[b].height=d.getAttribute("height")?d.getAttribute("height"):"0",q(F[b].swfVersion)?(N.webkit&&N.webkit<312&&f(d),s(c,!0)):F[b].expressInstall&&!M&&q("6.0.65")&&(N.win||N.mac)?g(F[b]):h(d))}else s(c,!0)}}function f(a){var b=a.getElementsByTagName(w)[0];if(b){var c=o("embed"),d=b.attributes;if(d)for(var e=d.length,f=0;e>f;f++)"DATA"==d[f].nodeName?c.setAttribute("src",d[f].nodeValue):c.setAttribute(d[f].nodeName,d[f].nodeValue);var g=b.childNodes;if(g)for(var h=g.length,i=0;h>i;i++)1==g[i].nodeType&&"PARAM"==g[i].nodeName&&c.setAttribute(g[i].getAttribute("name"),g[i].getAttribute("value"));a.parentNode.replaceChild(c,a)}}function g(a){M=!0;var b=n(a.id);if(b){if(a.altContentId){var c=n(a.altContentId);c&&(J=c,K=a.altContentId)}else J=i(b);!/%$/.test(a.width)&&parseInt(a.width,10)<310&&(a.width="310"),!/%$/.test(a.height)&&parseInt(a.height,10)<137&&(a.height="137"),C.title=C.title.slice(0,47)+" - Flash Player Installation";var d=N.ie&&N.win?"ActiveX":"PlugIn",e=C.title,f="MMredirectURL="+B.location+"&MMplayerType="+d+"&MMdoctitle="+e,g=a.id;if(N.ie&&N.win&&4!=b.readyState){var h=o("div");g+="SWFObjectNew",h.setAttribute("id",g),b.parentNode.insertBefore(h,b),b.style.display="none";var k=function(){b.parentNode.removeChild(b)};p(B,"onload",k)}j({data:a.expressInstall,id:A,width:a.width,height:a.height},{flashvars:f},g)}}function h(a){if(N.ie&&N.win&&4!=a.readyState){var b=o("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(i(a),b),a.style.display="none";var c=function(){a.parentNode.removeChild(a)};p(B,"onload",c)}else a.parentNode.replaceChild(i(a),a)}function i(a){var b=o("div");if(N.win&&N.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(w)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function j(a,b,c){var d,e=n(c);if(e)if(typeof a.id==v&&(a.id=c),N.ie&&N.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",G[G.length]=a.id,d=n(a.id)}else if(N.webkit&&N.webkit<312){var j=o("embed");j.setAttribute("type",z);for(var l in a)a[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?j.setAttribute("src",a[l]):"styleclass"==l.toLowerCase()?j.setAttribute("class",a[l]):"classid"!=l.toLowerCase()&&j.setAttribute(l,a[l]));for(var m in b)b[m]!=Object.prototype[m]&&"movie"!=m.toLowerCase()&&j.setAttribute(m,b[m]);e.parentNode.replaceChild(j,e),d=j}else{var p=o(w);p.setAttribute("type",z);for(var q in a)a[q]!=Object.prototype[q]&&("styleclass"==q.toLowerCase()?p.setAttribute("class",a[q]):"classid"!=q.toLowerCase()&&p.setAttribute(q,a[q]));for(var r in b)b[r]!=Object.prototype[r]&&"movie"!=r.toLowerCase()&&k(p,r,b[r]);e.parentNode.replaceChild(p,e),d=p}return d}function k(a,b,c){var d=o("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function l(a){var b=n(a);!b||"OBJECT"!=b.nodeName&&"EMBED"!=b.nodeName||(N.ie&&N.win?4==b.readyState?m(a):B.attachEvent("onload",function(){m(a)}):b.parentNode.removeChild(b))}function m(a){var b=n(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function n(a){var b=null;try{b=C.getElementById(a)}catch(c){}return b}function o(a){return C.createElement(a)}function p(a,b,c){a.attachEvent(b,c),H[H.length]=[a,b,c]}function q(a){var b=N.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function r(a,b){if(!N.ie||!N.mac){var c=C.getElementsByTagName("head")[0],d=o("style");if(d.setAttribute("type","text/css"),d.setAttribute("media","screen"),N.ie&&N.win||typeof C.createTextNode==v||d.appendChild(C.createTextNode(a+" {"+b+"}")),c.appendChild(d),N.ie&&N.win&&typeof C.styleSheets!=v&&C.styleSheets.length>0){var e=C.styleSheets[C.styleSheets.length-1];typeof e.addRule==w&&e.addRule(a,b)}}}function s(a,b){var c=b?"visible":"hidden";L&&n(a)?n(a).style.visibility=c:r("#"+a,"visibility:"+c)}function t(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c?encodeURIComponent(a):a}{var u,v="undefined",w="object",x="Shockwave Flash",y="ShockwaveFlash.ShockwaveFlash",z="application/x-shockwave-flash",A="SWFObjectExprInst",B=window,C=document,D=navigator,E=[],F=[],G=[],H=[],I=null,J=null,K=null,L=!1,M=!1,N=function(){var a=typeof C.getElementById!=v&&typeof C.getElementsByTagName!=v&&typeof C.createElement!=v,b=[0,0,0],c=null;if(typeof D.plugins!=v&&typeof D.plugins[x]==w)c=D.plugins[x].description,!c||typeof D.mimeTypes!=v&&D.mimeTypes[z]&&!D.mimeTypes[z].enabledPlugin||(c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),b[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),b[2]=/r/.test(c)?parseInt(c.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof B.ActiveXObject!=v){var d=null,e=!1;try{d=new ActiveXObject(y+".7")}catch(f){try{d=new ActiveXObject(y+".6"),b=[6,0,21],d.AllowScriptAccess="always"}catch(f){6==b[0]&&(e=!0)}if(!e)try{d=new ActiveXObject(y)}catch(f){}}if(!e&&d)try{c=d.GetVariable("$version"),c&&(c=c.split(" ")[1].split(","),b=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(f){}}var g=D.userAgent.toLowerCase(),h=D.platform.toLowerCase(),i=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,j=!1,k=/win/.test(h?h:g),l=/mac/.test(h?h:g);return{w3cdom:a,pv:b,webkit:i,ie:j,win:k,mac:l}}();!function(){if(N.w3cdom){if(c(e),N.ie&&N.win)try{C.write("<script id=__ie_ondomload defer=true src=//:></script>"),u=n("__ie_ondomload"),u&&p(u,"onreadystatechange",a)}catch(f){}N.webkit&&typeof C.readyState!=v&&(I=setInterval(function(){/loaded|complete/.test(C.readyState)&&b()},10)),typeof C.addEventListener!=v&&C.addEventListener("DOMContentLoaded",b,null),d(b)}}(),function(){N.ie&&N.win&&window.attachEvent("onunload",function(){for(var a=H.length,b=0;a>b;b++)H[b][0].detachEvent(H[b][1],H[b][2]);for(var c=G.length,d=0;c>d;d++)l(G[d]);for(var e in N)N[e]=null;N=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}()}return{registerObject:function(a,b,c){if(N.w3cdom&&a&&b){var d={};d.id=a,d.swfVersion=b,d.expressInstall=c?c:!1,F[F.length]=d,s(a,!1)}},getObjectById:function(a){var b=null;if(N.w3cdom){var c=n(a);if(c){var d=c.getElementsByTagName(w)[0];!d||d&&typeof c.SetVariable!=v?b=c:typeof d.SetVariable!=v&&(b=d)}}return b},embedSWF:function(a,b,d,e,f,h,i,k,l){if(N.w3cdom&&a&&b&&d&&e&&f)if(d+="",e+="",q(f)){s(b,!1);var m={};if(l&&typeof l===w)for(var n in l)l[n]!=Object.prototype[n]&&(m[n]=l[n]);m.data=a,m.width=d,m.height=e;var o={};if(k&&typeof k===w)for(var p in k)k[p]!=Object.prototype[p]&&(o[p]=k[p]);if(i&&typeof i===w)for(var r in i)i[r]!=Object.prototype[r]&&(typeof o.flashvars!=v?o.flashvars+="&"+r+"="+i[r]:o.flashvars=r+"="+i[r]);c(function(){j(m,o,b),m.id==b&&s(b,!0)})}else h&&!M&&q("6.0.65")&&(N.win||N.mac)&&(M=!0,s(b,!1),c(function(){var a={};a.id=a.altContentId=b,a.width=d,a.height=e,a.expressInstall=h,g(a)}))},getFlashPlayerVersion:function(){return{major:N.pv[0],minor:N.pv[1],release:N.pv[2]}},hasFlashPlayerVersion:q,createSWF:function(a,b,c){return N.w3cdom?j(a,b,c):void 0},removeSWF:function(a){N.w3cdom&&l(a)},createCSS:function(a,b){N.w3cdom&&r(a,b)},addDomLoadEvent:c,addLoadEvent:d,getQueryParamValue:function(a){var b=C.location.search||C.location.hash;if(null==a)return t(b);if(b)for(var c=b.substring(1).split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return t(c[d].substring(c[d].indexOf("=")+1));return""},expressInstallCallback:function(){if(M&&J){var a=n(A);a&&(a.parentNode.replaceChild(J,a),K&&(s(K,!0),N.ie&&N.win&&(J.style.display="block")),J=null,K=null,M=!1)}}}}();