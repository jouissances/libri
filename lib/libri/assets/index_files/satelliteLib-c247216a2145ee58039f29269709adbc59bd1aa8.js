/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ============

 Adobe Visitor API for JavaScript version: 2.1.0
 Copyright 1996-2015 Adobe, Inc. All Rights Reserved
 More info available at http://www.omniture.com
*/
function Visitor(q,w){function x(e){return function(t){t=t||s.location.href;try{var n=a.Xa(t,e);if(n)return m.Hb(n)}catch(i){}}}function B(e){function t(e,t,a){return(a=a?a+="|":a)+(e+"=")+encodeURIComponent(t)}for(var a="",n=0,i=e.length;n<i;n++){var r,s=(r=e[n])[0];(r=r[1])!=j&&r!==u&&(a=t(s,r,a))}return(o=(o=a)?o+="|":o)+"TS="+m.Da();var o}if(!q)throw"Visitor requires Adobe Marketing Cloud Org ID";var a=this;a.version="2.1.0";var s=window,l=s.Visitor;l.version=a.version,s.s_c_in||(s.s_c_il=[],s.s_c_in=0),a._c="Visitor",a._il=s.s_c_il,a._in=s.s_c_in,a._il[a._in]=a,s.s_c_in++,a.na={La:[]};var v=s.document,j=l.Pb;j||(j=null);var F=l.Qb;F||(F=void 0);var i=l.Va;i||(i=!0);var k=l.Sa;k||(k=!1);var n={r:!!s.postMessage,Ra:1,ea:864e5,ba:"adobe_mc",ca:"adobe_mc_sdid",w:/^[0-9a-fA-F\-]+$/,Qa:5,Ta:/^\d+$/,fa:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/};a.Rb=n,a.ka=function(e){var t,a=0;if(e)for(t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a&=a;return a},a.u=function(e,t){var a,n,r="0123456789",s="",c="",l=8,u=10,d=10;if(t===o&&(y.isClientSideMarketingCloudVisitorID=i),1==e){for(r+="ABCDEF",a=0;16>a;a++)n=Math.floor(Math.random()*l),s+=r.substring(n,n+1),n=Math.floor(Math.random()*l),c+=r.substring(n,n+1),l=16;return s+"-"+c}for(a=0;19>a;a++)n=Math.floor(Math.random()*u),s+=r.substring(n,n+1),0==a&&9==n?u=3:(1==a||2==a)&&10!=u&&2>n?u=10:2<a&&(u=10),n=Math.floor(Math.random()*d),c+=r.substring(n,n+1),0==a&&9==n?d=3:(1==a||2==a)&&10!=d&&2>n?d=10:2<a&&(d=10);return s+c},a.Ya=function(){var e;if(!e&&s.location&&(e=s.location.hostname),e)if(/^[0-9.]+$/.test(e))e="";else{var t=e.split("."),a=t.length-1,n=a-1;if(1<a&&2>=t[a].length&&(2==t[a-1].length||0>",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,".indexOf(","+t[a]+","))&&n--,0<n)for(e="";a>=n;)e=t[a]+(e?".":"")+e,a--}return e},a.cookieRead=function(e){e=encodeURIComponent(e);var t=(";"+v.cookie).split(" ").join(";"),a=t.indexOf(";"+e+"="),n=0>a?a:t.indexOf(";",a+1);return 0>a?"":decodeURIComponent(t.substring(a+2+e.length,0>n?t.length:n))},a.cookieWrite=function(e,t,n){t=""+t;var i,r=(r=a.cookieLifetime)?(""+r).toUpperCase():"";return n&&"SESSION"!=r&&"NONE"!=r?(i=""!=t?parseInt(r||0,10):-60)?(n=new Date).setTime(n.getTime()+1e3*i):1==n&&(i=(n=new Date).getYear(),n.setYear(i+2+(1900>i?1900:0))):n=0,e&&"NONE"!=r?(v.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(n?" expires="+n.toGMTString()+";":"")+(a.cookieDomain?" domain="+a.cookieDomain+";":""),a.cookieRead(e)==t):0},a.h=j,a.z=function(e,t){try{"function"==typeof e?e.apply(s,t):e[1].apply(e[0],t)}catch(a){}},a.M=function(e,t){t&&(a.h==j&&(a.h={}),a.h[e]==F&&(a.h[e]=[]),a.h[e].push(t))},a.t=function(e,t){if(a.h!=j){var n=a.h[e];if(n)for(;0<n.length;)a.z(n.shift(),t)}},a.s=function(e,t,a,n){if(a=encodeURIComponent(t)+"="+encodeURIComponent(a),t=m.Fb(e),-1===(e=m.wb(e)).indexOf("?"))return e+"?"+a+t;var i=e.split("?");return(e=i[0]+"?")+(n=m.ib(i[1],a,n))+t},a.Xa=function(e,t){var a=RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(a&&a.length)return decodeURIComponent(a[1])},a.eb=x(n.ba),a.fb=x(n.ca),a.ha=function(){var e=a.fb(void 0);e&&e.SDID&&e[G]===q&&(a._supplementalDataIDCurrent=e.SDID,a._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=i)},a.ga=function(){var e=a.eb();if(e&&e.TS&&!(Math.floor((m.Da()-e.TS)/60)>n.Qa||e[G]!==q)){var i=e[o],s=a.setMarketingCloudVisitorID;i&&i.match(n.w)&&s(i),a.j(t,-1),e=e[r],i=a.setAnalyticsVisitorID,e&&e.match(n.w)&&i(e)}},a.cb=function(e){function t(e){m.Ga(e)&&a.setCustomerIDs(e)}function n(e){e=e||{},a._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",a._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},a._supplementalDataIDLast=e.supplementalDataIDLast||"",a._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}if(e)try{if((e=m.Ga(e)?e:m.Gb(e))[a.marketingCloudOrgID]){var i=e[a.marketingCloudOrgID];t(i.customerIDs),n(i.sdid)}}catch(r){throw Error("`serverState` has an invalid format.")}},a.l=j,a.$a=function(e,t,n,r){t=a.s(t,"d_fieldgroup",e,1),r.url=a.s(r.url,"d_fieldgroup",e,1),r.m=a.s(r.m,"d_fieldgroup",e,1),y.d[e]=i,r===Object(r)&&r.m&&"XMLHttpRequest"===a.pa.F.G?a.pa.rb(r,n,e):a.useCORSOnly||a.ab(e,t,n)},a.ab=function(e,t,n){var r,s=0,o=0;if(t&&v){for(r=0;!s&&2>r;){try{s=(s=v.getElementsByTagName(0<r?"HEAD":"head"))&&0<s.length?s[0]:0}catch(c){s=0}r++}if(!s)try{v.body&&(s=v.body)}catch(k){s=0}if(s)for(r=0;!o&&2>r;){try{o=v.createElement(0<r?"SCRIPT":"script")}catch(l){o=0}r++}}t&&s&&o?(o.type="text/javascript",o.src=t,s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),s=a.loadTimeout,p.d[e]={requestStart:p.p(),url:t,xa:s,va:p.Ca(),wa:0},n&&(a.l==j&&(a.l={}),a.l[e]=setTimeout(function(){n(i)},s)),a.na.La.push(t)):n&&n()},a.Wa=function(e){a.l!=j&&a.l[e]&&(clearTimeout(a.l[e]),a.l[e]=0)},a.la=k,a.ma=k,a.isAllowed=function(){return!a.la&&(a.la=i,a.cookieRead(a.cookieName)||a.cookieWrite(a.cookieName,"T",1))&&(a.ma=i),a.ma},a.b=j,a.c=j;var H=l.gc;H||(H="MC");var o=l.nc;o||(o="MCMID");var G=l.kc;G||(G="MCORGID");var I=l.hc;I||(I="MCCIDH");var M=l.lc;M||(M="MCSYNCS");var K=l.mc;K||(K="MCSYNCSOP");var L=l.ic;L||(L="MCIDTS");var C=l.jc;C||(C="MCOPTOUT");var E=l.ec;E||(E="A");var r=l.bc;r||(r="MCAID");var D=l.fc;D||(D="AAM");var A=l.dc;A||(A="MCAAMLH");var t=l.cc;t||(t="MCAAMB");var u=l.oc;u||(u="NONE"),a.N=0,a.ja=function(){if(!a.N){var e=a.version;a.audienceManagerServer&&(e+="|"+a.audienceManagerServer),a.audienceManagerServerSecure&&(e+="|"+a.audienceManagerServerSecure),a.N=a.ka(e)}return a.N},a.oa=k,a.f=function(){if(!a.oa){a.oa=i;var e,t,s,o,c=a.ja(),l=k,u=a.cookieRead(a.cookieName),d=new Date;if(a.b==j&&(a.b={}),u&&"T"!=u)for((u=u.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(u[0],10)!=c&&(l=i),u.shift()),1==u.length%2&&u.pop(),c=0;c<u.length;c+=2)t=(e=u[c].split("-"))[0],s=u[c+1],1<e.length?(o=parseInt(e[1],10),e=0<e[1].indexOf("s")):(o=0,e=k),l&&(t==I&&(s=""),0<o&&(o=d.getTime()/1e3-60)),t&&s&&(a.e(t,s,1),0<o&&(a.b["expire"+t]=o+(e?"s":""),d.getTime()>=1e3*o||e&&!a.cookieRead(a.sessionCookieName)))&&(a.c||(a.c={}),a.c[t]=i);!a.a(r)&&m.o()&&(u=a.cookieRead("s_vi"))&&(1<(u=u.split("|")).length&&0<=u[0].indexOf("v1")&&(0<=(c=(s=u[1]).indexOf("["))&&(s=s.substring(0,c)),s&&s.match(n.w)&&a.e(r,s)))}},a._appendVersionTo=function(e){var t="vVersion|"+a.version,i=Boolean(e)?a._getCookieVersion(e):null;return i?m.jb(i,a.version)&&(e=e.replace(n.fa,t)):e+=(e?"|":"")+t,e},a.hb=function(){var e,t,n=a.ja();for(e in a.b)!Object.prototype[e]&&a.b[e]&&"expire"!=e.substring(0,6)&&(t=a.b[e],n+=(n?"|":"")+e+(a.b["expire"+e]?"-"+a.b["expire"+e]:"")+"|"+t);n=a._appendVersionTo(n),a.cookieWrite(a.cookieName,n,1)},a.a=function(e,t){return a.b==j||!t&&a.c&&a.c[e]?j:a.b[e]},a.e=function(e,t,n){a.b==j&&(a.b={}),a.b[e]=t,n||a.hb()},a.Za=function(e,t){var n=a.a(e,t);return n?n.split("*"):j},a.gb=function(e,t,n){a.e(e,t?t.join("*"):"",n)},a.Wb=function(e,t){var n=a.Za(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return j},a.Yb=function(e,t,n){var i,r=j;if(t)for(i in r=[],t)Object.prototype[i]||(r.push(i),r.push(t[i]));a.gb(e,r,n)},a.j=function(e,t,n){var r=new Date;r.setTime(r.getTime()+1e3*t),a.b==j&&(a.b={}),a.b["expire"+e]=Math.floor(r.getTime()/1e3)+(n?"s":""),0>t?(a.c||(a.c={}),a.c[e]=i):a.c&&(a.c[e]=k),n&&(a.cookieRead(a.sessionCookieName)||a.cookieWrite(a.sessionCookieName,"1"))},a.ia=function(e){return e&&("object"==typeof e&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&("NOTARGET"==(e=e.toUpperCase())&&(e=u)),!e||e!=u&&!e.match(n.w))&&(e=""),e},a.k=function(e,n){if(a.Wa(e),a.i!=j&&(a.i[e]=k),p.d[e]&&(p.d[e].Nb=p.p(),p.J(e)),y.d[e]&&y.Na(e,k),e==H){y.isClientSideMarketingCloudVisitorID!==i&&(y.isClientSideMarketingCloudVisitorID=k);var s=a.a(o);if(!s||a.overwriteCrossDomainMCIDAndAID){if(!(s="object"==typeof n&&n.mid?n.mid:a.ia(n))){if(a.D)return void a.getAnalyticsVisitorID(j,k,i);s=a.u(0,o)}a.e(o,s)}s&&s!=u||(s=""),"object"==typeof n&&((n.d_region||n.dcs_region||n.d_blob||n.blob)&&a.k(D,n),a.D&&n.mid&&a.k(E,{id:n.id})),a.t(o,[s])}if(e==D&&"object"==typeof n){s=604800,n.id_sync_ttl!=F&&n.id_sync_ttl&&(s=parseInt(n.id_sync_ttl,10));var c=a.a(A);c||((c=n.d_region)||(c=n.dcs_region),c&&(a.j(A,s),a.e(A,c))),c||(c=""),a.t(A,[c]),c=a.a(t),(n.d_blob||n.blob)&&((c=n.d_blob)||(c=n.blob),a.j(t,s),a.e(t,c)),c||(c=""),a.t(t,[c]),!n.error_msg&&a.C&&a.e(I,a.C)}var l;(e==E&&((s=a.a(r))&&!a.overwriteCrossDomainMCIDAndAID||((s=a.ia(n))?s!==u&&a.j(t,-1):s=u,a.e(r,s)),s&&s!=u||(s=""),a.t(r,[s])),a.idSyncDisableSyncs?z.Ea=i:(z.Ea=k,(s={}).ibs=n.ibs,s.subdomain=n.subdomain,z.Ib(s)),n===Object(n))&&(a.isAllowed()&&(l=a.a(C)),l||(l=u,n.d_optout&&n.d_optout instanceof Array&&(l=n.d_optout.join(",")),s=parseInt(n.d_ottl,10),isNaN(s)&&(s=7200),a.j(C,s,i),a.e(C,l)),a.t(C,[l]))},a.i=j,a.v=function(e,n,s,c,l){var d,g="",f=m.yb(e);if(a.isAllowed())if(a.f(),!(!(g=a.a(e,N[e]===i))||a.c&&a.c[e])||a.disableThirdPartyCalls&&!f)g||(e===o?(a.M(e,s),g=a.u(0,o),a.setMarketingCloudVisitorID(g)):e===r?(a.M(e,s),g="",a.setAnalyticsVisitorID(g)):(g="",c=i));else if(e==o||e==C?d=H:e==A||e==t?d=D:e==r&&(d=E),d)return!n||a.i!=j&&a.i[d]||(a.i==j&&(a.i={}),a.i[d]=i,a.$a(d,n,function(t){a.a(e)||(p.d[d]&&(p.d[d].timeout=p.p(),p.d[d].xb=!!t,p.J(d)),t&&y.Na(d,i),t="",e==o?t=a.u(0,o):d==D&&(t={error_msg:"timeout"}),a.k(d,t))},l)),a.M(e,s),g||(n||a.k(d,{id:u}),"");return e!=o&&e!=r||g!=u||(g="",c=i),s&&c&&a.z(s,[g]),g},a._setMarketingCloudFields=function(e){a.f(),a.k(H,e)},a.setMarketingCloudVisitorID=function(e){a._setMarketingCloudFields(e)},a.D=k,a.getMarketingCloudVisitorID=function(e,t){if(a.isAllowed()){a.marketingCloudServer&&0>a.marketingCloudServer.indexOf(".demdex.net")&&(a.D=i);var n=a.B("_setMarketingCloudFields");return a.v(o,n.url,e,t,n)}return""},a.bb=function(e){a.getAudienceManagerBlob(e,i)},l.AuthState={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},a.A={},a.K=k,a.C="",a.setCustomerIDs=function(e){if(a.isAllowed()&&e){var t,n;for(t in a.f(),e)if(!Object.prototype[t]&&(n=e[t]))if("object"==typeof n){var r={};n.id&&(r.id=n.id),n.authState!=F&&(r.authState=n.authState),a.A[t]=r}else a.A[t]={id:n};e=a.getCustomerIDs(),r=a.a(I);var s="";for(t in r||(r=0),e)Object.prototype[t]||(s+=(s?"|":"")+t+"|"+((n=e[t]).id?n.id:"")+(n.authState?n.authState:""));a.C=a.ka(s),a.C!=r&&(a.K=i,a.bb(function(){a.K=k}))}},a.getCustomerIDs=function(){a.f();var e,t,n={};for(e in a.A)Object.prototype[e]||(t=a.A[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),n[e].authState=t.authState!=F?t.authState:l.AuthState.UNKNOWN);return n},a._setAnalyticsFields=function(e){a.f(),a.k(E,e)},a.setAnalyticsVisitorID=function(e){a._setAnalyticsFields(e)},a.getAnalyticsVisitorID=function(e,t,n){if(!m.o()&&!n)return a.z(e,[""]),"";if(a.isAllowed()){var s="";if(n||(s=a.getMarketingCloudVisitorID(function(){a.getAnalyticsVisitorID(e,i)})),s||n){var c=n?a.marketingCloudServer:a.trackingServer,l="";a.loadSSL&&(n?a.marketingCloudServerSecure&&(c=a.marketingCloudServerSecure):a.trackingServerSecure&&(c=a.trackingServerSecure));var u={};if(c){c="http"+(a.loadSSL?"s":"")+"://"+c+"/id",s="d_visid_ver="+a.version+"&mcorgid="+encodeURIComponent(a.marketingCloudOrgID)+(s?"&mid="+encodeURIComponent(s):"")+(a.idSyncDisable3rdPartySyncing?"&d_coppa=true":"");var d=["s_c_il",a._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];l=c+"?"+s+"&callback=s_c_il%5B"+a._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields";u.m=c+"?"+s,u.sa=d}return u.url=l,a.v(n?o:r,l,e,t,u)}}return""},a._setAudienceManagerFields=function(e){a.f(),a.k(D,e)},a.B=function(e){var n=a.audienceManagerServer,s="",c=a.a(o),l=a.a(t,i),d=(d=a.a(r))&&d!=u?"&d_cid_ic=AVID%01"+encodeURIComponent(d):"";if(a.loadSSL&&a.audienceManagerServerSecure&&(n=a.audienceManagerServerSecure),n){var p,g;if(s=a.getCustomerIDs())for(p in s)Object.prototype[p]||(g=s[p],d+="&d_cid_ic="+encodeURIComponent(p)+"%01"+encodeURIComponent(g.id?g.id:"")+(g.authState?"%01"+g.authState:""));return e||(e="_setAudienceManagerFields"),n="http"+(a.loadSSL?"s":"")+"://"+n+"/id",c="d_visid_ver="+a.version+"&d_rtbd=json&d_ver=2"+(!c&&a.D?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(a.marketingCloudOrgID)+"&d_nsid="+(a.idSyncContainerID||0)+(c?"&d_mid="+encodeURIComponent(c):"")+(a.idSyncDisable3rdPartySyncing?"&d_coppa=true":"")+(l?"&d_blob="+encodeURIComponent(l):"")+d,l=["s_c_il",a._in,e],{url:s=n+"?"+c+"&d_cb=s_c_il%5B"+a._in+"%5D."+e,m:n+"?"+c,sa:l}}return{url:s}},a.getAudienceManagerLocationHint=function(e,t){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerLocationHint(e,i)})){var n=a.a(r);if(!n&&m.o()&&(n=a.getAnalyticsVisitorID(function(){a.getAudienceManagerLocationHint(e,i)})),n||!m.o())return n=a.B(),a.v(A,n.url,e,t,n)}return""},a.getLocationHint=a.getAudienceManagerLocationHint,a.getAudienceManagerBlob=function(e,n){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerBlob(e,i)})&&(!(s=a.a(r))&&m.o()&&(s=a.getAnalyticsVisitorID(function(){a.getAudienceManagerBlob(e,i)})),s||!m.o())){var s,o=(s=a.B()).url;return a.K&&a.j(t,-1),a.v(t,o,e,n,s)}return""},a._supplementalDataIDCurrent="",a._supplementalDataIDCurrentConsumed={},a._supplementalDataIDLast="",a._supplementalDataIDLastConsumed={},a.getSupplementalDataID=function(e,t){!a._supplementalDataIDCurrent&&!t&&(a._supplementalDataIDCurrent=a.u(1));var n=a._supplementalDataIDCurrent;return a._supplementalDataIDLast&&!a._supplementalDataIDLastConsumed[e]?(n=a._supplementalDataIDLast,a._supplementalDataIDLastConsumed[e]=i):n&&(a._supplementalDataIDCurrentConsumed[e]&&(a._supplementalDataIDLast=a._supplementalDataIDCurrent,a._supplementalDataIDLastConsumed=a._supplementalDataIDCurrentConsumed,a._supplementalDataIDCurrent=n=t?"":a.u(1),a._supplementalDataIDCurrentConsumed={}),n&&(a._supplementalDataIDCurrentConsumed[e]=i)),n},l.OptOut={GLOBAL:"global"},a.getOptOut=function(e,t){if(a.isAllowed()){var n=a.B("_setMarketingCloudFields");return a.v(C,n.url,e,t,n)}return""},a.isOptedOut=function(e,t,n){return a.isAllowed()?(t||(t=l.OptOut.GLOBAL),(n=a.getOptOut(function(n){a.z(e,[n==l.OptOut.GLOBAL||0<=n.indexOf(t)])},n))?n==l.OptOut.GLOBAL||0<=n.indexOf(t):j):k},a.appendVisitorIDsTo=function(e){var t=n.ba,i=B([[o,a.a(o)],[r,a.a(r)],[G,a.marketingCloudOrgID]]);try{return a.s(e,t,i)}catch(s){return e}},a.appendSupplementalDataIDTo=function(e,t){if(!(t=t||a.getSupplementalDataID(m.sb(),!0)))return e;var i,r=n.ca;i="SDID="+encodeURIComponent(t)+"|"+G+"="+encodeURIComponent(a.marketingCloudOrgID);try{return a.s(e,r,i)}catch(s){return e}},a.ra={postMessage:function(e,t,a){var i=1;t&&(n.r?a.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(a.location=t.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+e))},X:function(e,t){var a;try{n.r&&(e&&(a=function(a){if("string"==typeof t&&a.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(a.origin))return!1;e(a)}),window.addEventListener?window[e?"addEventListener":"removeEventListener"]("message",a,!1):window[e?"attachEvent":"detachEvent"]("onmessage",a))}catch(i){}}};var m={O:v.addEventListener?function(e,t,a){e.addEventListener(t,function(e){"function"==typeof a&&a(e)},k)}:v.attachEvent?function(e,t,a){e.attachEvent("on"+t,function(e){"function"==typeof a&&a(e)})}:void 0,map:function(e,t){if(Array.prototype.map)return e.map(t);if(void 0===e||e===j)throw new TypeError;var a=Object(e),n=a.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=Array(n),r=0;r<n;r++)r in a&&(i[r]=t.call(t,a[r],r,a));return i},za:function(e,t){return this.map(e,function(e){return encodeURIComponent(e)}).join(t)},Fb:function(e){var t=e.indexOf("#");return 0<t?e.substr(t):""},wb:function(e){var t=e.indexOf("#");return 0<t?e.substr(0,t):e},ib:function(e,t,a){return e=e.split("&"),a=a!=j?a:e.length,e.splice(a,0,t),e.join("&")},yb:function(e,t,n){return e!==r?k:(t||(t=a.trackingServer),n||(n=a.trackingServerSecure),"string"==typeof(e=a.loadSSL?n:t)&&e.length?0>e.indexOf("2o7.net")&&0>e.indexOf("omtrdc.net"):k)},Ga:function(e){return Boolean(e&&e===Object(e))},zb:function(e,t){return 0>a._compareVersions(e,t)},jb:function(e,t){return 0!==a._compareVersions(e,t)},Mb:function(e){document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},o:function(){return!!a.trackingServer||!!a.trackingServerSecure},Gb:function(a,b){function c(e,t){var a,n,i=e[t];if(i&&"object"==typeof i)for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(void 0!==(n=c(i,a))?i[a]=n:delete i[a]);return b.call(e,t,i)}if("object"==typeof JSON&&"function"==typeof JSON.parse)return JSON.parse(a,b);var e;if(e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a=""+a,e.lastIndex=0,e.test(a)&&(a=a.replace(e,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"==typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse")},Da:function(){return Math.round((new Date).getTime()/1e3)},Hb:function(e){for(var t={},a=0,n=(e=e.split("|")).length;a<n;a++){var i=e[a].split("=");t[i[0]]=decodeURIComponent(i[1])}return t},sb:function(e){e=e||5;for(var t="";e--;)t+="abcdefghijklmnopqrstuvwxyz0123456789"[Math.floor(36*Math.random())];return t}},Ce,De;a.Xb=m,a.pa={F:(Ce="none",De=i,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?Ce="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(De=k),0<Object.prototype.toString.call(window.Ob).indexOf("Constructor")&&(De=k)),{G:Ce,$b:De}),tb:function(){return"none"===this.F.G?j:new window[this.F.G]},rb:function(e,t,n){var r=this;t&&(e.U=t);try{var s=this.tb();s.open("get",e.m+"&ts="+(new Date).getTime(),i),"XMLHttpRequest"===this.F.G&&(s.withCredentials=i,s.timeout=a.loadTimeout,s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4===this.readyState&&200===this.status)e:{var a;try{if((a=JSON.parse(this.responseText))!==Object(a)){r.n(e,j,"Response is not JSON");break e}}catch(t){r.n(e,t,"Error parsing response as JSON");break e}try{for(var n=e.sa,s=window,o=0;o<n.length;o++)s=s[n[o]];s(a)}catch(i){r.n(e,i,"Error forming callback function")}}}),s.onerror=function(t){r.n(e,t,"onerror")},s.ontimeout=function(t){r.n(e,t,"ontimeout")},s.send(),p.d[n]={requestStart:p.p(),url:e.m,xa:s.timeout,va:p.Ca(),wa:1},a.na.La.push(e.m)}catch(o){this.n(e,o,"try-catch")}},n:function(e,t,n){a.CORSErrors.push({ac:e,error:t,description:n}),e.U&&("ontimeout"===n?e.U(i):e.U(k))}};var z={Ua:3e4,da:649,Pa:k,id:j,W:[],S:j,Ba:function(e){if("string"==typeof e)return(e=e.split("/"))[0]+"//"+e[2]},g:j,url:j,ub:function(){var e="http://fast.",t="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(v.location.href);return this.g||(this.g="nosubdomainreturned"),a.loadSSL&&(e=a.idSyncSSLUseAkamai?"https://fast.":"https://"),e=e+this.g+".demdex.net/dest5.html"+t,this.S=this.Ba(e),this.id="destination_publishing_iframe_"+this.g+"_"+a.idSyncContainerID,e},mb:function(){var e="?d_nsid="+a.idSyncContainerID+"#"+encodeURIComponent(v.location.href);"string"==typeof a.L&&a.L.length&&(this.id="destination_publishing_iframe_"+(new Date).getTime()+"_"+a.idSyncContainerID,this.S=this.Ba(a.L),this.url=a.L+e)},Ea:j,ya:k,Z:k,H:j,pc:j,Eb:j,qc:j,Y:k,I:[],Cb:[],Db:[],Ha:n.r?15:100,T:[],Ab:[],ta:i,Ka:k,Ja:function(){return!a.idSyncDisable3rdPartySyncing&&(this.ya||a.Tb)&&this.g&&"nosubdomainreturned"!==this.g&&this.url&&!this.Z},Q:function(){function e(){(n=document.createElement("iframe")).sandbox="allow-scripts allow-same-origin",n.title="Adobe ID Syncing iFrame",n.id=a.id,n.style.cssText="display: none; width: 0; height: 0;",n.src=a.url,a.Eb=i,t(),document.body.appendChild(n)}function t(){m.O(n,"load",function(){n.className="aamIframeLoaded",a.H=i,a.q()})}this.Z=i;var a=this,n=document.getElementById(this.id);n?"IFRAME"!==n.nodeName?(this.id+="_2",e()):"aamIframeLoaded"!==n.className?t():(this.H=i,this.Fa=n,this.q()):e(),this.Fa=n},q:function(e){var t=this;e===Object(e)&&(this.T.push(e),this.Jb(e)),(this.Ka||!n.r||this.H)&&this.T.length&&(this.J(this.T.shift()),this.q()),!a.idSyncDisableSyncs&&this.H&&this.I.length&&!this.Y&&(this.Pa||(this.Pa=i,setTimeout(function(){t.Ha=n.r?15:150},this.Ua)),this.Y=i,this.Ma())},Jb:function(e){var t,a,n;if((t=e.ibs)&&t instanceof Array&&(a=t.length))for(e=0;e<a;e++)(n=t[e]).syncOnPage&&this.ua(n,"","syncOnPage")},J:function(e){var t,a,n,i,r,s=encodeURIComponent;if((t=e.ibs)&&t instanceof Array&&(a=t.length))for(n=0;n<a;n++)i=t[n],r=[s("ibs"),s(i.id||""),s(i.tag||""),m.za(i.url||[],","),s(i.ttl||""),"","",i.fireURLSync?"true":"false"],i.syncOnPage||(this.ta?this.P(r.join("|")):i.fireURLSync&&this.ua(i,r.join("|")));this.Ab.push(e)},ua:function(e,t,r){var s=(r="syncOnPage"===r?i:k)?K:M;a.f();var o=a.a(s),c=k,l=k,u=Math.ceil((new Date).getTime()/n.ea);o?(o=o.split("*"),c=(l=this.Kb(o,e.id,u)).pb,l=l.qb,(!c||!l)&&this.Aa(r,e,t,o,s,u)):(o=[],this.Aa(r,e,t,o,s,u))},Kb:function(e,t,a){var n,r,s,o=k,c=k;for(r=0;r<e.length;r++)n=e[r],s=parseInt(n.split("-")[1],10),n.match("^"+t+"-")?(o=i,a<s?c=i:(e.splice(r,1),r--)):a>=s&&(e.splice(r,1),r--);return{pb:o,qb:c}},Bb:function(e){if(e.join("*").length>this.da)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.da;)e.shift()},Aa:function(e,t,n,i,r,s){var o=this;if(e){if("img"===t.tag){var c,l,u;e=t.url,n=a.loadSSL?"https:":"http:";for(i=0,c=e.length;i<c;i++){l=e[i],u=/^\/\//.test(l);var d=new Image;m.O(d,"load",function(e,t,n,i){return function(){o.W[e]=j,a.f();var s,c,l,u,d=[];if(s=a.a(r))for(c=0,l=(s=s.split("*")).length;c<l;c++)(u=s[c]).match("^"+t.id+"-")||d.push(u);o.Oa(d,t,n,i)}}(this.W.length,t,r,s)),d.src=(u?n:"")+l,this.W.push(d)}}}else this.P(n),this.Oa(i,t,r,s)},P:function(e){var t=encodeURIComponent;this.I.push((a.Ub?t("---destpub-debug---"):t("---destpub---"))+e)},Oa:function(e,t,n,i){e.push(t.id+"-"+(i+Math.ceil(t.ttl/60/24))),this.Bb(e),a.e(n,e.join("*"))},Ma:function(){var e,t=this;this.I.length?(e=this.I.shift(),a.ra.postMessage(e,this.url,this.Fa.contentWindow),this.Cb.push(e),setTimeout(function(){t.Ma()},this.Ha)):this.Y=k},X:function(e){var t=/^---destpub-to-parent---/;"string"==typeof e&&t.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(t,"").split("|"))[0]&&(this.ta="true"===t[1]?i:k,this.Ka=i,this.q()),this.Db.push(e))},Ib:function(e){(this.url===j||e.subdomain&&"nosubdomainreturned"===this.g)&&(this.g="string"==typeof a.qa&&a.qa.length?a.qa:e.subdomain||"",this.url=this.ub()),e.ibs instanceof Array&&e.ibs.length&&(this.ya=i),this.Ja()&&(a.idSyncAttachIframeOnWindowLoad?(l.aa||"complete"===v.readyState||"loaded"===v.readyState)&&this.Q():this.kb()),"function"==typeof a.idSyncIDCallResult?a.idSyncIDCallResult(e):this.q(e),"function"==typeof a.idSyncAfterIDCallResult&&a.idSyncAfterIDCallResult(e)},lb:function(e,t){return a.Vb||!e||t-e>n.Ra},kb:function(){function e(){t.Z||(document.body?t.Q():setTimeout(e,30))}var t=this;e()}};a.Sb=z,a.timeoutMetricsLog=[];var p={ob:window.performance&&window.performance.timing?1:0,Ia:window.performance&&window.performance.timing?window.performance.timing:j,$:j,R:j,d:{},V:[],send:function(e){if(a.takeTimeoutMetrics&&e===Object(e)){var t,n=[],i=encodeURIComponent;for(t in e)e.hasOwnProperty(t)&&n.push(i(t)+"="+i(e[t]));e="http"+(a.loadSSL?"s":"")+"://dpm.demdex.net/event?d_visid_ver="+a.version+"&d_visid_stg_timeout="+a.loadTimeout+"&"+n.join("&")+"&d_orgid="+i(a.marketingCloudOrgID)+"&d_timingapi="+this.ob+"&d_winload="+this.vb()+"&d_ld="+this.p(),(new Image).src=e,a.timeoutMetricsLog.push(e)}},vb:function(){return this.R===j&&(this.R=this.Ia?this.$-this.Ia.navigationStart:this.$-l.nb),this.R},p:function(){return(new Date).getTime()},J:function(e){var t=this.d[e],a={};a.d_visid_stg_timeout_captured=t.xa,a.d_visid_cors=t.wa,a.d_fieldgroup=e,a.d_settimeout_overriden=t.va,t.timeout?t.xb?(a.d_visid_timedout=1,a.d_visid_timeout=t.timeout-t.requestStart,a.d_visid_response=-1):(a.d_visid_timedout="n/a",a.d_visid_timeout="n/a",a.d_visid_response="n/a"):(a.d_visid_timedout=0,a.d_visid_timeout=-1,a.d_visid_response=t.Nb-t.requestStart),a.d_visid_url=t.url,l.aa?this.send(a):this.V.push(a),delete this.d[e]},Lb:function(){for(var e=0,t=this.V.length;e<t;e++)this.send(this.V[e])},Ca:function(){return"function"==typeof setTimeout.toString?-1<setTimeout.toString().indexOf("[native code]")?0:1:-1}};a.Zb=p;var y={isClientSideMarketingCloudVisitorID:j,MCIDCallTimedOut:j,AnalyticsIDCallTimedOut:j,AAMIDCallTimedOut:j,d:{},Na:function(e,t){switch(e){case H:t===k?this.MCIDCallTimedOut!==i&&(this.MCIDCallTimedOut=k):this.MCIDCallTimedOut=t;break;case E:t===k?this.AnalyticsIDCallTimedOut!==i&&(this.AnalyticsIDCallTimedOut=k):this.AnalyticsIDCallTimedOut=t;break;case D:t===k?this.AAMIDCallTimedOut!==i&&(this.AAMIDCallTimedOut=k):this.AAMIDCallTimedOut=t}}};a.isClientSideMarketingCloudVisitorID=function(){return y.isClientSideMarketingCloudVisitorID},a.MCIDCallTimedOut=function(){return y.MCIDCallTimedOut},a.AnalyticsIDCallTimedOut=function(){return y.AnalyticsIDCallTimedOut},a.AAMIDCallTimedOut=function(){return y.AAMIDCallTimedOut},a.idSyncGetOnPageSyncInfo=function(){return a.f(),a.a(K)},a.idSyncByURL=function(e){var t;t=(s=e||{}).minutesToLive;var n="";if(a.idSyncDisableSyncs&&(n=n||"Error: id syncs have been disabled"),"string"==typeof s.dpid&&s.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof s.url&&s.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||0>=t)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),(t={error:n,rc:t}).error)return t.error;n=e.url;var i,r=encodeURIComponent,s=z;n=n.replace(/^https:/,"").replace(/^http:/,"");return i=m.za(["",e.dpid,e.dpuuid||""],","),e=["ibs",r(e.dpid),"img",r(n),t.ttl,"",i],s.P(e.join("|")),s.q(),"Successfully queued"},a.idSyncByDataSource=function(e){return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,a.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},a._compareVersions=function(e,t){if(e===t)return 0;var a,r=e.toString().split("."),s=t.toString().split(".");e:{for(var o=0,c=(a=r.concat(s)).length;o<c;o++)if(!n.Ta.test(a[o])){a=k;break e}a=i}if(!a)return NaN;for(;r.length<s.length;)r.push("0");for(;s.length<r.length;)s.push("0");e:{for(a=0;a<r.length;a++){if((o=parseInt(r[a],10))>(c=parseInt(s[a],10))){r=1;break e}if(c>o){r=-1;break e}}r=0}return r},a._getCookieVersion=function(e){return e=e||a.cookieRead(a.cookieName),(e=n.fa.exec(e))&&1<e.length?e[1]:null},a._resetAmcvCookie=function(e){var t=a._getCookieVersion();(!t||m.zb(t,e))&&m.Mb(a.cookieName)},0>q.indexOf("@")&&(q+="@AdobeOrg"),a.marketingCloudOrgID=q,a.cookieName="AMCV_"+q,a.sessionCookieName="AMCVS_"+q,a.cookieDomain=a.Ya(),a.cookieDomain==s.location.hostname&&(a.cookieDomain=""),a.loadSSL=0<=s.location.protocol.toLowerCase().indexOf("https"),a.loadTimeout=3e4,a.CORSErrors=[],a.marketingCloudServer=a.audienceManagerServer="dpm.demdex.net";var N={};if(N[A]=i,N[t]=i,w&&"object"==typeof w){for(var J in w)!Object.prototype[J]&&(a[J]=w[J]);a.idSyncContainerID=a.idSyncContainerID||0,a.resetBeforeVersion&&a._resetAmcvCookie(a.resetBeforeVersion),a.ga(),a.ha(),a.f(),J=a.a(L);var O=Math.ceil((new Date).getTime()/n.ea);!a.idSyncDisableSyncs&&z.lb(J,O)&&(a.j(t,-1),a.e(L,O)),a.getMarketingCloudVisitorID(),a.getAudienceManagerLocationHint(),a.getAudienceManagerBlob(),a.cb(a.serverState)}else a.ga(),a.ha();if(!a.idSyncDisableSyncs){z.mb(),m.O(window,"load",function(){l.aa=i,p.$=p.p(),p.Lb();var e=z;e.Ja()&&e.Q()});try{a.ra.X(function(e){z.X(e.data)},z.S)}catch(P){}}}Visitor.getInstance=function(e,t){var a,n,i=window.s_c_il;if(0>e.indexOf("@")&&(e+="@AdobeOrg"),i)for(n=0;n<i.length;n++)if((a=i[n])&&"Visitor"==a._c&&a.marketingCloudOrgID==e)return a;return new Visitor(e,t)},function(){function e(){t.aa=a}var t=window.Visitor,a=t.Va,n=t.Sa;a||(a=!0),n||(n=!1),window.addEventListener?window.addEventListener("load",e):window.attachEvent&&window.attachEvent("onload",e),t.nb=(new Date).getTime()}(),
// All code and conventions are protected by copyright
function(e,t,a){function n(){V.addEventHandler(e,"orientationchange",n.orientationChange)}function r(t){t=t||V.rules,this.rules=V.filter(t,function(e){return"inview"===e.event}),this.elements=[],this.eventHandler=V.bind(this.track,this),V.addEventHandler(e,"scroll",this.eventHandler),V.addEventHandler(e,"load",this.eventHandler)}function o(){this.rules=V.filter(V.rules,function(e){return"videoplayed"===e.event.substring(0,11)}),this.eventHandler=V.bind(this.onUpdateTime,this)}function c(){V.getToolsByType("nielsen").length>0&&V.domReady(V.bind(this.initialize,this))}function l(e){this.delay=250,this.FB=e,V.domReady(V.bind(function(){V.poll(V.bind(this.initialize,this),this.delay,8)},this))}function u(){this.defineEvents(),this.visibilityApiHasPriority=!0,t.addEventListener?this.setVisibilityApiPriority(!1):this.attachDetachOlderEventListeners(!0,t,"focusout");V.bindEvent("aftertoolinit",function(){V.fireEvent(V.visibility.isHidden()?"tabblur":"tabfocus")})}function d(){this.lastURL=V.URL(),this._fireIfURIChanged=V.bind(this.fireIfURIChanged,this),this._onPopState=V.bind(this.onPopState,this),this._onHashChange=V.bind(this.onHashChange,this),this._pushState=V.bind(this.pushState,this),this._replaceState=V.bind(this.replaceState,this),this.initialize()}function p(){var e=V.filter(V.rules,function(e){return 0===e.event.indexOf("dataelementchange")});this.dataElementsNames=V.map(e,function(e){return e.event.match(/dataelementchange\((.*)\)/i)[1]},this),this.initPolling()}function g(){this.rules=V.filter(V.rules,function(e){return"elementexists"===e.event})}function m(){var e=this.eventRegex=/^hover\(([0-9]+)\)$/,t=this.rules=[];V.each(V.rules,function(a){a.event.match(e)&&t.push([Number(a.event.match(e)[1]),a.selector])})}function f(t){V.domReady(V.bind(function(){this.twttr=t||e.twttr,this.initialize()},this))}function h(e){V.BaseTool.call(this,e),this.styleElements={},this.targetPageParamsStore={}}function v(e){V.BaseTool.call(this,e),this.defineListeners(),this.beaconMethod="plainBeacon",this.adapt=new v.DataAdapters,this.dataProvider=new v.DataProvider.Aggregate}function y(e){V.BaseTool.call(this,e),this.varBindings={},this.events=[],this.products=[],this.customSetupFuns=[]}function b(){V.BaseTool.call(this),this.asyncScriptCallbackQueue=[],this.argsForBlockingScripts=[]}function k(e){V.BaseTool.call(this,e),this.name=e.name||"Basic"}function w(e){V.BaseTool.call(this,e),this.name=e.name||"VisitorID",this.initialize()}function S(e){V.BaseTool.call(this,e)}function _(e){V.BaseTool.call(this,e)}var D,C,T,I=Object.prototype.toString,P=e._satellite&&e._satellite.override,V={initialized:!1,$data:function(e,t,n){if(e){var i="__satellite__",r=V.dataCache,s=e[i];s||(s=e[i]=V.uuid++);var o=r[s];if(o||(o=r[s]={}),n===a)return o[t];o[t]=n}},uuid:1,dataCache:{},keys:function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);return t},values:function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(e[a]);return t},isArray:Array.isArray||function(e){return"[object Array]"===I.apply(e)},isObject:function(e){return null!=e&&!V.isArray(e)&&"object"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"[object Number]"===I.apply(e)&&!V.isNaN(e)},isNaN:function(e){return e!=e},isRegex:function(e){return e instanceof RegExp},isLinkTag:function(e){return!(!e||!e.nodeName||"a"!==e.nodeName.toLowerCase())},each:function(e,t,a){for(var n=0,i=e.length;n<i;n++)t.call(a,e[n],n,e)},map:function(e,t,a){for(var n=[],i=0,r=e.length;i<r;i++)n.push(t.call(a,e[i],i,e));return n},filter:function(e,t,a){for(var n=[],i=0,r=e.length;i<r;i++){var s=e[i];t.call(a,s,i,e)&&n.push(s)}return n},any:function(e,t,a){for(var n=0,i=e.length;n<i;n++){var r=e[n];if(t.call(a,r,n,e))return!0}return!1},every:function(e,t,a){for(var n=!0,i=0,r=e.length;i<r;i++){var s=e[i];n=n&&t.call(a,s,i,e)}return n},contains:function(e,t){return-1!==V.indexOf(e,t)},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var a=e.length;a--;)if(t===e[a])return a;return-1},find:function(e,t,a){if(!e)return null;for(var n=0,i=e.length;n<i;n++){var r=e[n];if(t.call(a,r,n,e))return r}return null},textMatch:function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))},stringify:function(e,t){if(t=t||[],V.isObject(e)){if(V.contains(t,e))return"<Cycle>";t.push(e)}if(V.isArray(e))return"["+V.map(e,function(e){return V.stringify(e,t)}).join(",")+"]";if(V.isString(e))return'"'+String(e)+'"';if(V.isObject(e)){var a=[];for(var n in e)e.hasOwnProperty(n)&&a.push(n+": "+V.stringify(e[n],t));return"{"+a.join(", ")+"}"}return String(e)},trim:function(e){return null==e?null:e.trim?e.trim():e.replace(/^ */,"").replace(/ *$/,"")},bind:function(e,t){return function(){return e.apply(t,arguments)}},throttle:function(e,t){var a=null;return function(){var n=this,i=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(n,i)},t)}},domReady:function(e){function a(e){for(p=1;e=i.shift();)e()}var n,i=[],r=!1,s=t,o=s.documentElement,c=o.doScroll,l="DOMContentLoaded",u="addEventListener",d="onreadystatechange",p=/^loade|^c/.test(s.readyState);return s[u]&&s[u](l,n=function(){s.removeEventListener(l,n,r),a()},r),c&&s.attachEvent(d,n=function(){/^c/.test(s.readyState)&&(s.detachEvent(d,n),a())}),e=c?function(t){self!=top?p?t():i.push(t):function(){try{o.doScroll("left")}catch(a){return setTimeout(function(){e(t)},50)}t()}()}:function(e){p?e():i.push(e)}}(),loadScript:function(e,a){var n=t.createElement("script");V.scriptOnLoad(e,n,a),n.src=e,t.getElementsByTagName("head")[0].appendChild(n)},scriptOnLoad:function(e,t,a){function n(e){e&&V.logError(e),a&&a(e)}"onload"in t?(t.onload=function(){n()},t.onerror=function(){n(new Error("Failed to load script "+e))}):"readyState"in t&&(t.onreadystatechange=function(){var e=t.readyState;"loaded"!==e&&"complete"!==e||(t.onreadystatechange=null,n())})},loadScriptOnce:function(e,t){V.loadedScriptRegistry[e]||V.loadScript(e,function(a){a||(V.loadedScriptRegistry[e]=!0),t&&t(a)})},loadedScriptRegistry:{},loadScriptSync:function(e){t.write?V.domReadyFired?V.notify('Cannot load sync the "'+e+'" script after DOM Ready.',1):(e.indexOf('"')>-1&&(e=encodeURI(e)),t.write('<script src="'+e+'"></script>')):V.notify('Cannot load sync the "'+e+'" script because "document.write" is not available',1)},pushAsyncScript:function(e){V.tools["default"].pushAsyncScript(e)},pushBlockingScript:function(e){V.tools["default"].pushBlockingScript(e)},addEventHandler:e.addEventListener?function(e,t,a){e.addEventListener(t,a,!1)}:function(e,t,a){e.attachEvent("on"+t,a)},removeEventHandler:e.removeEventListener?function(e,t,a){e.removeEventListener(t,a,!1)}:function(e,t,a){e.detachEvent("on"+t,a)},preventDefault:e.addEventListener?function(e){e.preventDefault()}:function(e){e.returnValue=!1},stopPropagation:function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},containsElement:function(e,t){return e.contains?e.contains(t):!!(16&e.compareDocumentPosition(t))},matchesCss:function(a){function n(e,t){var a=t.tagName;return!!a&&e.toLowerCase()===a.toLowerCase()}var i=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector||a.msMatchesSelector;return i?function(a,n){if(n===t||n===e)return!1;try{return i.call(n,a)}catch(r){return!1}}:a.querySelectorAll?function(e,t){if(!t.parentNode)return!1;if(e.match(/^[a-z]+$/i))return n(e,t);try{for(var a=t.parentNode.querySelectorAll(e),i=a.length;i--;)if(a[i]===t)return!0}catch(r){}return!1}:function(e,t){if(e.match(/^[a-z]+$/i))return n(e,t);try{return V.Sizzle.matches(e,[t]).length>0}catch(a){return!1}}}(t.documentElement),cssQuery:(D=t,D.querySelectorAll?function(e,t){var a;try{a=D.querySelectorAll(e)}catch(n){a=[]}t(a)}:function(e,t){if(V.Sizzle){var a;try{a=V.Sizzle(e)}catch(n){a=[]}t(a)}else V.sizzleQueue.push([e,t])}),hasAttr:function(e,t){return e.hasAttribute?e.hasAttribute(t):e[t]!==a},inherit:function(e,t){var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e},extend:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},toArray:function(){try{var e=Array.prototype.slice;return e.call(t.documentElement.childNodes,0)[0].nodeType,function(t){return e.call(t,0)}}catch(a){return function(e){for(var t=[],a=0,n=e.length;a<n;a++)t.push(e[a]);return t}}}(),equalsIgnoreCase:function(e,t){return null==e?null==t:null!=t&&String(e).toLowerCase()===String(t).toLowerCase()},poll:function(e,t,a){function n(){V.isNumber(a)&&i++>=a||e()||setTimeout(n,t)}var i=0;t=t||1e3,n()},escapeForHtml:function(e){return e?String(e).replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}};V.availableTools={},V.availableEventEmitters=[],V.fireOnceEvents=["condition","elementexists"],V.initEventEmitters=function(){V.eventEmitters=V.map(V.availableEventEmitters,function(e){return new e})},V.eventEmitterBackgroundTasks=function(){V.each(V.eventEmitters,function(e){"backgroundTasks"in e&&e.backgroundTasks()})},V.initTools=function(e){var t={"default":new b},a=V.settings.euCookieName||"sat_track";for(var n in e)if(e.hasOwnProperty(n)){var i,r,s;if((i=e[n]).euCookie)if("true"!==V.readCookie(a))continue;if(!(r=V.availableTools[i.engine])){var o=[];for(var c in V.availableTools)V.availableTools.hasOwnProperty(c)&&o.push(c);throw new Error("No tool engine named "+i.engine+", available: "+o.join(",")+".")}(s=new r(i)).id=n,t[n]=s}return t},V.preprocessArguments=function(e,t,a,n,i){function r(e){return n&&V.isString(e)?e.toLowerCase():e}function s(e){var c={};for(var l in e)if(e.hasOwnProperty(l)){var u=e[l];V.isObject(u)?c[l]=s(u):V.isArray(u)?c[l]=o(u,n):c[l]=r(V.replace(u,t,a,i))}return c}function o(e){for(var n=[],i=0,o=e.length;i<o;i++){var c=e[i];V.isString(c)?c=r(V.replace(c,t,a)):c&&c.constructor===Object&&(c=s(c)),n.push(c)}return n}return e?o(e,n):e},V.execute=function(e,t,a,n){function i(i){var r=n[i||"default"];if(r)try{r.triggerCommand(e,t,a)}catch(s){V.logError(s)}}if(!_satellite.settings.hideActivity)if(n=n||V.tools,e.engine){var r=e.engine;for(var s in n)if(n.hasOwnProperty(s)){var o=n[s];o.settings&&o.settings.engine===r&&i(s)}}else e.tool instanceof Array?V.each(e.tool,function(e){i(e)}):i(e.tool)},V.Logger={outputEnabled:!1,messages:[],keepLimit:100,flushed:!1,LEVELS:[null,null,"log","info","warn","error"],message:function(e,t){var a=this.LEVELS[t]||"log";this.messages.push([a,e]),this.messages.length>this.keepLimit&&this.messages.shift(),this.outputEnabled&&this.echo(a,e)},getHistory:function(){return this.messages},clearHistory:function(){this.messages=[]},setOutputState:function(e){this.outputEnabled!=e&&(this.outputEnabled=e,e?this.flush():this.flushed=!1)},echo:function(t,a){e.console&&e.console[t]("SATELLITE: "+a)},flush:function(){this.flushed||(V.each(this.messages,function(e){!0!==e[2]&&(this.echo(e[0],e[1]),e[2]=!0)},this),this.flushed=!0)}},V.notify=V.bind(V.Logger.message,V.Logger),V.cleanText=function(e){return null==e?null:V.trim(e).replace(/\s+/g," ")},V.cleanText.legacy=function(e){return null==e?null:V.trim(e).replace(/\s{2,}/g," ").replace(/[^\000-\177]*/g,"")},V.text=function(e){return e.textContent||e.innerText},V.specialProperties={text:V.text,cleanText:function(e){return V.cleanText(V.text(e))}},V.getObjectProperty=function(e,t,n){for(var i,r=t.split("."),s=e,o=V.specialProperties,c=0,l=r.length;c<l;c++){if(null==s)return a;var u=r[c];if(n&&"@"===u.charAt(0))s=o[u.slice(1)](s);else if(s.getAttribute&&(i=u.match(/^getAttribute\((.+)\)$/))){var d=i[1];s=s.getAttribute(d)}else s=s[u]}return s},V.getToolsByType=function(e){if(!e)throw new Error("Tool type is missing");var t=[];for(var a in V.tools)if(V.tools.hasOwnProperty(a)){var n=V.tools[a];n.settings&&n.settings.engine===e&&t.push(n)}return t},V.setVar=function(){var e=V.data.customVars;if(null==e&&(V.data.customVars={},e=V.data.customVars),"string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])}},V.dataElementSafe=function(e,t){if(arguments.length>2){var a=arguments[2];"pageview"===t?V.dataElementSafe.pageviewCache[e]=a:"session"===t?V.setCookie("_sdsat_"+e,a):"visitor"===t&&V.setCookie("_sdsat_"+e,a,730)}else{if("pageview"===t)return V.dataElementSafe.pageviewCache[e];if("session"===t||"visitor"===t)return V.readCookie("_sdsat_"+e)}},V.dataElementSafe.pageviewCache={},V.realGetDataElement=function(t){var a;return t.selector?V.hasSelector&&V.cssQuery(t.selector,function(e){if(e.length>0){var n=e[0];"text"===t.property?a=n.innerText||n.textContent:t.property in n?a=n[t.property]:V.hasAttr(n,t.property)&&(a=n.getAttribute(t.property))}}):t.queryParam?a=t.ignoreCase?V.getQueryParamCaseInsensitive(t.queryParam):V.getQueryParam(t.queryParam):t.cookie?a=V.readCookie(t.cookie):t.jsVariable?a=V.getObjectProperty(e,t.jsVariable):t.customJS?a=t.customJS():t.contextHub&&(a=t.contextHub()),V.isString(a)&&t.cleanText&&(a=V.cleanText(a)),a},V.getDataElement=function(e,t,n){if(null==(n=n||V.dataElements[e]))return V.settings.undefinedVarsReturnEmpty?"":null;var i=V.realGetDataElement(n);return i===a&&n.storeLength?i=V.dataElementSafe(e,n.storeLength):i!==a&&n.storeLength&&V.dataElementSafe(e,n.storeLength,i),i||t||(i=n["default"]||""),V.isString(i)&&n.forceLowerCase&&(i=i.toLowerCase()),i},V.getVar=function(n,i,r){var s,o,c=V.data.customVars,l=r?r.target||r.srcElement:null,u={uri:V.URI(),protocol:t.location.protocol,hostname:t.location.hostname};if(V.dataElements&&n in V.dataElements)return V.getDataElement(n);if((o=u[n.toLowerCase()])===a)if("this."===n.substring(0,5))n=n.slice(5),o=V.getObjectProperty(i,n,!0);else if("event."===n.substring(0,6))n=n.slice(6),o=V.getObjectProperty(r,n);else if("target."===n.substring(0,7))n=n.slice(7),o=V.getObjectProperty(l,n);else if("window."===n.substring(0,7))n=n.slice(7),o=V.getObjectProperty(e,n);else if("param."===n.substring(0,6))n=n.slice(6),o=V.getQueryParam(n);else if(s=n.match(/^rand([0-9]+)$/)){var d=Number(s[1]),p=(Math.random()*(Math.pow(10,d)-1)).toFixed(0);o=Array(d-p.length+1).join("0")+p}else o=V.getObjectProperty(c,n);return o},V.getVars=function(e,t,a){var n={};return V.each(e,function(e){n[e]=V.getVar(e,t,a)}),n},V.replace=function(e,t,a,n){return"string"!=typeof e?e:e.replace(/%(.*?)%/g,function(e,i){var r=V.getVar(i,t,a);return null==r?V.settings.undefinedVarsReturnEmpty?"":e:n?V.escapeForHtml(r):r})},V.escapeHtmlParams=function(e){return e.escapeHtml=!0,e},V.searchVariables=function(e,t,a){if(!e||0===e.length)return"";for(var n=[],i=0,r=e.length;i<r;i++){var s=e[i],o=V.getVar(s,t,a);n.push(s+"="+escape(o))}return"?"+n.join("&")},V.fireRule=function(e,t,a){var n=e.trigger;if(n){for(var i=0,r=n.length;i<r;i++){var s=n[i];V.execute(s,t,a)}V.contains(V.fireOnceEvents,e.event)&&(e.expired=!0)}},V.isLinked=function(e){for(var t=e;t;t=t.parentNode)if(V.isLinkTag(t))return!0;return!1},V.firePageLoadEvent=function(e){for(var a=t.location,n={type:e,target:a},i=V.pageLoadRules,r=V.evtHandlers[n.type],s=i.length;s--;){var o=i[s];V.ruleMatches(o,n,a)&&(V.notify('Rule "'+o.name+'" fired.',1),V.fireRule(o,a,n))}for(var c in V.tools)if(V.tools.hasOwnProperty(c)){var l=V.tools[c];l.endPLPhase&&l.endPLPhase(e)}r&&V.each(r,function(e){e(n)})},V.track=function(e){e=e.replace(/^\s*/,"").replace(/\s*$/,"");for(var t=0;t<V.directCallRules.length;t++){var a=V.directCallRules[t];if(a.name===e)return V.notify('Direct call Rule "'+e+'" fired.',1),void V.fireRule(a,location,{type:e})}V.notify('Direct call Rule "'+e+'" not found.',1)},V.basePath=function(){return V.data.host?("https:"===t.location.protocol?"https://"+V.data.host.https:"http://"+V.data.host.http)+"/":this.settings.basePath},V.setLocation=function(t){e.location=t},V.parseQueryParams=function(e){var t=function(e){var t=e;try{t=decodeURIComponent(e)}catch(a){}return t};if(""===e||!1===V.isString(e))return{};0===e.indexOf("?")&&(e=e.substring(1));var a={},n=e.split("&");return V.each(n,function(e){(e=e.split("="))[1]&&(a[t(e[0])]=t(e[1]))}),a},V.getCaseSensitivityQueryParamsMap=function(e){var t=V.parseQueryParams(e),a={};for(var n in t)t.hasOwnProperty(n)&&(a[n.toLowerCase()]=t[n]);return{normal:t,caseInsensitive:a}},V.updateQueryParams=function(){V.QueryParams=V.getCaseSensitivityQueryParamsMap(e.location.search)},V.updateQueryParams(),V.getQueryParam=function(e){return V.QueryParams.normal[e]},V.getQueryParamCaseInsensitive=function(e){return V.QueryParams.caseInsensitive[e.toLowerCase()]},V.encodeObjectToURI=function(e){if(!1===V.isObject(e))return"";var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},V.readCookie=function(e){for(var n=e+"=",i=t.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(n))return s.substring(n.length,s.length)}return a},V.setCookie=function(e,a,n){var i;if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()}else i="";t.cookie=e+"="+a+i+"; path=/"},V.removeCookie=function(e){V.setCookie(e,"",-1)},V.getElementProperty=function(e,t){if("@"===t.charAt(0)){var n=V.specialProperties[t.substring(1)];if(n)return n(e)}return"innerText"===t?V.text(e):t in e?e[t]:e.getAttribute?e.getAttribute(t):a},V.propertiesMatch=function(e,t){if(e)for(var a in e)if(e.hasOwnProperty(a)){var n=e[a],i=V.getElementProperty(t,a);if("string"==typeof n&&n!==i)return!1;if(n instanceof RegExp&&!n.test(i))return!1}return!0},V.isRightClick=function(e){var t;return e.which?t=3==e.which:e.button&&(t=2==e.button),t},V.ruleMatches=function(e,t,a,n){var i=e.condition,r=e.conditions,s=e.property,o=t.type,c=e.value,l=t.target||t.srcElement,u=a===l;if(e.event!==o&&("custom"!==e.event||e.customEvent!==o))return!1;if(!V.ruleInScope(e))return!1;if("click"===e.event&&V.isRightClick(t))return!1;if(e.isDefault&&n>0)return!1;if(e.expired)return!1;if("inview"===o&&t.inviewDelay!==e.inviewDelay)return!1;if(!u&&(!1===e.bubbleFireIfParent||0!==n&&!1===e.bubbleFireIfChildFired))return!1;if(e.selector&&!V.matchesCss(e.selector,a))return!1;if(!V.propertiesMatch(s,a))return!1;if(null!=c)if("string"==typeof c){if(c!==a.value)return!1}else if(!c.test(a.value))return!1;if(i)try{if(!i.call(a,t,l))return V.notify('Condition for rule "'+e.name+'" not met.',1),!1}catch(p){return V.notify('Condition for rule "'+e.name+'" not met. Error: '+p.message,1),!1}if(r){var d=V.find(r,function(n){try{return!n.call(a,t,l)}catch(p){return V.notify('Condition for rule "'+e.name+'" not met. Error: '+p.message,1),!0}});if(d)return V.notify("Condition "+d.toString()+' for rule "'+e.name+'" not met.',1),!1}return!0},V.evtHandlers={},V.bindEvent=function(e,t){var a=V.evtHandlers;a[e]||(a[e]=[]),a[e].push(t)},V.whenEvent=V.bindEvent,V.unbindEvent=function(e,t){var a=V.evtHandlers;if(a[e]){var n=V.indexOf(a[e],t);a[e].splice(n,1)}},V.bindEventOnce=function(e,t){var a=function(){V.unbindEvent(e,a),t.apply(null,arguments)};V.bindEvent(e,a)},V.isVMLPoisoned=function(e){if(!e)return!1;try{e.nodeName}catch(t){if("Attribute only valid on v:image"===t.message)return!0}return!1},V.handleEvent=function(e){if(!V.$data(e,"eventProcessed")){var t=e.type.toLowerCase(),a=e.target||e.srcElement,n=0,i=V.rules,r=(V.tools,V.evtHandlers[e.type]);if(V.isVMLPoisoned(a))V.notify("detected "+t+" on poisoned VML element, skipping.",1);else{r&&V.each(r,function(t){t(e)}),a&&a.nodeName?V.notify("detected "+t+" on "+a.nodeName,1):V.notify("detected "+t,1);for(var s=a;s;s=s.parentNode){var o=!1;if(V.each(i,function(t){V.ruleMatches(t,e,s,n)&&(V.notify('Rule "'+t.name+'" fired.',1),V.fireRule(t,s,e),n++,t.bubbleStop&&(o=!0))}),o)break}V.$data(e,"eventProcessed",!0)}}},V.onEvent=t.querySelectorAll?function(e){V.handleEvent(e)}:(C=[],(T=function(e){e.selector?C.push(e):V.handleEvent(e)}).pendingEvents=C,T),V.fireEvent=function(e,t){V.onEvent({type:e,target:t})},V.registerEvents=function(e,t){for(var a=t.length-1;a>=0;a--){var n=t[a];V.$data(e,n+".tracked")||(V.addEventHandler(e,n,V.onEvent),V.$data(e,n+".tracked",!0))}},V.registerEventsForTags=function(e,a){for(var n=e.length-1;n>=0;n--)for(var i=e[n],r=t.getElementsByTagName(i),s=r.length-1;s>=0;s--)V.registerEvents(r[s],a)},V.setListeners=function(){var e=["click","submit"];V.each(V.rules,function(t){"custom"===t.event&&t.hasOwnProperty("customEvent")&&!V.contains(e,t.customEvent)&&e.push(t.customEvent)}),V.registerEvents(t,e)},V.getUniqueRuleEvents=function(){return V._uniqueRuleEvents||(V._uniqueRuleEvents=[],V.each(V.rules,function(e){-1===V.indexOf(V._uniqueRuleEvents,e.event)&&V._uniqueRuleEvents.push(e.event)})),V._uniqueRuleEvents},V.setFormListeners=function(){if(!V._relevantFormEvents){var e=["change","focus","blur","keypress"];V._relevantFormEvents=V.filter(V.getUniqueRuleEvents(),function(t){return-1!==V.indexOf(e,t)})}V._relevantFormEvents.length&&V.registerEventsForTags(["input","select","textarea","button"],V._relevantFormEvents)},V.setVideoListeners=function(){if(!V._relevantVideoEvents){var e=["play","pause","ended","volumechange","stalled","loadeddata"];V._relevantVideoEvents=V.filter(V.getUniqueRuleEvents(),function(t){return-1!==V.indexOf(e,t)})}V._relevantVideoEvents.length&&V.registerEventsForTags(["video"],V._relevantVideoEvents)},V.readStoredSetting=function(t){try{return t="sdsat_"+t,e.localStorage.getItem(t)}catch(a){return V.notify("Cannot read stored setting from localStorage: "+a.message,2),null}},V.loadStoredSettings=function(){var e=V.readStoredSetting("debug"),t=V.readStoredSetting("hide_activity");e&&(V.settings.notifications="true"===e),t&&(V.settings.hideActivity="true"===t)},V.isRuleActive=function(e,t){function a(e,t){return t=i(t,{hour:e[g](),minute:e[m]()}),Math.floor(Math.abs((e.getTime()-t.getTime())/864e5))}function n(e,t){function a(e){return 12*e[d]()+e[p]()}return Math.abs(a(e)-a(t))}function i(e,t){var a=new Date(e.getTime());for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];switch(n){case"hour":a[f](i);break;case"minute":a[h](i);break;case"date":a[v](i)}}return a}function r(e,t){return 60*e[g]()+e[m]()>60*t[g]()+t[m]()}function s(e,t){return 60*e[g]()+e[m]()<60*t[g]()+t[m]()}var o=e.schedule;if(!o)return!0;var c=o.utc,l=c?"getUTCDate":"getDate",u=c?"getUTCDay":"getDay",d=c?"getUTCFullYear":"getFullYear",p=c?"getUTCMonth":"getMonth",g=c?"getUTCHours":"getHours",m=c?"getUTCMinutes":"getMinutes",f=c?"setUTCHours":"setHours",h=c?"setUTCMinutes":"setMinutes",v=c?"setUTCDate":"setDate";if(t=t||new Date,o.repeat){if(r(o.start,t))return!1;if(s(o.end,t))return!1;if(t<o.start)return!1;if(o.endRepeat&&t>=o.endRepeat)return!1;if("daily"===o.repeat){if(o.repeatEvery)if(a(o.start,t)%o.repeatEvery!=0)return!1}else if("weekly"===o.repeat){if(o.days){if(!V.contains(o.days,t[u]()))return!1}else if(o.start[u]()!==t[u]())return!1;if(o.repeatEvery)if(a(o.start,t)%(7*o.repeatEvery)!=0)return!1}else if("monthly"===o.repeat){if(o.repeatEvery)if(n(o.start,t)%o.repeatEvery!=0)return!1;if(o.nthWeek&&o.mthDay){if(o.mthDay!==t[u]())return!1;var y=Math.floor((t[l]()-t[u]()+1)/7);if(o.nthWeek!==y)return!1}else if(o.start[l]()!==t[l]())return!1}else if("yearly"===o.repeat){if(o.start[p]()!==t[p]())return!1;if(o.start[l]()!==t[l]())return!1;if(o.repeatEvery)if(Math.abs(o.start[d]()-t[d]())%o.repeatEvery!=0)return!1}}else{if(o.start>t)return!1;if(o.end<t)return!1}return!0},V.isOutboundLink=function(e){if(!e.getAttribute("href"))return!1;var t=e.hostname,a=(e.href,e.protocol);return("http:"===a||"https:"===a)&&(!V.any(V.settings.domainList,function(e){return V.isSubdomainOf(t,e)})&&t!==location.hostname)},V.isLinkerLink=function(e){return!(!e.getAttribute||!e.getAttribute("href"))&&(V.hasMultipleDomains()&&e.hostname!=location.hostname&&!e.href.match(/^javascript/i)&&!V.isOutboundLink(e))},V.isSubdomainOf=function(e,t){if(e===t)return!0;var a=e.length-t.length;return a>0&&V.equalsIgnoreCase(e.substring(a),t)},V.getVisitorId=function(){var e=V.getToolsByType("visitor_id");return 0===e.length?null:e[0].getInstance()},V.URI=function(){var e=t.location.pathname+t.location.search;return V.settings.forceLowerCase&&(e=e.toLowerCase()),e},V.URL=function(){var e=t.location.href;return V.settings.forceLowerCase&&(e=e.toLowerCase()),e},V.filterRules=function(){function e(e){return!!V.isRuleActive(e)}V.rules=V.filter(V.rules,e),V.pageLoadRules=V.filter(V.pageLoadRules,e)},V.ruleInScope=function(e,a){function n(e,t){function a(e){return t.match(e)}var n=e.include,r=e.exclude;if(n&&i(n,t))return!0;if(r){if(V.isString(r)&&r===t)return!0;if(V.isArray(r)&&V.any(r,a))return!0;if(V.isRegex(r)&&a(r))return!0}return!1}function i(e,t){function a(e){return t.match(e)}return!(!V.isString(e)||e===t)||(!(!V.isArray(e)||V.any(e,a))||!(!V.isRegex(e)||a(e)))}a=a||t.location;var r=e.scope;if(!r)return!0;var s=r.URI,o=r.subdomains,c=r.domains,l=r.protocols,u=r.hashes;return(!s||!n(s,a.pathname+a.search))&&((!o||!n(o,a.hostname))&&((!c||!i(c,a.hostname))&&((!l||!i(l,a.protocol))&&(!u||!n(u,a.hash)))))},V.backgroundTasks=function(){new Date;V.setFormListeners(),V.setVideoListeners(),V.loadStoredSettings(),V.registerNewElementsForDynamicRules(),V.eventEmitterBackgroundTasks();new Date},V.registerNewElementsForDynamicRules=function(){function e(t,a){var n=e.cache[t];if(n)return a(n);V.cssQuery(t,function(n){e.cache[t]=n,a(n)})}e.cache={},V.each(V.dynamicRules,function(t){e(t.selector,function(e){V.each(e,function(e){var a="custom"===t.event?t.customEvent:t.event;V.$data(e,"dynamicRules.seen."+a)||(V.$data(e,"dynamicRules.seen."+a,!0),V.propertiesMatch(t.property,e)&&V.registerEvents(e,[a]))})})})},V.ensureCSSSelector=function(){t.querySelectorAll?V.hasSelector=!0:(V.loadingSizzle=!0,V.sizzleQueue=[],V.loadScript(V.basePath()+"selector.js",function(){if(V.Sizzle){var e=V.onEvent.pendingEvents;V.each(e,function(e){V.handleEvent(e)},this),V.onEvent=V.handleEvent,V.hasSelector=!0,delete V.loadingSizzle,V.each(V.sizzleQueue,function(e){V.cssQuery(e[0],e[1])}),delete V.sizzleQueue}else V.logError(new Error("Failed to load selector.js"))}))},V.errors=[],V.logError=function(e){V.errors.push(e),V.notify(e.name+" - "+e.message,5)},V.pageBottom=function(){V.initialized&&(V.pageBottomFired=!0,V.firePageLoadEvent("pagebottom"))},V.stagingLibraryOverride=function(){if("true"===V.readStoredSetting("stagingLibrary")){for(var e,a,n,i=t.getElementsByTagName("script"),r=/^(.*)satelliteLib-([a-f0-9]{40})\.js$/,s=/^(.*)satelliteLib-([a-f0-9]{40})-staging\.js$/,o=0,c=i.length;o<c&&(!(n=i[o].getAttribute("src"))||(e||(e=n.match(r)),a||(a=n.match(s)),!a));o++);if(e&&!a){var l=e[1]+"satelliteLib-"+e[2]+"-staging.js";if(t.write)t.write('<script src="'+l+'"></script>');else{var u=t.createElement("script");u.src=l,t.head.appendChild(u)}return!0}}return!1},V.checkAsyncInclude=function(){e.satellite_asyncLoad&&V.notify('You may be using the async installation of Satellite. In-page HTML and the "pagebottom" event will not work. Please update your Satellite installation for these features.',5)},V.hasMultipleDomains=function(){return!!V.settings.domainList&&V.settings.domainList.length>1},V.handleOverrides=function(){if(P)for(var e in P)P.hasOwnProperty(e)&&(V.data[e]=P[e])},V.privacyManagerParams=function(){var e={};V.extend(e,V.settings.privacyManagement);var t=[];for(var a in V.tools)if(V.tools.hasOwnProperty(a)){var n=V.tools[a],i=n.settings;if(!i)continue;"sc"===i.engine&&t.push(n)}var r=V.filter(V.map(t,function(e){return e.getTrackingServer()}),function(e){return null!=e});e.adobeAnalyticsTrackingServers=r;for(var s=["bannerText","headline","introductoryText","customCSS"],o=0;o<s.length;o++){var c=s[o],l=e[c];if(l)if("text"===l.type)e[c]=l.value;else{if("data"!==l.type)throw new Error("Invalid type: "+l.type);e[c]=V.getVar(l.value)}}return e},V.prepareLoadPrivacyManager=function(){function t(e){function t(){++r===i.length&&(a(),clearTimeout(s),e())}function a(){V.each(i,function(e){V.unbindEvent(e.id+".load",t)})}function n(){a(),e()}var i=V.filter(V.values(V.tools),function(e){return e.settings&&"sc"===e.settings.engine});if(0===i.length)return e();var r=0;V.each(i,function(e){V.bindEvent(e.id+".load",t)});var s=setTimeout(n,5e3)}V.addEventHandler(e,"load",function(){t(V.loadPrivacyManager)})},V.loadPrivacyManager=function(){var e=V.basePath()+"privacy_manager.js";V.loadScript(e,function(){var e=V.privacyManager;e.configure(V.privacyManagerParams()),e.openIfRequired()})},V.init=function(t){if(!V.stagingLibraryOverride()){V.configurationSettings=t;var n=t.tools;for(var i in delete t.tools,t)t.hasOwnProperty(i)&&(V[i]=t[i]);V.data.customVars===a&&(V.data.customVars={}),V.data.queryParams=V.QueryParams.normal,V.handleOverrides(),V.detectBrowserInfo(),V.trackVisitorInfo&&V.trackVisitorInfo(),V.loadStoredSettings(),V.Logger.setOutputState(V.settings.notifications),V.checkAsyncInclude(),V.ensureCSSSelector(),V.filterRules(),V.dynamicRules=V.filter(V.rules,function(e){return e.eventHandlerOnElement}),V.tools=V.initTools(n),V.initEventEmitters(),V.firePageLoadEvent("aftertoolinit"),V.settings.privacyManagement&&V.prepareLoadPrivacyManager(),V.hasSelector&&V.domReady(V.eventEmitterBackgroundTasks),V.setListeners(),V.domReady(function(){V.poll(function(){V.backgroundTasks()},V.settings.recheckEvery||3e3)}),V.domReady(function(){V.domReadyFired=!0,V.pageBottomFired||V.pageBottom(),V.firePageLoadEvent("domready")}),V.addEventHandler(e,"load",function(){V.firePageLoadEvent("windowload")}),V.firePageLoadEvent("pagetop"),V.initialized=!0}},V.pageLoadPhases=["aftertoolinit","pagetop","pagebottom","domready","windowload"],V.loadEventBefore=function(e,t){return V.indexOf(V.pageLoadPhases,e)<=V.indexOf(V.pageLoadPhases,t)},V.flushPendingCalls=function(e){e.pending&&(V.each(e.pending,function(t){var a=t[0],n=t[1],i=t[2],r=t[3];a in e?e[a].apply(e,[n,i].concat(r)):e.emit?e.emit(a,n,i,r):V.notify("Failed to trigger "+a+" for tool "+e.id,1)}),delete e.pending)},V.setDebug=function(t){try{e.localStorage.setItem("sdsat_debug",t)}catch(a){V.notify("Cannot set debug mode: "+a.message,2)}},V.getUserAgent=function(){return navigator.userAgent},V.detectBrowserInfo=function(){function e(e){return function(t){for(var a in e){if(e.hasOwnProperty(a))if(e[a].test(t))return a}return"Unknown"}}var t=e({"IE Edge Mobile":/Windows Phone.*Edge/,"IE Edge":/Edge/,OmniWeb:/OmniWeb/,"Opera Mini":/Opera Mini/,"Opera Mobile":/Opera Mobi/,Opera:/Opera/,Chrome:/Chrome|CriOS|CrMo/,Firefox:/Firefox|FxiOS/,"IE Mobile":/IEMobile/,IE:/MSIE|Trident/,"Mobile Safari":/Mobile(\/[0-9A-z]+)? Safari/,Safari:/Safari/}),a=e({Blackberry:/BlackBerry|BB10/,"Symbian OS":/Symbian|SymbOS/,Maemo:/Maemo/,Android:/Android/,Linux:/ Linux /,Unix:/FreeBSD|OpenBSD|CrOS/,Windows:/[\( ]Windows /,iOS:/iPhone|iPad|iPod/,MacOS:/Macintosh;/}),n=e({Nokia:/Symbian|SymbOS|Maemo/,"Windows Phone":/Windows Phone/,Blackberry:/BlackBerry|BB10/,Android:/Android/,iPad:/iPad/,iPod:/iPod/,iPhone:/iPhone/,Desktop:/.*/}),i=V.getUserAgent();V.browserInfo={browser:t(i),os:a(i),deviceType:n(i)}},V.isHttps=function(){return"https:"==t.location.protocol},V.BaseTool=function(e){this.settings=e||{},this.forceLowerCase=V.settings.forceLowerCase,"forceLowerCase"in this.settings&&(this.forceLowerCase=this.settings.forceLowerCase)},V.BaseTool.prototype={triggerCommand:function(e,t,a){var n=this.settings||{};if(this.initialize&&this.isQueueAvailable()&&this.isQueueable(e)&&a&&V.loadEventBefore(a.type,n.loadOn))this.queueCommand(e,t,a);else{var i=e.command,r=this["$"+i],s=!!r&&r.escapeHtml,o=V.preprocessArguments(e.arguments,t,a,this.forceLowerCase,s);r?r.apply(this,[t,a].concat(o)):this.$missing$?this.$missing$(i,t,a,o):V.notify("Failed to trigger "+i+" for tool "+this.id,1)}},endPLPhase:function(){},isQueueable:function(e){return"cancelToolInit"!==e.command},isQueueAvailable:function(){return!this.initialized&&!this.initializing},flushQueue:function(){this.pending&&(V.each(this.pending,function(e){this.triggerCommand.apply(this,e)},this),this.pending=[])},queueCommand:function(e,t,a){this.pending||(this.pending=[]),this.pending.push([e,t,a])},$cancelToolInit:function(){this._cancelToolInit=!0}},e._satellite=V,V.visibility={isHidden:function(){var e=this.getHiddenProperty();return!!e&&t[e]},isVisible:function(){return!this.isHidden()},getHiddenProperty:function(){var e=["webkit","moz","ms","o"];if("hidden"in t)return"hidden";for(var a=0;a<e.length;a++)if(e[a]+"Hidden"in t)return e[a]+"Hidden";return null},getVisibilityEvent:function(){var e=this.getHiddenProperty();return e?e.replace(/[H|h]idden/,"")+"visibilitychange":null}},V.ecommerce={addItem:function(){var e=[].slice.call(arguments);V.onEvent({type:"ecommerce.additem",target:e})},addTrans:function(){
var e=[].slice.call(arguments);V.data.saleData.sale={orderId:e[0],revenue:e[2]},V.onEvent({type:"ecommerce.addtrans",target:e})},trackTrans:function(){V.onEvent({type:"ecommerce.tracktrans",target:[]})}},n.orientationChange=function(t){var a=0===e.orientation?"portrait":"landscape";t.orientation=a,V.onEvent(t)},V.availableEventEmitters.push(n),r.offset=function(a){var n=null,i=null;try{var r=a.getBoundingClientRect(),s=t,o=s.documentElement,c=s.body,l=e,u=o.clientTop||c.clientTop||0,d=o.clientLeft||c.clientLeft||0,p=l.pageYOffset||o.scrollTop||c.scrollTop,g=l.pageXOffset||o.scrollLeft||c.scrollLeft;n=r.top+p-u,i=r.left+g-d}catch(m){}return{top:n,left:i}},r.getViewportHeight=function(){var a=e.innerHeight,n=t.compatMode;return n&&(a="CSS1Compat"==n?t.documentElement.clientHeight:t.body.clientHeight),a},r.getScrollTop=function(){return t.documentElement.scrollTop?t.documentElement.scrollTop:t.body.scrollTop},r.isElementInDocument=function(e){return t.body.contains(e)},r.isElementInView=function(e){if(!r.isElementInDocument(e))return!1;var t=r.getViewportHeight(),a=r.getScrollTop(),n=r.offset(e).top,i=e.offsetHeight;return null!==n&&!(a>n+i||a+t<n)},r.prototype={backgroundTasks:function(){var e=this.elements;V.each(this.rules,function(t){V.cssQuery(t.selector,function(a){var n=0;V.each(a,function(t){V.contains(e,t)||(e.push(t),n++)}),n&&V.notify(t.selector+" added "+n+" elements.",1)})}),this.track()},checkInView:function(e,t,a){var n=V.$data(e,"inview");if(r.isElementInView(e)){n||V.$data(e,"inview",!0);var i=this;this.processRules(e,function(a,n,r){if(t||!a.inviewDelay)V.$data(e,n,!0),V.onEvent({type:"inview",target:e,inviewDelay:a.inviewDelay});else if(a.inviewDelay){var s=V.$data(e,r);s||(s=setTimeout(function(){i.checkInView(e,!0,a.inviewDelay)},a.inviewDelay),V.$data(e,r,s))}},a)}else{if(!r.isElementInDocument(e)){var s=V.indexOf(this.elements,e);this.elements.splice(s,1)}n&&V.$data(e,"inview",!1),this.processRules(e,function(t,a,n){var i=V.$data(e,n);i&&clearTimeout(i)},a)}},track:function(){for(var e=this.elements.length-1;e>=0;e--)this.checkInView(this.elements[e])},processRules:function(e,t,a){var n=this.rules;a&&(n=V.filter(this.rules,function(e){return e.inviewDelay==a})),V.each(n,function(a,n){var i=a.inviewDelay?"viewed_"+a.inviewDelay:"viewed",r="inview_timeout_id_"+n;V.$data(e,i)||V.matchesCss(a.selector,e)&&t(a,i,r)})}},V.availableEventEmitters.push(r),o.prototype={backgroundTasks:function(){var e=this.eventHandler;V.each(this.rules,function(t){V.cssQuery(t.selector||"video",function(t){V.each(t,function(t){V.$data(t,"videoplayed.tracked")||(V.addEventHandler(t,"timeupdate",V.throttle(e,100)),V.$data(t,"videoplayed.tracked",!0))})})})},evalRule:function(e,t){var a=t.event,n=e.seekable,i=n.start(0),r=n.end(0),s=e.currentTime,o=t.event.match(/^videoplayed\(([0-9]+)([s%])\)$/);if(o){var c=o[2],l=Number(o[1]),u="%"===c?function(){return l<=100*(s-i)/(r-i)}:function(){return l<=s-i};!V.$data(e,a)&&u()&&(V.$data(e,a,!0),V.onEvent({type:a,target:e}))}},onUpdateTime:function(e){var t=this.rules,a=e.target;if(a.seekable&&0!==a.seekable.length)for(var n=0,i=t.length;n<i;n++)this.evalRule(a,t[n])}},V.availableEventEmitters.push(o),c.prototype={obue:!1,initialize:function(){this.attachCloseListeners()},obuePrevUnload:function(){},obuePrevBeforeUnload:function(){},newObueListener:function(){this.obue||(this.obue=!0,this.triggerBeacons())},attachCloseListeners:function(){this.prevUnload=e.onunload,this.prevBeforeUnload=e.onbeforeunload,e.onunload=V.bind(function(t){this.prevUnload&&setTimeout(V.bind(function(){this.prevUnload.call(e,t)},this),1),this.newObueListener()},this),e.onbeforeunload=V.bind(function(t){this.prevBeforeUnload&&setTimeout(V.bind(function(){this.prevBeforeUnload.call(e,t)},this),1),this.newObueListener()},this)},triggerBeacons:function(){V.fireEvent("leave",t)}},V.availableEventEmitters.push(c),l.prototype={initialize:function(){if(this.FB=this.FB||e.FB,this.FB&&this.FB.Event&&this.FB.Event.subscribe)return this.bind(),!0},bind:function(){this.FB.Event.subscribe("edge.create",function(){V.notify("tracking a facebook like",1),V.onEvent({type:"facebook.like",target:t})}),this.FB.Event.subscribe("edge.remove",function(){V.notify("tracking a facebook unlike",1),V.onEvent({type:"facebook.unlike",target:t})}),this.FB.Event.subscribe("message.send",function(){V.notify("tracking a facebook share",1),V.onEvent({type:"facebook.send",target:t})})}},V.availableEventEmitters.push(l),u.prototype={defineEvents:function(){this.oldBlurClosure=function(){V.fireEvent("tabblur",t)},this.oldFocusClosure=V.bind(function(){this.visibilityApiHasPriority?V.fireEvent("tabfocus",t):null!=V.visibility.getHiddenProperty()&&V.visibility.isHidden()||V.fireEvent("tabfocus",t)},this)},attachDetachModernEventListeners:function(e){V[0==e?"removeEventHandler":"addEventHandler"](t,V.visibility.getVisibilityEvent(),this.handleVisibilityChange)},attachDetachOlderEventListeners:function(t,a,n){var i=0==t?"removeEventHandler":"addEventHandler";V[i](a,n,this.oldBlurClosure),V[i](e,"focus",this.oldFocusClosure)},handleVisibilityChange:function(){V.visibility.isHidden()?V.fireEvent("tabblur",t):V.fireEvent("tabfocus",t)},setVisibilityApiPriority:function(t){this.visibilityApiHasPriority=t,this.attachDetachOlderEventListeners(!1,e,"blur"),this.attachDetachModernEventListeners(!1),t?null!=V.visibility.getHiddenProperty()?this.attachDetachModernEventListeners(!0):this.attachDetachOlderEventListeners(!0,e,"blur"):(this.attachDetachOlderEventListeners(!0,e,"blur"),null!=V.visibility.getHiddenProperty()&&this.attachDetachModernEventListeners(!0))},oldBlurClosure:null,oldFocusClosure:null,visibilityApiHasPriority:!0},V.availableEventEmitters.push(u),d.prototype={initialize:function(){this.setupHistoryAPI(),this.setupHashChange()},fireIfURIChanged:function(){var e=V.URL();this.lastURL!==e&&(this.fireEvent(),this.lastURL=e)},fireEvent:function(){V.updateQueryParams(),V.onEvent({type:"locationchange",target:t})},setupSPASupport:function(){this.setupHistoryAPI(),this.setupHashChange()},setupHistoryAPI:function(){var t=e.history;t&&(t.pushState&&(this.originalPushState=t.pushState,t.pushState=this._pushState),t.replaceState&&(this.originalReplaceState=t.replaceState,t.replaceState=this._replaceState)),V.addEventHandler(e,"popstate",this._onPopState)},pushState:function(){var e=this.originalPushState.apply(history,arguments);return this.onPushState(),e},replaceState:function(){var e=this.originalReplaceState.apply(history,arguments);return this.onReplaceState(),e},setupHashChange:function(){V.addEventHandler(e,"hashchange",this._onHashChange)},onReplaceState:function(){setTimeout(this._fireIfURIChanged,0)},onPushState:function(){setTimeout(this._fireIfURIChanged,0)},onPopState:function(){setTimeout(this._fireIfURIChanged,0)},onHashChange:function(){setTimeout(this._fireIfURIChanged,0)},uninitialize:function(){this.cleanUpHistoryAPI(),this.cleanUpHashChange()},cleanUpHistoryAPI:function(){history.pushState===this._pushState&&(history.pushState=this.originalPushState),history.replaceState===this._replaceState&&(history.replaceState=this.originalReplaceState),V.removeEventHandler(e,"popstate",this._onPopState)},cleanUpHashChange:function(){V.removeEventHandler(e,"hashchange",this._onHashChange)}},V.availableEventEmitters.push(d),p.prototype.getStringifiedValue=e.JSON&&e.JSON.stringify||V.stringify,p.prototype.initPolling=function(){0!==this.dataElementsNames.length&&(this.dataElementsStore=this.getDataElementsValues(),V.poll(V.bind(this.checkDataElementValues,this),1e3))},p.prototype.getDataElementsValues=function(){var e={};return V.each(this.dataElementsNames,function(t){var a=V.getVar(t);e[t]=this.getStringifiedValue(a)},this),e},p.prototype.checkDataElementValues=function(){V.each(this.dataElementsNames,V.bind(function(e){var a=this.getStringifiedValue(V.getVar(e));a!==this.dataElementsStore[e]&&(this.dataElementsStore[e]=a,V.onEvent({type:"dataelementchange("+e+")",target:t}))},this))},V.availableEventEmitters.push(p),g.prototype.backgroundTasks=function(){V.each(this.rules,function(e){V.cssQuery(e.selector,function(e){if(e.length>0){var t=e[0];if(V.$data(t,"elementexists.seen"))return;V.$data(t,"elementexists.seen",!0),V.onEvent({type:"elementexists",target:t})}})})},V.availableEventEmitters.push(g),m.prototype={backgroundTasks:function(){var e=this;V.each(this.rules,function(t){var a=t[1],n=t[0];V.cssQuery(a,function(t){V.each(t,function(t){e.trackElement(t,n)})})},this)},trackElement:function(e,t){var a=this,n=V.$data(e,"hover.delays");n?V.contains(n,t)||n.push(t):(V.addEventHandler(e,"mouseover",function(t){a.onMouseOver(t,e)}),V.addEventHandler(e,"mouseout",function(t){a.onMouseOut(t,e)}),V.$data(e,"hover.delays",[t]))},onMouseOver:function(e,t){var a=e.target||e.srcElement,n=e.relatedTarget||e.fromElement;(t===a||V.containsElement(t,a))&&!V.containsElement(t,n)&&this.onMouseEnter(t)},onMouseEnter:function(e){var t=V.$data(e,"hover.delays"),a=V.map(t,function(t){return setTimeout(function(){V.onEvent({type:"hover("+t+")",target:e})},t)});V.$data(e,"hover.delayTimers",a)},onMouseOut:function(e,t){var a=e.target||e.srcElement,n=e.relatedTarget||e.toElement;(t===a||V.containsElement(t,a))&&!V.containsElement(t,n)&&this.onMouseLeave(t)},onMouseLeave:function(e){var t=V.$data(e,"hover.delayTimers");t&&V.each(t,function(e){clearTimeout(e)})}},V.availableEventEmitters.push(m),f.prototype={initialize:function(){var e=this.twttr;e&&"function"==typeof e.ready&&e.ready(V.bind(this.bind,this))},bind:function(){this.twttr.events.bind("tweet",function(e){e&&(V.notify("tracking a tweet button",1),V.onEvent({type:"twitter.tweet",target:t}))})}},V.availableEventEmitters.push(f),V.inherit(h,V.BaseTool),V.extend(h.prototype,{name:"tnt",endPLPhase:function(e){"aftertoolinit"===e&&this.initialize()},initialize:function(){V.notify("Test & Target: Initializing",1),this.initializeTargetPageParams(),this.load()},initializeTargetPageParams:function(){e.targetPageParams&&this.updateTargetPageParams(this.parseTargetPageParamsResult(e.targetPageParams())),this.updateTargetPageParams(this.settings.pageParams),this.setTargetPageParamsFunction()},load:function(){var e=this.getMboxURL(this.settings.mboxURL);!1!==this.settings.initTool?this.settings.loadSync?(V.loadScriptSync(e),this.onScriptLoaded()):(V.loadScript(e,V.bind(this.onScriptLoaded,this)),this.initializing=!0):this.initialized=!0},getMboxURL:function(t){var a=t;return V.isObject(t)&&(a="https:"===e.location.protocol?t.https:t.http),a.match(/^https?:/)?a:V.basePath()+a},onScriptLoaded:function(){V.notify("Test & Target: loaded.",1),this.flushQueue(),this.initialized=!0,this.initializing=!1},$addMbox:function(e,t,a){var n=a.mboxGoesAround,i=n+"{visibility: hidden;}",r=this.appendStyle(i);n in this.styleElements||(this.styleElements[n]=r),this.initialized?this.$addMBoxStep2(null,null,a):this.initializing&&this.queueCommand({command:"addMBoxStep2",arguments:[a]},e,t)},$addMBoxStep2:function(a,n,i){var r=this.generateID(),s=this;V.addEventHandler(e,"load",V.bind(function(){V.cssQuery(i.mboxGoesAround,function(a){var n=a[0];if(n){var o=t.createElement("div");o.id=r,n.parentNode.replaceChild(o,n),o.appendChild(n),e.mboxDefine(r,i.mboxName);var c=[i.mboxName];i.arguments&&(c=c.concat(i.arguments)),e.mboxUpdate.apply(null,c),s.reappearWhenCallComesBack(n,r,i.timeout,i)}})},this)),this.lastMboxID=r},$addTargetPageParams:function(e,t,a){this.updateTargetPageParams(a)},generateID:function(){return"_sdsat_mbox_"+String(Math.random()).substring(2)+"_"},appendStyle:function(e){var a=t.getElementsByTagName("head")[0],n=t.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e)),a.appendChild(n),n},reappearWhenCallComesBack:function(e,t,a,n){function i(){var e=r.styleElements[n.mboxGoesAround];e&&(e.parentNode.removeChild(e),delete r.styleElements[n.mboxGoesAround])}var r=this;V.cssQuery('script[src*="omtrdc.net"]',function(e){var t=e[0];if(t){V.scriptOnLoad(t.src,t,function(){V.notify("Test & Target: request complete",1),i(),clearTimeout(n)});var n=setTimeout(function(){V.notify("Test & Target: bailing after "+a+"ms",1),i()},a)}else V.notify("Test & Target: failed to find T&T ajax call, bailing",1),i()})},updateTargetPageParams:function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[V.replace(a)]=V.replace(e[a]));V.extend(this.targetPageParamsStore,t)},getTargetPageParams:function(){return this.targetPageParamsStore},setTargetPageParamsFunction:function(){e.targetPageParams=V.bind(this.getTargetPageParams,this)},parseTargetPageParamsResult:function(e){var t=e;return V.isArray(e)&&(e=e.join("&")),V.isString(e)&&(t=V.parseQueryParams(e)),t}}),V.availableTools.tnt=h,V.inherit(v,V.BaseTool),V.extend(v.prototype,{name:"Nielsen",endPLPhase:function(e){switch(e){case"pagetop":this.initialize();break;case"pagebottom":this.enableTracking&&(this.queueCommand({command:"sendFirstBeacon",arguments:[]}),this.flushQueueWhenReady())}},defineListeners:function(){this.onTabFocus=V.bind(function(){this.notify("Tab visible, sending view beacon when ready",1),this.tabEverVisible=!0,this.flushQueueWhenReady()},this),this.onPageLeave=V.bind(function(){this.notify("isHuman? : "+this.isHuman(),1),this.isHuman()&&this.sendDurationBeacon()},this),this.onHumanDetectionChange=V.bind(function(e){this==e.target.target&&(this.human=e.target.isHuman)},this)},initialize:function(){this.initializeTracking(),this.initializeDataProviders(),this.initializeNonHumanDetection(),this.tabEverVisible=V.visibility.isVisible(),this.tabEverVisible?this.notify("Tab visible, sending view beacon when ready",1):V.bindEventOnce("tabfocus",this.onTabFocus),this.initialized=!0},initializeTracking:function(){this.initialized||(this.notify("Initializing tracking",1),this.addRemovePageLeaveEvent(this.enableTracking),this.addRemoveHumanDetectionChangeEvent(this.enableTracking),this.initialized=!0)},initializeDataProviders:function(){var e,t=this.getAnalyticsTool();this.dataProvider.register(new v.DataProvider.VisitorID(V.getVisitorId())),t?(e=new v.DataProvider.Generic("rsid",function(){return t.settings.account}),this.dataProvider.register(e)):this.notify("Missing integration with Analytics: rsid will not be sent.")},initializeNonHumanDetection:function(){V.nonhumandetection?(V.nonhumandetection.init(),this.setEnableNonHumanDetection(0!=this.settings.enableNonHumanDetection),this.settings.nonHumanDetectionDelay>0&&this.setNonHumanDetectionDelay(1e3*parseInt(this.settings.nonHumanDetectionDelay))):this.notify("NHDM is not available.")},getAnalyticsTool:function(){if(this.settings.integratesWith)return V.tools[this.settings.integratesWith]},flushQueueWhenReady:function(){this.enableTracking&&this.tabEverVisible&&V.poll(V.bind(function(){if(this.isReadyToTrack())return this.flushQueue(),!0},this),100,20)},isReadyToTrack:function(){return this.tabEverVisible&&this.dataProvider.isReady()},$setVars:function(e,t,a){for(var n in a){var i=a[n];"function"==typeof i&&(i=i()),this.settings[n]=i}this.notify("Set variables done",2),this.prepareContextData()},$setEnableTracking:function(e,t,a){this.notify("Will"+(a?"":" not")+" track time on page",1),this.enableTracking!=a&&(this.addRemovePageLeaveEvent(a),this.addRemoveHumanDetectionChangeEvent(a),this.enableTracking=a)},$sendFirstBeacon:function(){this.sendViewBeacon()},setEnableNonHumanDetection:function(e){e?V.nonhumandetection.register(this):V.nonhumandetection.unregister(this)},setNonHumanDetectionDelay:function(e){V.nonhumandetection.register(this,e)},addRemovePageLeaveEvent:function(e){this.notify((e?"Attach onto":"Detach from")+" page leave event",1),V[0==e?"unbindEvent":"bindEvent"]("leave",this.onPageLeave)},addRemoveHumanDetectionChangeEvent:function(e){this.notify((e?"Attach onto":"Detach from")+" human detection change event",1),V[0==e?"unbindEvent":"bindEvent"]("humandetection.change",this.onHumanDetectionChange)},sendViewBeacon:function(){this.notify("Tracked page view.",1),this.sendBeaconWith()},sendDurationBeacon:function(){if(V.timetracking&&"function"==typeof V.timetracking.timeOnPage&&null!=V.timetracking.timeOnPage()){this.notify("Tracked close",1),this.sendBeaconWith({timeOnPage:Math.round(V.timetracking.timeOnPage()/1e3),duration:"D",timer:"timer"});var e;for(e=0;e<this.magicConst;e++)"0"}else this.notify("Could not track close due missing time on page",5)},sendBeaconWith:function(e){this.enableTracking&&this[this.beaconMethod].call(this,this.prepareUrl(e))},plainBeacon:function(e){var t=new Image;t.src=e,t.width=1,t.height=1,t.alt=""},navigatorSendBeacon:function(e){navigator.sendBeacon(e)},prepareUrl:function(e){var t=this.settings;return V.extend(t,this.dataProvider.provide()),V.extend(t,e),this.preparePrefix(this.settings.collectionServer)+this.adapt.convertToURI(this.adapt.toNielsen(this.substituteVariables(t)))},preparePrefix:function(e){return"//"+encodeURIComponent(e)+".imrworldwide.com/cgi-bin/gn?"},substituteVariables:function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=V.replace(e[a]));return t},prepareContextData:function(){if(this.getAnalyticsTool()){var e=this.settings;e.sdkVersion=_satellite.publishDate,this.getAnalyticsTool().$setVars(null,null,{contextData:this.adapt.toAnalytics(this.substituteVariables(e))})}else this.notify("Adobe Analytics missing.")},isHuman:function(){return this.human},onTabFocus:function(){},onPageLeave:function(){},onHumanDetectionChange:function(){},notify:function(e,t){V.notify(this.logPrefix+e,t)},beaconMethod:"plainBeacon",adapt:null,enableTracking:!1,logPrefix:"Nielsen: ",tabEverVisible:!1,human:!0,magicConst:2e6}),v.DataProvider={},v.DataProvider.Generic=function(e,t){this.key=e,this.valueFn=t},V.extend(v.DataProvider.Generic.prototype,{isReady:function(){return!0},getValue:function(){return this.valueFn()},provide:function(){this.isReady()||v.prototype.notify("Not yet ready to provide value for: "+this.key,5);var e={};return e[this.key]=this.getValue(),e}}),v.DataProvider.VisitorID=function(e,t,a){this.key=t||"uuid",this.visitorInstance=e,this.visitorInstance&&(this.visitorId=e.getMarketingCloudVisitorID([this,this._visitorIdCallback])),this.fallbackProvider=a||new v.UUID},V.inherit(v.DataProvider.VisitorID,v.DataProvider.Generic),V.extend(v.DataProvider.VisitorID.prototype,{isReady:function(){return null===this.visitorInstance||!!this.visitorId},getValue:function(){return this.visitorId||this.fallbackProvider.get()},_visitorIdCallback:function(e){this.visitorId=e}}),v.DataProvider.Aggregate=function(){this.providers=[];for(var e=0;e<arguments.length;e++)this.register(arguments[e])},V.extend(v.DataProvider.Aggregate.prototype,{register:function(e){this.providers.push(e)},isReady:function(){return V.every(this.providers,function(e){return e.isReady()})},provide:function(){var e={};return V.each(this.providers,function(t){V.extend(e,t.provide())}),e}}),v.UUID=function(){},V.extend(v.UUID.prototype,{generate:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},get:function(){var e=V.readCookie(this.key("uuid"));return e||(e=this.generate(),V.setCookie(this.key("uuid"),e),e)},key:function(e){return"_dtm_nielsen_"+e}}),v.DataAdapters=function(){},V.extend(v.DataAdapters.prototype,{toNielsen:function(e){var t=(new Date).getTime(),n={c6:"vc,",c13:"asid,",c15:"apn,",c27:"cln,",c32:"segA,",c33:"segB,",c34:"segC,",c35:"adrsid,",c29:"plid,",c30:"bldv,",c40:"adbid,"},i={ci:e.clientId,c6:e.vcid,c13:e.appId,c15:e.appName,prv:1,forward:0,ad:0,cr:e.duration||"V",rt:"text",st:"dcr",prd:"dcr",r:t,at:e.timer||"view",c16:e.sdkVersion,c27:e.timeOnPage||0,c40:e.uuid,c35:e.rsid,ti:t,sup:0,c32:e.segmentA,c33:e.segmentB,c34:e.segmentC,asn:e.assetName,c29:e.playerID,c30:e.buildVersion};for(key in i)if(i[key]!==a&&null!=i[key]&&i[key]!==a&&null!=i&&""!=i){var r=encodeURIComponent(i[key]);n.hasOwnProperty(key)&&r&&(r=n[key]+r),i[key]=r}return this.filterObject(i)},toAnalytics:function(e){return this.filterObject({"a.nielsen.clientid":e.clientId,"a.nielsen.vcid":e.vcid,"a.nielsen.appid":e.appId,"a.nielsen.appname":e.appName,"a.nielsen.accmethod":"0","a.nielsen.ctype":"text","a.nielsen.sega":e.segmentA,"a.nielsen.segb":e.segmentB,"a.nielsen.segc":e.segmentC,"a.nielsen.asset":e.assetName})},convertToURI:function(e){if(!1===V.isObject(e))return"";var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a+"="+e[a]);return t.join("&")},filterObject:function(e){for(var t in e)!e.hasOwnProperty(t)||null!=e[t]&&e[t]!==a||delete e[t];return e}}),V.availableTools.nielsen=v,V.inherit(y,V.BaseTool),V.extend(y.prototype,{name:"SC",endPLPhase:function(e){e===this.settings.loadOn&&this.initialize(e)},initialize:function(t){if(!this._cancelToolInit)if(this.settings.initVars=this.substituteVariables(this.settings.initVars,{type:t}),!1!==this.settings.initTool){var a=this.settings.sCodeURL||V.basePath()+"s_code.js";"object"==typeof a&&(a="https:"===e.location.protocol?a.https:a.http),a.match(/^https?:/)||(a=V.basePath()+a),this.settings.initVars&&this.$setVars(null,null,this.settings.initVars),V.loadScript(a,V.bind(this.onSCodeLoaded,this)),this.initializing=!0}else this.initializing=!0,this.pollForSC()},getS:function(t,a){var n=a&&a.hostname||e.location.hostname,i=this.concatWithToolVarBindings(a&&a.setVars||this.varBindings),r=a&&a.addEvent||this.events,s=this.getAccount(n),o=e.s_gi;if(!o)return null;if(this.isValidSCInstance(t)||(t=null),!s&&!t)return V.notify("Adobe Analytics: tracker not initialized because account was not found",1),null;t=t||o(s);var c="D"+V.appVersion;return"undefined"!=typeof t.tagContainerMarker?t.tagContainerMarker=c:"string"==typeof t.version&&t.version.substring(t.version.length-5)!=="-"+c&&(t.version+="-"+c),t.sa&&!0!==this.settings.skipSetAccount&&!1!==this.settings.initTool&&t.sa(this.settings.account),this.applyVarBindingsOnTracker(t,i),r.length>0&&(t.events=r.join(",")),V.getVisitorId()&&(t.visitor=V.getVisitorId()),t},onSCodeLoaded:function(e){this.initialized=!0,this.initializing=!1;var t=["Adobe Analytics: loaded",e?" (manual)":"","."];V.notify(t.join(""),1),V.fireEvent(this.id+".load",this.getS()),e||(this.flushQueueExceptTrackLink(),this.sendBeacon()),this.flushQueue()},getAccount:function(t){return e.s_account?e.s_account:t&&this.settings.accountByHost&&this.settings.accountByHost[t]||this.settings.account},getTrackingServer:function(){var t=this,a=t.getS();if(a){if(a.ssl&&a.trackingServerSecure)return a.trackingServerSecure;if(a.trackingServer)return a.trackingServer}var n,i=t.getAccount(e.location.hostname);if(!i)return null;var r,s,o="",c=a&&a.dc;return(r=(n=i).indexOf(","))>=0&&(n=n.gb(0,r)),n=n.replace(/[^A-Za-z0-9]/g,""),o||(o="2o7.net"),c=c?(""+c).toLowerCase():"d1","2o7.net"==o&&("d1"==c?c="112":"d2"==c&&(c="122"),s=""),r=n+"."+c+"."+s+o},sendBeacon:function(){var t=this.getS(e[this.settings.renameS||"s"]);t?this.settings.customInit&&!1===this.settings.customInit(t)?V.notify("Adobe Analytics: custom init suppressed beacon",1):(this.settings.executeCustomPageCodeFirst&&this.applyVarBindingsOnTracker(t,this.varBindings),this.executeCustomSetupFuns(t),t.t(),this.clearVarBindings(),this.clearCustomSetup(),V.notify("Adobe Analytics: tracked page view",1)):V.notify("Adobe Analytics: page code not loaded",1)},pollForSC:function(){V.poll(V.bind(function(){if("function"==typeof e.s_gi)return this.onSCodeLoaded(!0),!0},this))},flushQueueExceptTrackLink:function(){if(this.pending){for(var e=[],t=0;t<this.pending.length;t++){var a=this.pending[t];"trackLink"===a[0].command?e.push(a):this.triggerCommand.apply(this,a)}this.pending=e}},isQueueAvailable:function(){return!this.initialized},substituteVariables:function(e,t){var a={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];a[n]=V.replace(i,location,t)}return a},$setVars:function(e,t,a){for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];"function"==typeof i&&(i=i()),this.varBindings[n]=i}V.notify("Adobe Analytics: set variables.",2)},$customSetup:function(e,t,a){this.customSetupFuns.push(function(n){a.call(e,t,n)})},isValidSCInstance:function(e){return!!e&&"function"==typeof e.t&&"function"==typeof e.tl},concatWithToolVarBindings:function(e){var t=this.settings.initVars||{};return V.map(["trackingServer","trackingServerSecure"],function(a){t[a]&&!e[a]&&(e[a]=t[a])}),e},applyVarBindingsOnTracker:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},clearVarBindings:function(){this.varBindings={}},clearCustomSetup:function(){this.customSetupFuns=[]},executeCustomSetupFuns:function(t){V.each(this.customSetupFuns,function(a){a.call(e,t)})},$trackLink:function(e,t,a){var n=(a=a||{}).type,i=a.linkName;!i&&e&&e.nodeName&&"a"===e.nodeName.toLowerCase()&&(i=e.innerHTML),i||(i="link clicked");var r=a&&a.setVars,s=a&&a.addEvent||[],o=this.getS(null,{setVars:r,addEvent:s});if(o){var c=o.linkTrackVars,l=o.linkTrackEvents,u=this.definedVarNames(r);a&&a.customSetup&&a.customSetup.call(e,t,o),s.length>0&&u.push("events"),o.products&&u.push("products"),u=this.mergeTrackLinkVars(o.linkTrackVars,u),s=this.mergeTrackLinkVars(o.linkTrackEvents,s),o.linkTrackVars=this.getCustomLinkVarsList(u);var d=V.map(s,function(e){return e.split(":")[0]});o.linkTrackEvents=this.getCustomLinkVarsList(d),o.tl(!0,n||"o",i),V.notify(["Adobe Analytics: tracked link ","using: linkTrackVars=",V.stringify(o.linkTrackVars),"; linkTrackEvents=",V.stringify(o.linkTrackEvents)].join(""),1),o.linkTrackVars=c,o.linkTrackEvents=l}else V.notify("Adobe Analytics: page code not loaded",1)},mergeTrackLinkVars:function(e,t){return e&&(t=e.split(",").concat(t)),t},getCustomLinkVarsList:function(e){var t=V.indexOf(e,"None");return t>-1&&e.length>1&&e.splice(t,1),e.join(",")},definedVarNames:function(e){e=e||this.varBindings;var t=[];for(var a in e)e.hasOwnProperty(a)&&/^(eVar[0-9]+)|(prop[0-9]+)|(hier[0-9]+)|campaign|purchaseID|channel|server|state|zip|pageType$/.test(a)&&t.push(a);return t},$trackPageView:function(e,t,a){var n=a&&a.setVars,i=a&&a.addEvent||[],r=this.getS(null,{setVars:n,addEvent:i});r?(r.linkTrackVars="",r.linkTrackEvents="",this.executeCustomSetupFuns(r),a&&a.customSetup&&a.customSetup.call(e,t,r),r.t(),this.clearVarBindings(),this.clearCustomSetup(),V.notify("Adobe Analytics: tracked page view",1)):V.notify("Adobe Analytics: page code not loaded",1)},$postTransaction:function(t,a,n){var i=V.data.transaction=e[n],r=this.varBindings,s=this.settings.fieldVarMapping;if(V.each(i.items,function(e){this.products.push(e)},this),r.products=V.map(this.products,function(e){var t=[];if(s&&s.item)for(var a in s.item)if(s.item.hasOwnProperty(a)){var n=s.item[a];t.push(n+"="+e[a]),"event"===n.substring(0,5)&&this.events.push(n)}var i=["",e.product,e.quantity,e.unitPrice*e.quantity];return t.length>0&&i.push(t.join("|")),i.join(";")},this).join(","),s&&s.transaction){var o=[];for(var c in s.transaction)if(s.transaction.hasOwnProperty(c)){n=s.transaction[c];o.push(n+"="+i[c]),"event"===n.substring(0,5)&&this.events.push(n)}r.products.length>0&&(r.products+=","),r.products+=";;;;"+o.join("|")}},$addEvent:function(){for(var e=2,t=arguments.length;e<t;e++)this.events.push(arguments[e])},$addProduct:function(){for(var e=2,t=arguments.length;e<t;e++)this.products.push(arguments[e])}}),V.availableTools.sc=y,V.inherit(b,V.BaseTool),V.extend(b.prototype,{name:"Default",$loadIframe:function(t,a,n){var i=n.pages,r=n.loadOn,s=V.bind(function(){V.each(i,function(e){this.loadIframe(t,a,e)},this)},this);r||s(),"domready"===r&&V.domReady(s),"load"===r&&V.addEventHandler(e,"load",s)},loadIframe:function(e,a,n){var i=t.createElement("iframe");i.style.display="none";var r=V.data.host,s=n.data,o=this.scriptURL(n.src),c=V.searchVariables(s,e,a);r&&(o=V.basePath()+o),o+=c,i.src=o;var l=t.getElementsByTagName("body")[0];l?l.appendChild(i):V.domReady(function(){t.getElementsByTagName("body")[0].appendChild(i)})},scriptURL:function(e){return(V.settings.scriptDir||"")+e},$loadScript:function(t,a,n){var i=n.scripts,r=n.sequential,s=n.loadOn,o=V.bind(function(){r?this.loadScripts(t,a,i):V.each(i,function(e){this.loadScripts(t,a,[e])},this)},this);s?"domready"===s?V.domReady(o):"load"===s&&V.addEventHandler(e,"load",o):o()},loadScripts:function(e,t,a){function n(){r.length>0&&i&&r.shift().call(e,t,s);var c=a.shift();if(c){var l=V.data.host,u=o.scriptURL(c.src);l&&(u=V.basePath()+u),i=c,V.loadScript(u,n)}}try{a=a.slice(0);var i,r=this.asyncScriptCallbackQueue,s=t.target||t.srcElement,o=this}catch(c){console.error("scripts is",V.stringify(a))}n()},$loadBlockingScript:function(e,t,a){var n=a.scripts;a.loadOn;V.bind(function(){V.each(n,function(a){this.loadBlockingScript(e,t,a)},this)},this)()},loadBlockingScript:function(e,t,a){var n=this.scriptURL(a.src),i=V.data.host,r=t.target||t.srcElement;i&&(n=V.basePath()+n),this.argsForBlockingScripts.push([e,t,r]),V.loadScriptSync(n)},pushAsyncScript:function(e){this.asyncScriptCallbackQueue.push(e)},pushBlockingScript:function(e){var t=this.argsForBlockingScripts.shift(),a=t[0];e.apply(a,t.slice(1))},$writeHTML:V.escapeHtmlParams(function(e,a){if(!V.domReadyFired&&t.write)if("pagebottom"===a.type||"pagetop"===a.type)for(var n=2,i=arguments.length;n<i;n++){var r=arguments[n].html;r=V.replace(r,e,a),t.write(r)}else V.notify("You can only use writeHTML on the `pagetop` and `pagebottom` events.",1);else V.notify("Command writeHTML failed. You should try appending HTML using the async option.",1)}),linkNeedsDelayActivate:function(t,a){a=a||e;var n=t.tagName,i=t.getAttribute("target"),r=t.getAttribute("href");return(!n||"a"===n.toLowerCase())&&(!!r&&(!i||"_blank"!==i&&("_top"===i?a.top===a:"_parent"!==i&&("_self"===i||(!a.name||i===a.name)))))},$delayActivateLink:function(e,t){if(this.linkNeedsDelayActivate(e)){V.preventDefault(t);var a=V.settings.linkDelay||100;setTimeout(function(){V.setLocation(e.href)},a)}},isQueueable:function(e){return"writeHTML"!==e.command}}),V.availableTools["default"]=b,V.inherit(k,V.BaseTool),V.extend(k.prototype,{initialize:function(){var e=this.settings;if(!1!==this.settings.initTool){var t=e.url;t="string"==typeof t?V.basePath()+t:V.isHttps()?t.https:t.http,V.loadScript(t,V.bind(this.onLoad,this)),this.initializing=!0}else this.initialized=!0},isQueueAvailable:function(){return!this.initialized},onLoad:function(){this.initialized=!0,this.initializing=!1,this.settings.initialBeacon&&this.settings.initialBeacon(),this.flushQueue()},endPLPhase:function(e){e===this.settings.loadOn&&(V.notify(this.name+": Initializing at "+e,1),this.initialize())},$fire:function(e,t,a){this.initializing?this.queueCommand({command:"fire",arguments:[a]},e,t):a.call(this.settings,e,t)}}),V.availableTools.am=k,V.availableTools.adlens=k,V.availableTools.aem=k,V.availableTools.__basic=k,V.extend(w.prototype,{getInstance:function(){return this.instance},initialize:function(){var e,t=this.settings;V.notify("Visitor ID: Initializing tool",1),null!==(e=this.createInstance(t.mcOrgId,t.initVars))&&(t.customerIDs&&this.applyCustomerIDs(e,t.customerIDs),t.autoRequest&&e.getMarketingCloudVisitorID(),this.instance=e)},createInstance:function(e,t){if(!V.isString(e))return V.notify('Visitor ID: Cannot create instance using mcOrgId: "'+e+'"',4),null;e=V.replace(e),V.notify('Visitor ID: Create instance using mcOrgId: "'+e+'"',1),t=this.parseValues(t);var a=Visitor.getInstance(e,t);return V.notify("Visitor ID: Set variables: "+V.stringify(t),1),a},applyCustomerIDs:function(e,t){var a=this.parseIds(t);e.setCustomerIDs(a),V.notify("Visitor ID: Set Customer IDs: "+V.stringify(a),1)},parseValues:function(e){if(!1===V.isObject(e))return{};var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=V.replace(e[a]));return t},parseIds:function(e){var t={};if(!1===V.isObject(e))return{};for(var a in e)if(e.hasOwnProperty(a)){var n=V.replace(e[a].id);n!==e[a].id&&n&&(t[a]={},t[a].id=n,t[a].authState=Visitor.AuthState[e[a].authState])}return t}}),V.availableTools.visitor_id=w;var E={allowLinker:function(){return V.hasMultipleDomains()},cookieDomain:function(){var t=V.settings.domainList,a=V.find(t,function(t){var a=e.location.hostname;return V.equalsIgnoreCase(a.slice(a.length-t.length),t)});return a?"."+a:"auto"}};V.inherit(S,V.BaseTool),V.extend(S.prototype,{name:"GAUniversal",endPLPhase:function(e){e===this.settings.loadOn&&(V.notify("GAU: Initializing at "+e,1),this.initialize(),this.flushQueue(),this.trackInitialPageView())},getTrackerName:function(){return this.settings.trackerSettings.name||""},isPageCodeLoadSuppressed:function(){return!1===this.settings.initTool||!0===this._cancelToolInit},initialize:function(){if(this.isPageCodeLoadSuppressed())return this.initialized=!0,void V.notify("GAU: Page code not loaded (suppressed).",1);var t="ga"
;e[t]=e[t]||this.createGAObject(),e.GoogleAnalyticsObject=t,V.notify("GAU: Page code loaded.",1),V.loadScriptOnce(this.getToolUrl());var a=this.settings;(E.allowLinker()&&!1!==a.allowLinker?this.createAccountForLinker():this.createAccount(),this.executeInitCommands(),a.customInit)&&(!1===(0,a.customInit)(e[t],this.getTrackerName())&&(this.suppressInitialPageView=!0));this.initialized=!0},createGAObject:function(){var e=function(){e.q.push(arguments)};return e.q=[],e.l=1*new Date,e},createAccount:function(){this.create()},createAccountForLinker:function(){var e={};E.allowLinker()&&(e.allowLinker=!0),this.create(e),this.call("require","linker"),this.call("linker:autoLink",this.autoLinkDomains(),!1,!0)},create:function(e){var t=this.settings.trackerSettings;(t=V.preprocessArguments([t],location,null,this.forceLowerCase)[0]).trackingId=V.replace(this.settings.trackerSettings.trackingId,location),t.cookieDomain||(t.cookieDomain=E.cookieDomain()),V.extend(t,e||{}),this.call("create",t)},autoLinkDomains:function(){var e=location.hostname;return V.filter(V.settings.domainList,function(t){return t!==e})},executeInitCommands:function(){var e=this.settings;e.initCommands&&V.each(e.initCommands,function(e){var t=e.splice(2,e.length-2);e=e.concat(V.preprocessArguments(t,location,null,this.forceLowerCase)),this.call.apply(this,e)},this)},trackInitialPageView:function(){this.suppressInitialPageView||this.isPageCodeLoadSuppressed()||this.call("send","pageview")},call:function(){"function"==typeof ga?this.isCallSuppressed()||(arguments[0]=this.cmd(arguments[0]),this.log(V.toArray(arguments)),ga.apply(e,arguments)):V.notify("GA Universal function not found!",4)},isCallSuppressed:function(){return!0===this._cancelToolInit},$missing$:function(e,t,a,n){n=n||[],n=[e].concat(n),this.call.apply(this,n)},getToolUrl:function(){var e=this.settings,t=V.isHttps();return e.url?t?e.url.https:e.url.http:(t?"https://ssl":"http://www")+".google-analytics.com/analytics.js"},cmd:function(e){var t=["send","set","get"],a=this.getTrackerName();return a&&-1!==V.indexOf(t,e)?a+"."+e:e},log:function(e){var t="GA Universal: sent command "+e[0]+" to tracker "+(this.getTrackerName()||"default");if(e.length>1){V.stringify(e.slice(1));t+=" with parameters "+V.stringify(e.slice(1))}t+=".",V.notify(t,1)}}),V.availableTools.ga_universal=S,V.inherit(_,V.BaseTool),V.extend(_.prototype,{name:"GA",initialize:function(){var t=this.settings,a=e._gaq,n=t.initCommands||[],i=t.customInit;if(a||(_gaq=[]),this.isSuppressed())V.notify("GA: page code not loaded(suppressed).",1);else{if(!a&&!_.scriptLoaded){var r=V.isHttps(),s=(r?"https://ssl":"http://www")+".google-analytics.com/ga.js";t.url&&(s=r?t.url.https:t.url.http),V.loadScript(s),_.scriptLoaded=!0,V.notify("GA: page code loaded.",1)}t.domain;var o=t.trackerName,c=E.allowLinker(),l=V.replace(t.account,location);V.settings.domainList;_gaq.push([this.cmd("setAccount"),l]),c&&_gaq.push([this.cmd("setAllowLinker"),c]),_gaq.push([this.cmd("setDomainName"),E.cookieDomain()]),V.each(n,function(e){var t=[this.cmd(e[0])].concat(V.preprocessArguments(e.slice(1),location,null,this.forceLowerCase));_gaq.push(t)},this),i&&(this.suppressInitialPageView=!1===i(_gaq,o)),t.pageName&&this.$overrideInitialPageView(null,null,t.pageName)}this.initialized=!0,V.fireEvent(this.id+".configure",_gaq,o)},isSuppressed:function(){return this._cancelToolInit||!1===this.settings.initTool},tracker:function(){return this.settings.trackerName},cmd:function(e){var t=this.tracker();return t?t+"._"+e:"_"+e},$overrideInitialPageView:function(e,t,a){this.urlOverride=a},trackInitialPageView:function(){if(!this.isSuppressed()&&!this.suppressInitialPageView)if(this.urlOverride){var e=V.preprocessArguments([this.urlOverride],location,null,this.forceLowerCase);this.$missing$("trackPageview",null,null,e)}else this.$missing$("trackPageview")},endPLPhase:function(e){e===this.settings.loadOn&&(V.notify("GA: Initializing at "+e,1),this.initialize(),this.flushQueue(),this.trackInitialPageView())},call:function(e,t,a,n){if(!this._cancelToolInit){this.settings;var i=this.tracker(),r=this.cmd(e);n=n?[r].concat(n):[r];_gaq.push(n),i?V.notify("GA: sent command "+e+" to tracker "+i+(n.length>1?" with parameters ["+n.slice(1).join(", ")+"]":"")+".",1):V.notify("GA: sent command "+e+(n.length>1?" with parameters ["+n.slice(1).join(", ")+"]":"")+".",1)}},$missing$:function(e,t,a,n){this.call(e,t,a,n)},$postTransaction:function(t,a,n){var i=V.data.customVars.transaction=e[n];this.call("addTrans",t,a,[i.orderID,i.affiliation,i.total,i.tax,i.shipping,i.city,i.state,i.country]),V.each(i.items,function(e){this.call("addItem",t,a,[e.orderID,e.sku,e.product,e.category,e.unitPrice,e.quantity])},this),this.call("trackTrans",t,a)},delayLink:function(e,t){var a=this;if(E.allowLinker()&&e.hostname.match(this.settings.linkerDomains)&&!V.isSubdomainOf(e.hostname,location.hostname)){V.preventDefault(t);var n=V.settings.linkDelay||100;setTimeout(function(){a.call("link",e,t,[e.href])},n)}},popupLink:function(t,a){if(e._gat){V.preventDefault(a);var n=this.settings.account,i=e._gat._createTracker(n)._getLinkerUrl(t.href);e.open(i)}},$link:function(e,t){"_blank"===e.getAttribute("target")?this.popupLink(e,t):this.delayLink(e,t)},$trackEvent:function(e,t){var a=Array.prototype.slice.call(arguments,2);if(a.length>=4&&null!=a[3]){var n=parseInt(a[3],10);V.isNaN(n)&&(n=1),a[3]=n}this.call("trackEvent",e,t,a)}}),V.availableTools.ga=_,_satellite.init({tools:{"691a06c480ac8d5d4732ffb5be8b09ea0dd5dc62":{engine:"adlens",loadOn:"pagebottom",name:"AdLens",userID:"4586",segmentId:"41313",url:{http:"http://www.everestjs.net/static/st.v3.js",https:"https://www.everestjs.net/static/st.v3.js"}},"299407a29c92bc4467607df72602d926":{engine:"sc",loadOn:"pagebottom",account:"banglobal",euCookie:!1,sCodeURL:"a6ce917b5fc2d1d613b7b801115955bcaacab070/s-code-contents-aa676520a5f5151aca399c7c93ba3564c8b6e1bc.js",renameS:"s",initVars:{charSet:"UTF-8",server:"%serverName%",currencyCode:"USD",visitorNamespace:"barnes",trackingServer:"barnes.d2.sc.omtrdc.net",trackingServerSecure:"barnes.d2.sc.omtrdc.net",cookieDomainPeriods:"2",pageName:"%pageName%",channel:"%pageType%",trackInlineStats:!0,trackDownloadLinks:!0,linkDownloadFileTypes:"avi,css,csv,doc,docx,eps,exe,jpg,js,m4v,mov,mp3,pdf,png,ppt,pptx,rar,svg,tab,txt,vsd,vxd,wav,wma,wmv,xls,xlsx,xml,zip",trackExternalLinks:!0,linkInternalFilters:"  tel: ,barnes.com,barnesandnoble.com,bn-web.com,javascript:,mailto: ",linkLeaveQueryString:!1,dynamicVariablePrefix:"D=",hier1:"%hierarchy%"},skipSetAccount:!0,customInit:function(a){a.account="undefined"!=typeof e.BNAnalytics?e.BNAnalytics.getReportingSuiteIDs():"banglobaldev",a.currencyCode="USD",a.linkTrackVars="None",a.linkTrackEvents="None",a.charSet="UTF-8",a.linkInternalFilters="javascript:,barnes.com,bn-web.com,barnesandnoble.com",a.usePlugins=!0,a.doPlugins=function(a){a.prop1=_satellite.getVar("primaryCategory"),a.eVar1="D=c1",a.prop2=_satellite.getVar("subCategory1"),a.eVar2="D=c2",a.prop3=_satellite.getVar("subCategory2"),a.eVar3="D=c3",a.prop4=_satellite.getVar("subCategory3"),a.eVar4="D=c4",a.prop6=_satellite.getVar("pageType"),a.eVar6="D=c6",a.prop9=_satellite.getVar("geoRegion"),a.prop10=_satellite.getVar("language"),a.prop53=_satellite.getVar("breadCrumbs"),a.eVar58="D=v56",a.eVar59="D=v56",a.eVar66=_satellite.getVar("profileID");var n=e.s_getQueryStr("st")||"",i=e.s_getQueryStr("sid")||"",r=e.s_getQueryStr("2sid")||"",s=e.s_getQueryStr("sourceid")||"",o=n||i||r||s?a.getValOnce(n+"|"+i+"|"+r+"|"+s,"s_extc"):"";if(o&&(a.campaign=o,a.eVar27=n,a.eVar28=i,a.eVar29=r,a.eVar30=s,a.eVar58=a.crossVisitParticipation(a.campaign,"s_cmp1","1","5",">","purchase"),a.eVar59=a.crossVisitParticipation(a.campaign,"s_cmp14","14","5",">","purchase"),a.eVar56=a.crossVisitParticipation(a.campaign,"s_cmp","30","5",">","purchase")),a.prop11=a.getTimeParting("h","-5")+"|"+a.getTimeParting("d","-5"),a.prop11&&(a.eVar13="D=c11"),a.prop9&&a.prop10&&(a.eVar9=a.prop9+"|"+a.prop10+"|"+_satellite.getVar("sessionID")),a.prop7=a.eVar7=a.getVisitNum(),a.prop8=a.eVar8=a.getActionDepth("s_depth"),a.prop20=a.eVar20=a.getDaysSinceLastVisit("s_lv"),a.prop69=void 0!==Visitor?"VisitorAPI Present":"VisitorAPI Missing",a.prop12=a.getPlatform().device+"|"+(e.BNAnalytics.IsMobile?"mobile":"full"),a.prop12&&!a.eVar12&&(a.eVar12=a.prop12),a.prop5=a.eVar5=a.eVar66?"logged-in":"not logged-in",(a.eVar15||_satellite.getVar("req_eVar15"))&&(a.prop15=_satellite.getVar("req_eVar15")),a.prop16=e.s_getLoadTime(),a.events=a.apl(a.events,"event95="+a.prop16,",",1),"b"===s_getP("digitalData.page.category.primaryCategory")&&(a.eVar25=_satellite.getVar("hierarchy")),a.eVar66=a.eVar66||_satellite.getVar("profileID"),a.prop53=a.prop53||_satellite.getVar("breadCrumbs"),a.eVar67=_satellite.getVar("customerKey"),a.eVar68=_satellite.getVar("customerCohort"),a.prop70=a.version,a.eVar71=_satellite.getVar("pageName")+"|"+_satellite.getVar("pagePath"),a.eVar71&&(a.prop71="D=v71"),a.eVar72=_satellite.getVar("previousPageName"),a.eVar72&&(a.prop72="D=v72"),a.eVar73=_satellite.getVar("pagePath"),a.eVar73&&(a.prop73="D=v73"),a.eVar74=_satellite.getVar("referringUrl"),a.eVar74&&(a.prop74="D=v74"),a.hier1=_satellite.getVar("breadCrumbs"),a.socialPlatforms(),a.pageURL&&a.pageURL.indexOf("_requestid")>-1&&"undefined"!=typeof e.r_removeQueryParam&&(a.pageURL=e.r_removeQueryParam("_requestid",a.pageURL)),!0===e.BNAnalytics.IsMobile)switch("skava"==_satellite.getVar("platformName")?a.events=a.apl(a.events,"event82",",",1):a.events=a.apl(a.events,"event83",",",1),e.s_c_r("Mobile-seg")){case"Skava-seg":a.events=a.apl(a.events,"event80",",",1);break;case"Control-A-seg":break;case"Control-B-seg":a.events=a.apl(a.events,"event81",",",1)}var c=e.s_getQueryStr("spklr")||"";c&&(a.eVar18=c),"function"==typeof s_getQueryStr&&s_getQueryStr("browsery")&&(a.eVar24=("browsery|"+s_getQueryStr("browsery")).toLowerCase());a.getPreviousValue(a.pageURL,"gpvurl","");var l=a.getPreviousValue(a.channel,"gpvchannel",""),u=t.createElement("a");if(u.href=t.referrer,a.refDomain=u.hostname,"undefined"==typeof a.eVar24||!a.eVar24){var d=a.getPreviousValue(e.location.href,"gpv_pgURL");a.campaign?a.eVar24="external campaign referral":a.eVar11?a.eVar24=a.eVar11:"onsite search"==a.channel?a.eVar24="Internal search":"storefront"==a.channel?a.eVar24="storefront page":"category"==a.channel?a.eVar24="category page":"onsite search:results page"==a.eVar72?a.eVar24="Internal Search":"pdp"==a.channel&&"no value"!=l?a.eVar24=l:-1==a.refDomain.indexOf("barnesandnoble.com")?a.eVar24="external natural referal":a.eVar74?a.eVar24=a.eVar74:"no value"==d||""===d?a.eVar24="Catch All":"stacks:holiday gift guide"==a.channel?a.eVar24="stacks:holiday gift guide":a.eVar24=d}if("onsite search"!==_satellite.getVar("pageType")&&"category"!==_satellite.getVar("pageType")||!0===_satellite.getVar("pickupInStoreFilterIsVisible")&&(a.events=a.apl(a.events,"event155",",",1)),a.prop66=_satellite.getVar("userStoreID"),0===_satellite.getVar("pageType").indexOf("stacks:")&&0===_satellite.getVar("pageName").indexOf("campaign:stacks ")&&_satellite.getVar("productListViewMode").length>0&&(a.events=a.apl(a.events,"event90",",",2),_satellite.getVar("productListViewMode")))switch(_satellite.getVar("productListViewMode")){case"cover":a.events=a.apl(a.events,"event88",",",2);break;case"list":a.events=a.apl(a.events,"event89",",",2)}var p=a.eVar66,g=Visitor.getInstance("9A223704532965F10A490D44@AdobeOrg");void 0!==p&&"undefined"!=p&&""!=p&&g.setCustomerIDs({barnesidsync:{id:p,authState:Visitor.AuthState.AUTHENTICATED}}),a.AudienceManagement.setup({partner:"barnes",containerNSID:0,uuidCookie:{name:"aam_uuid",days:30}})},a.registerPostTrackCallback(function(){a.governor(),e.r_dtm_notify("hitGovernor Plugin Executed.")}),a.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv","var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.length;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}if(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array();if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=arry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.length-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date().getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td.getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:',',front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{delim:dl});if(ce)s.c_w(cn,'');return r;"),a.wd=e,a.pt=new Function("x","d","f","a","var s=this,t=x,z=0,y,r,l='length';while(t){y=t.indexOf(d);y=y<0?t[l]:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d[l];t=x.substring(z,x[l]);t=z<x[l]?t:''}return''"),a.getValOnce=new Function("v","c","e","t","var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?60000:86400000,k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e==0?0:a);}return v==k?'':v"),a.getQueryParam=new Function("p","d","u","var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.location);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p.length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t){t=t.indexOf('#')>-1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substring(i==p.length?i:i+1)}return v"),a.p_gpv=new Function("k","u","var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v=s.pt(q,'&','p_gvf',k)}return v"),a.p_gvf=new Function("t","k","if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'True':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s.epa(v)}return ''"),a.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),a.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),a.getValOnce=new Function("v","c","e","var s=this,k=s.c_r(c),a=new Date;e=e?e:0;if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return v==k?'':v"),a.getTimeParting=new Function("t","z","y","l","var s=this,d,A,B,C,D,W,X,Y,Z;d=new Date();A=d.getFullYear();if(A=='2011'){B='13';C='06'}if(A=='2012'){B='11';C='04'}if(A=='2013'){B='10';C='03'}if(A=='2014'){B='09';C='02'}if(A=='2015'){B='08';C='01'}if(A=='2016'){B='13';C='06'}if(A=='2017'){B='12';C='05'}if(!B||!C){B='08';C='01'}B='03/'+B+'/'+A;C='11/'+C+'/'+A;D=new Date('1/1/2000');if(D.getDay()!=6||D.getMonth()!=0){return'Data Not Available'}else{z=z?z:'0';z=parseFloat(z);B=new Date(B);C=new Date(C);W=new Date();if(W>B&&W<C&&l!='0'){z=z+1}W=W.getTime()+(W.getTimezoneOffset()*60000);W=new Date(W+(3600000*z));X=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];B=W.getHours();C=W.getMinutes();if(C<10){C='0'+C};D=W.getDay();Z=X[D];A='weekday';X='00';if(C>30){X='30'};if(D==6||D==0){A='weekend'}W=B+':'+X;if(y&&y!=Y){return'Data Not Available'}else{if(t){if(t=='h'){return W}if(t=='m'){return B+':'+C+' '}if(t=='d'){return Z}if(t=='w'){return A}if(t=='f'){return B+':'+C+' '+' - '+Z}}else{return Z+', '+W}}}"),a.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),a.getActionDepth=new Function("c","var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);if(!s.c_r(c)){v=1}if(s.c_r(c)){v=s.c_r(c);v++}if(!s.c_w(c,v,t)){s.c_w(c,v,0)}return v;"),a.getVisitNum=new Function("tp","c","c2","var s=this,e=new Date,cval,cvisit,ct=e.getTime(),d;if(!tp){tp='m';}if(tp=='m'||tp=='w'||tp=='d'){eo=s.endof(tp),y=eo.getTime();e.setTime(y);}else {d=tp*86400000;e.setTime(ct+d);}if(!c){c='s_vnum';}if(!c2){c2='s_invisit';}cval=s.c_r(c);if(cval){var i=cval.indexOf('&vn='),str=cval.substring(i+4,cval.length),k;}cvisit=s.c_r(c2);if(cvisit){if(str){e.setTime(ct+1800000);s.c_w(c2,'true',e);return str;}else {return 'unknown visit number';}}else {if(str){str++;k=cval.substring(0,i);e.setTime(k);s.c_w(c,k+'&vn='+str,e);e.setTime(ct+1800000);s.c_w(c2,'true',e);return str;}else {s.c_w(c,e.getTime()+'&vn=1',e);e.setTime(ct+1800000);s.c_w(c2,'true',e);return 1;}}"),a.dimo=new Function("m","y","var d=new Date(y,m+1,0);return d.getDate();"),a.endof=new Function("x","var t=new Date;t.setHours(0);t.setMinutes(0);t.setSeconds(0);if(x=='m'){d=s.dimo(t.getMonth(),t.getFullYear())-t.getDate()+1;}else if(x=='w'){d=7-t.getDay();}else {d=1;}t.setDate(t.getDate()+d);return t;"),a.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),a.socialPlatforms=new Function("a","var s=this,g,K,D,E,F,i;g=s.referrer?s.referrer:document.referrer;g=g.toLowerCase();K=s.split(s.socPlatList,'|');for(i=0;i<K.length;i++){D=s.split(K[i],'>');if(g.indexOf(D[0])!=-1){s.contextData['a.socialcontentprovider']=D[1];}}"),a.socPlatList="facebook.com>Facebook|twitter.com>Twitter|t.co/>Twitter|youtube.com>Youtube|clipmarks.com>Clipmarks|dailymotion.com>Dailymotion|delicious.com>Delicious|digg.com>Digg|diigo.com>Diigo|flickr.com>Flickr|flixster.com>Flixster|fotolog.com>Fotolog|friendfeed.com>FriendFeed|google.com/buzz>Google Buzz|buzz.googleapis.com>Google Buzz|plus.google.com>Google+|hulu.com>Hulu|identi.ca>identi.ca|ilike.com>iLike|intensedebate.com>IntenseDebate|myspace.com>MySpace|newsgator.com>Newsgator|photobucket.com>Photobucket|plurk.com>Plurk|slideshare.net>SlideShare|smugmug.com>SmugMug|stumbleupon.com>StumbleUpon|tumblr.com>Tumblr|vimeo.com>Vimeo|wordpress.com>WordPress|xanga.com>Xanga|metacafe.com>Metacafe|pinterest.com>Pinterest",a.socialAuthors=new Function("","var s=this,g;g=s.referrer?s.referrer:document.referrer;if(g.indexOf('http://t.co/')===0||g.indexOf('https://t.co/')===0||g.indexOf('pinterest.com/pin')!==-1||g.indexOf('tumblr.com')!==-1||g.indexOf('youtube.com')!==-1){s.Integrate.add('SocialAuthor');s.Integrate.SocialAuthor.tEvar='reserved';s.Integrate.SocialAuthor.get('//sa-services.social.omniture.com/author/name?var=[VAR]&callback=s.socialAuthorSearch&rs='+encodeURIComponent(s_account)+'&q='+encodeURIComponent(g));s.Integrate.SocialAuthor.delay();s.Integrate.SocialAuthor.setVars=function(s,p){if(p.tEvar==='reserved'){s.contextData['a.socialauthor']=s.user;}else{s[p.tEvar]=s.user;}}}"),a.socialAuthorSearch=new Function("obj","var s=this;if(typeof obj==='undefined'||typeof obj.author==='undefined'){s.user='Not Found';}else{s.user=obj.author;}s.Integrate.SocialAuthor.ready();"),a.maxDelay="3000",a.loadModule("Integrate"),a.Integrate.onLoad=function(e){e.socialAuthors()},a.getPlatforms={device:["BlackBerry","Google TV","iPad","iPhone","iPod","Kindle","Kindle Fire~(?:Cloud9|Silk-Accelerated)","Intel Mac","Mac","Nook","PlayBook","PlayStation Vita","TouchPad","Transformer","Xoom","Android","Windows CE","PC~Windows"],OS:["Android","BlackBerry","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS","Tablet OS","Linux","OS X","Macintosh","OpenBSD","Windows( [a-zA-Z0-9]+|)"],browser:["Nook Browser","Opera( Mini|)","Opera~OPR","Chrome","Chrome Mobile~(?:CriOS|CrMo)","Firefox~(?:Firefox|Minefield)","IE~MSIE","Safari"]},a.getPlatform=new Function("var s=this,w=window,P=s.getPlatforms||{},n=w.navigator||{},U='unknown',a=n.userAgent||'',s=w.screen||{},R={agent:a||U,locale:(n.language||'').toLowerCase()||U,device:U,OS:U,OSVer:U,browser:U,browserVer:U,width:s.width||0,height:s.height||0,density:Math.round(100*(w.devicePixelRatio||1))/100},p,i,m,I,j,V=function(a,m){var i=a.indexOf(m)+m.length,x=new RegExp('([/ :]+)([0-9.]+)','i').exec(a.substring(i));return x.length>2?x[2]:''};for(p in P){for(i=m=0;!m&&i<P[p].length;i++){I=P[p][i];j=I.indexOf('~')+1;m=new RegExp(I.substring(j)).exec(a);if(m){R[p]=j?I.substring(0,j-1):m[0];if(p=='browser'||p=='OS')R[p+'Ver']=V(a,m[0])}}}return R"),a.getCartOpen=new Function("c","var s=this,t=new Date,e=s.events?s.events:'',i=0;t.setTime(t.getTime()+1800000);if(s.c_r(c)||e.indexOf('scOpen')>-1){if(!s.c_w(c,1,t)){s.c_w(c,1,0)}}else{if(e.indexOf('scAdd')>-1){if(s.c_w(c,1,t)){i=1}else if(s.c_w(c,1,0)){i=1}}}if(i){e=e+',scOpen'}return e"),a.apl=new Function("L","v","d","u","var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)L=L?L+d+v:v;return L"),a.p_c=new Function("v","c","var x=v.indexOf('=');return c.toLowerCase()==v.substring(0,x<0?v.length:x).toLowerCase()?v:0"),a.p_gh=new Function("var s=this;if(!s.eo&&!s.lnk)return '';var o=s.eo?s.eo:s.lnk,y=s.ot(o),n=s.oid(o),x=o.s_oidt;if(s.eo&&o==s.eo){while(o&&!n&&y!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(!o)return '';y=s.ot(o);n=s.oid(o);x=o.s_oidt}}return o.href?o.href:'';"),a.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),a.repl=new Function("x","o","n","var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x.substring(i+o.length);i=x.indexOf(o,i+l)}return x"),a.join=new Function("v","p","var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back:'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0;x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);else str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;"),a.governor=new Function("","var s=this;if(typeof s.hl=='undefined'){s.hl=60;}if(typeof s.ht=='undefined'){s.ht=60;}if(typeof s.he=='undefined'){s.he=60;}if(s.Util.cookieRead('s_hg')==8){var i=new Date(),y=i.getFullYear(),m=i.getMonth(),d=i.getDate(),i=new Date(y,m,d+s.he);s.Util.cookieWrite('s_hg',9,i);return;}var f=s.Util.cookieRead('s_hc'),g=Number(s.Util.cookieRead('s_ht')),h=Math.floor((new Date()).getTime()),ha=f!=''?f.split('|').map(Number):[0,0,0,0,0],i=ha.reduce(function(ha,b){return ha+b;},0),j=g==0?0:Math.floor(((h-g)/(s.ht/6))/1000);if(g==0)s.Util.cookieWrite('s_ht',h);if(i<s.hl){if(j>=1){if(j>=6){ha=[0,0,0,0,0];}else{for(var k=0;k<j;k++){ha.unshift(0);ha.pop();}}s.Util.cookieWrite('s_ht',h);}}else{s.Util.cookieWrite('s_hg',8);s.linkTrackVars+=',contextData.exceptionFlag';s.contextData['exceptionFlag']='true';s.tl(this,'o','exceptionFlag');}ha[0]++;s.Util.cookieWrite('s_hc',ha.join('|'));")}},"818ae93e9ddb88d2c6e738e35919d0c384a933de":{engine:"tnt",mboxURL:"a6ce917b5fc2d1d613b7b801115955bcaacab070/mbox-contents-818ae93e9ddb88d2c6e738e35919d0c384a933de.js",loadSync:!0,pageParams:{}},a505af0b180bee22b7c061237ebe13f38ceb9c77:{engine:"visitor_id",loadOn:"pagetop",name:"VisitorID",mcOrgId:"9A223704532965F10A490D44@AdobeOrg",autoRequest:!1,initVars:{trackingServer:"barnes.d2.sc.omtrdc.net",trackingServerSecure:"barnes.d2.sc.omtrdc.net"},customerIDs:{profileID:{id:"%profileID%",authState:"UNKNOWN"}}}},pageLoadRules:[{name:"Page: Bottom: All",trigger:[{command:"writeHTML",arguments:[{html:"<script type=\"text/javascript\">\nif (r_isStagingMode() === true) {\n\n    var msg = 'Adobe Staging: ' + W[_globalObjectName].getReportingSuiteIDs();\n    if (typeof(s) !== 'undefined') {\n        msg = 'Adobe Staging: ' + s.version + ': ' + W[_globalObjectName].getReportingSuiteIDs();\n    }\n\n    var div = document.createElement('div');\n    div.style = 'bottom:0;font-weight: bold;padding: 10px;color: #333;background-color: #FF0; position: fixed; z-index: 10;font-size: 12px;font-family:cursive;';\n    div.innerHTML = msg;\n    div.setAttribute('class', 'adobe_state');\n    document.body.insertBefore(div, document.body.firstChild);\n}\n</script>"}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5ab2866c64746d01bf008515.js"}]}]}],event:"pagebottom"},{name:"Page: Bottom: Checkout",trigger:[{command:"writeHTML",arguments:[{html:"<script type=\"text/javascript\">\nif (r_isStagingMode() === true) {\n\n    var msg = 'Adobe Staging: ' + W[_globalObjectName].getReportingSuiteIDs();\n    if (typeof(s) !== 'undefined') {\n        msg = 'Adobe Staging: ' + s.version + ': ' + W[_globalObjectName].getReportingSuiteIDs();\n    }\n\n    var div = document.createElement('div');\n    div.style = 'bottom:0;font-weight: bold;padding: 10px;color: #333;background-color: #FF0; position: fixed; z-index: 10;font-size: 12px;font-family:cursive;';\n    div.innerHTML = msg;\n    div.setAttribute('class', 'adobe_state');\n    document.body.insertBefore(div, document.body.firstChild);\n}\n</script>"}]},{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5b16ce0c64746d56b40035cb.js"},{src:"satellite-5b16ce0c64746d56b40035cc.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("isCheckoutFunnel"),"true")}],event:"pagebottom"},{name:"Page: Head: All",trigger:[{command:"writeHTML",arguments:[{html:"<script type='text/javascript'>\nif (_satellite.QueryParams.normal.hConversionEventId) {\n  \t// this cookie is currently set on mail.barnesandnoble.com and passed\n  \t// on as a query params over when the user clicks on a link\n  \t// if we call the Epsilon marketing pixel without this cookie it returns a 500 error\n  \t// this used to work but for some reason after friday's code release the \n  \t// cookie is not being set anymore and that's were this comes in.\n    _satellite.setCookie('hConversionEventId', _satellite.QueryParams.normal.hConversionEventId, 30);\n}\n</script>"},{html:'<script type="text/javascript">\n// Name: Adobe TT: Suppress page-load flicker\n// Description: Helps suppress page flickering\n// Type: Sequential\n// NOTES: Seems Hung is still having flickering issues\n// Rule: (PLR) - 55febc57373734001700020a\nwindow.targetGlobalSettings = {\n    bodyHidingEnabled: true,\n    bodyHiddenStyle: "body{opacity:0}",\n    visitorPageDisplayTimeout: 2000\n};\n</script>'},{html:'<script type="text/javascript">var inHeadTS=(new Date()).getTime();</script>'},{html:'<script type="text/javascript">\n    (function () {\n        // Add Instrumentation of XHR\n        // Only for the stacks project at this time as there are concerns of too many\n        // calls if we decide to track all XHR calls\n        // backup check for giftguide just in-case pageType stops working\n        // ----------------------------------------------------------------\n        if (_satellite.getVar(\'pageType\').indexOf(\'stacks:\') === 0 || window.location.host.indexOf(\'giftguide\') === 0) {\n            window.BOOMR_config = {\n                instrument_xhr: true\n            };\n        }\n        // End - Instrumentation of XHR\n        // ----------------------------------------------------------------\n\n        if (window.BOOMR && window.BOOMR.version) {\n            return;\n        }\n        var dom, doc, where, iframe = document.createElement(\'iframe\'),\n            win = window;\n\n        function boomerangSaveLoadTime(e) {\n            win.BOOMR_onload = (e && e.timeStamp) || new Date().getTime();\n        }\n        if (win.addEventListener) {\n            win.addEventListener("load", boomerangSaveLoadTime, false);\n        } else if (win.attachEvent) {\n            win.attachEvent("onload", boomerangSaveLoadTime);\n        }\n\n        iframe.src = "javascript:false";\n        iframe.title = "";\n        iframe.role = "presentation";\n        (iframe.frameElement || iframe).style.cssText = "width:0;height:0;border:0;display:none;";\n        where = document.getElementsByTagName(\'script\')[0];\n        where.parentNode.insertBefore(iframe, where);\n\n        try {\n            doc = iframe.contentWindow.document;\n        } catch (e) {\n            dom = document.domain;\n            iframe.src = "javascript:var d=document.open();d.domain=\'" + dom + "\';void(0);";\n            doc = iframe.contentWindow.document;\n        }\n        doc.open()._l = function () {\n            var js = this.createElement("script");\n            if (dom) this.domain = dom;\n            js.id = "boomr-if-as";\n            js.src = \'//c.go-mpulse.net/boomerang/\' +\n                \'MFWAJ-N9VRV-LJGEL-8H8XB-2XEMD\';\n            BOOMR_lstart = new Date().getTime();\n            this.body.appendChild(js);\n        };\n        doc.write(\'<body onload="document._l();">\');\n        doc.close();\n\n        // Add Instrumentation of XHR\n        // ----------------------------------------------------------------\n        /**\n         * Boomerang XHR whitelist\n         */\n        function addWhitelistFilter() {\n            if (window.BOOMR &&\n                window.BOOMR.version &&\n                window.BOOMR.plugins &&\n                window.BOOMR.plugins.AutoXHR &&\n                typeof BOOMR.plugins.AutoXHR.addExcludeFilter === "function") {\n\n                // This function is called for each XHR.\n                // Return true to ignore the XHR, or false to track the XHR.\n                function whitelistFilter(url) {\n\n                    // Example of tracking \'hello/api\'\n                    if (url.href && url.href.indexOf("/skavastream/") > -1) {\n                        return false;\n                    }\n\n                    // All other URLs will be ignored\n                    return true;\n                }\n\n                // Register the filter\n                BOOMR.plugins.AutoXHR.addExcludeFilter(whitelistFilter, window, "Whitelist Filter");\n\n                return true;\n            }\n        }\n\n        // try to add the filter, waiting for Boomerang to arrive on the page if it isn\'t yet\n        if (!addWhitelistFilter()) {\n            if (document.addEventListener) {\n                document.addEventListener("onBoomerangLoaded", addWhitelistFilter);\n            } else if (document.attachEvent) {\n                document.attachEvent("onpropertychange", function (e) {\n                    e = e || window.event;\n                    if (e && e.propertyName === "onBoomerangLoaded") {\n                        addWhitelistFilter();\n                    }\n                });\n            }\n        }\n        // End - Instrumentation of XHR\n        // ----------------------------------------------------------------\n    })();\n</script>'}]},{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-59f2b3a864746d35d20076a4.js"}]}]}],event:"pagetop"},{name:"Page: OnLoad: Non-Checkout",trigger:[{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5950a23564746d6e690023de.js"},{src:"satellite-5b16c82164746d56b400359a.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("isCheckoutFunnel"),"false")}],event:"windowload"},{name:"Page: Sign-in",trigger:[{engine:"sc",command:"addEvent",arguments:["event41"]}],scope:{URI:{include:[/^\/account\/login-frame.jsp/i]}},event:"pagebottom"},{name:"Page: Textbooks",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-55c040e7326430001400005f.js"}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},event:"pagebottom"},{name:"Page: Textbooks: New Rich",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-57bb40e064746d7a9300423b.js"}]}]}],scope:{URI:{include:[/^\/h\/textbooks\/new/i]}},event:"pagetop"},{name:"Page: Textbooks: Rental",trigger:[{
command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-57bb487764746d1929003c5e.js"}]}]}],scope:{URI:{include:[/^\/h\/textbooks\/rental/i]}},event:"pagetop"},{name:"Page: Textbooks: Used Rich",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-57bb46df64746d78b2003ebb.js"}]}]}],scope:{URI:{include:[/^\/h\/textbooks\/used/i]}},event:"pagetop"},{name:"Page: Thank You: Desktop",trigger:[{command:"writeHTML",arguments:[{html:"<script type=\"text/javascript\">\nif (document.getElementsByClassName('advertisement').length > 0 && typeof(googletag) !=='undefined') {\n    // As per Gabe's instructions\n\n    // Create DOM object using JavaScript. Copy the existing DOM with ID=\"relatedAd\", but call it \"relatedAd2\".\n    var adSlotDiv2 = document.createElement('div');\n    adSlotDiv2.setAttribute('id', 'relatedAd2');\n    adSlotDiv2.setAttribute('class', 'advertising scaling-iframe-ad');\n  \tadSlotDiv2.setAttribute('style', 'margin-top:30px;');\n\n    // Create custom CSS to override the existing CSS that targets \"relatedAd2\".\n\n    // append\n    document.getElementsByClassName('advertisement')[0].appendChild(adSlotDiv2);\n\n    // create the slot\n    var adSlot2 = googletag.defineSlot('/9885823/lia.barnesandnoble/thank_you_page2', [970, 250], 'relatedAd2');\n    adSlot2.addService(googletag.pubads());\n\n    googletag.cmd.push(function() {\n        googletag.display(\"relatedAd2\");\n    });\n\n    // display\n    //googletag.display('relatedAd2');\n}\n</script>"}]}],scope:{URI:{include:[/\/checkout\/thank-you.jsp/i]}},conditions:[function(){return!BNAnalytics.IsMobile}],event:"pagebottom"},{name:"Page: Thank You: Mobile",trigger:[{command:"writeHTML",arguments:[{html:"<script type=\"text/javascript\">\n// window.r_dtm_notify('relatedAd2 Mobile');\nif (document.getElementsByClassName('advertisement').length > 0 && typeof(googletag) !=='undefined') {\n    // As per Gabe's instructions\n\n    // Create DOM object using JavaScript. Copy the existing DOM with ID=\"relatedAd\", but call it \"relatedAd2\".\n    var adSlotDiv2 = document.createElement('div');\n    adSlotDiv2.setAttribute('id', 'relatedAd2');\n    adSlotDiv2.setAttribute('class', 'advertising scaling-iframe-ad horizontal');\n  \tadSlotDiv2.setAttribute('style', 'margin-top:30px;display:block!important;');\n\n    // Create custom CSS to override the existing CSS that targets \"relatedAd2\".\n\n    // append\n    document.getElementsByClassName('advertisement')[0].appendChild(adSlotDiv2);\n\n    // create the slot\n    var adSlot2 = googletag.defineSlot('/9885823/m.web.bn/thank_you_page2', [300, 250], 'relatedAd2');\n    adSlot2.addService(googletag.pubads());\n\n    googletag.cmd.push(function() {\n        googletag.display(\"relatedAd2\");\n    });\n\n    // display\n    //googletag.display('relatedAd2');\n}\n</script>"}]}],scope:{URI:{include:[/\/checkout\/thank-you.jsp/i]}},conditions:[function(){return BNAnalytics.IsMobile}],event:"pagebottom"},{name:"Pixels: All Pages: All Devices",trigger:[{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-595df08f64746d51d3020628.js"}]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56df395964746d0520001082.js"},{src:"satellite-55d3b56b3331620f9b0008cb.js"},{src:"satellite-55d3b5d93331620f9b0008ce.js"},{src:"satellite-5679febe64746d57d2003bbb.js"},{src:"satellite-55e6708131363000170003a3.js"},{src:"satellite-59d4ff6964746d21fe0051d7.js"},{src:"satellite-59e8160164746d35d2002564.js"}]}]}],event:"windowload"},{name:"Pixels: All Pages: All Devices - Seq",trigger:[{command:"writeHTML",arguments:[{html:'<!--BEGIN QUALTRICS SITE INTERCEPT-->\n<script type=\'text/javascript\'>\n\n(function(){var g=function(e,h,f,g){\n\nthis.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};\n\nthis.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};\n\nthis.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};\n\nthis.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g+ "&t=" + (new Date()).getTime();document.body&&document.body.appendChild(a)}};\n\nthis.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};\n\ntry{(new g(100,"r","QSI_S_ZN_5A5pCWpdgSbhRl2","//zn5a5pcwpdgsbhrl2-barnesandnoble.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_5A5pCWpdgSbhRl2&Q_LOC="+encodeURIComponent(window.location.href))).start()}catch(i){}})();\n\n</script><div id=\'ZN_5A5pCWpdgSbhRl2\'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>\n<!--END SITE INTERCEPT-->'}]}],event:"pagebottom"},{name:"Pixels: All Pages: Desktop: No Thank You",scope:{URI:{exclude:[/\/checkout\/thank-you.jsp/i]}},conditions:[function(){return!BNAnalytics.IsMobile}],event:"windowload"},{name:"Pixels: All Pages: Mobile: No Thank You",scope:{URI:{exclude:[/\/checkout\/thank-you.jsp/i]}},conditions:[function(){return BNAnalytics.IsMobile}],event:"windowload"},{name:"Pixels: All Pages: No Thank You",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-57f66c2964746d0829008431.js"},{src:"satellite-57a13fc064746d0e290010d4.js"}]}]}],scope:{URI:{exclude:[/\/checkout\/thank-you.jsp/i]}},event:"windowload"},{name:"Pixels: All Pages: No Thank You/My Account",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55e5ceda3662370017000001.js"}]}]}],scope:{URI:{exclude:[/\/checkout\/thank-you.jsp/i,/^\/account\/*/i]}},event:"windowload"},{name:"Pixels: Blog: All",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-581a301f64746d4ccb00de56.js"}]}]}],scope:{URI:{include:[/^\/blog/i,/^\/blog\/*/i]}},event:"windowload"},{name:"Pixels: Category Page",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5613fa263439610014001569.js"},{src:"satellite-5930047564746d5067002372.js"},{src:"satellite-59cb468364746d383200ec93.js"},{src:"satellite-59d500c064746d31f1001efc.js"}]}]}],scope:{URI:{include:[/^\/b\//i]}},conditions:[function(){return _satellite.getVar("subCategory1")||"category"===_satellite.getVar("pageType")}],event:"windowload"},{name:"Pixels: Checkout Pages",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55ac75f265373400140001e2.js"},{src:"satellite-56063ef36235390017000acb.js"},{src:"satellite-5930051464746d2b6d0033d5.js"}]}]}],scope:{URI:{include:[/^\/checkout\//i,/^\/mobile\/checkout\/$/i]}},event:"windowload"},{name:"Pixels: Home Page",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55ac6de533336600170001c0.js"},{src:"satellite-55b1ad4e3739320014000d50.js"},{src:"satellite-56cfe01864746d57d3000b25.js"},{src:"satellite-58fe2a9264746d55be0007dc.js"}]}]}],scope:{URI:{include:[/^\/$/i,"^/mobile/$"]}},event:"windowload"},{name:"Pixels: Home and Gift",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55826e1f3534660017000912.js"}]}]}],scope:{URI:{include:[/^\/b\/home-gifts\//i]}},event:"windowload"},{name:"Pixels: Internal Search Results",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-59d501ef64746d794400a0cd.js"},{src:"satellite-59e18e1364746d56a200709e.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("pageType"),"onsite search")}],event:"windowload"},{name:"Pixels: Other Pages",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5588f74f3561350017001060.js"}]}]}],scope:{URI:{exclude:[/^\/b\//i,/^\/$/i,/^\/w\//i,/\/checkout\//i,"^/mobile/$","^/mobile/checkout/"]}},event:"windowload"},{name:"Pixels: Product Detail Page",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-557a48503832350017a50500.js"},{src:"satellite-560aa9ca6131650017000451.js"},{src:"satellite-55cc2f876138390017000dc6.js"},{src:"satellite-5934a3d464746d4f15003839.js"},{src:"satellite-59eab3b364746d35d20037fa.js"}]}]}],scope:{URI:{include:[/^\/w\//i]}},event:"windowload"},{name:"Pixels: Product Detail Page - Seq",scope:{URI:{include:[/^\/w\//i]}},event:"pagebottom"},{name:"Pixels: Textbooks",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55b4912c33333500140002ca.js"},{src:"satellite-55c180a0326430597c00018c.js"}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},event:"windowload"},{name:"Pixels: Textbooks Search",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55b492c933333500140002d3.js"}]}]}],scope:{URI:{include:[/^\/s\//i]}},conditions:[function(){return $('ul.selected-facets li a:contains("Textbooks")').length>0}],event:"windowload"},{name:"Pixels: Thank You: All",trigger:[{engine:"tnt",command:"addMbox",arguments:[{mboxGoesAround:"#orderConfirmPageMbox",mboxName:"orderConfirmPage",arguments:["orderId=%transactionID%","productPurchasedId=%transactionSKUs%","orderTotal=%transactionTotalPrice%"],timeout:"1500"}]},{engine:"adlens",segmentId:"41313",command:"fire",arguments:[function(){EF.init({eventType:"transaction",transactionProperties:_satellite.replace("ev_revenue=%transactionTotalPrice%&ev_transid=%transactionID%"),segment:"41313",searchSegment:"",userid:this.userID,pixelHost:"pixel.everesttech.net",fbIsApp:0,sku:_satellite.replace(""),allow3rdPartyPixels:1}),EF.main()}]},{command:"writeHTML",arguments:[{html:"<script type=\"text/javascript\">\n    // ok if the customer had been to the textbooks page\n    // ATG-6884\n\n    // <img border=\"0\" src=\"https://r.turn.com/r/beacon?b2=jIdpLm8Y0RpicPxQMu5e4iJDJVJwhn0_pnewnNOR-zD2YSojijCuADhyrLAEpLH_3d-aeVP6yvLgKX-hyWDc9w&cid=&bprice=\">\n\n    // Turn requested that we removed the \"Viewed Text Books\" cookie check rule\n    // 12/24 Turn requersted that we re-activate this rule\n    //if (_satellite.readCookie('bnViewedTextbooks') === 'true') {\n        // ATG-7862\n        window.r_injectImage('https://r.turn.com/r/beacon?b2=jIdpLm8Y0RpicPxQMu5e4iJDJVJwhn0_pnewnNOR-zD2YSojijCuADhyrLAEpLH_3d-aeVP6yvLgKX-hyWDc9w&cid=&bprice=' + _satellite.getVar('transactionTotalPrice'));\n    //};\n</script>"},{html:"<script src=\"//platform.twitter.com/oct.js\" type=\"text/javascript\"></script>\n<script type=\"text/javascript\">\nif (typeof(window.twttr) !== 'undefined') {\n    twttr.conversion.trackPid('nuymb', {\n        tw_sale_amount: _satellite.getVar('transactionTotal'),\n        tw_order_quantity: _satellite.getVar('transactionTotalQuantity')\n    });\n}\n</script>"},{html:'<script type="text/javascript">\n  // <img src="https://sp.analytics.yahoo.com/spp.pl?a=1000512917003&.yp=19976&js=no"/>\n  window.r_injectImage(\'https://sp.analytics.yahoo.com/spp.pl?a=1000512917003&.yp=19976&js=no\');\n  \n  // <img src="https://sp.analytics.yahoo.com/spp.pl?a=1000236455271&.yp=19966&js=no"/>\n  window.r_injectImage(\'https://sp.analytics.yahoo.com/spp.pl?a=1000236455271&.yp=19966&js=no\');\n</script>'},{html:"<script type=\"text/javascript\">\n    window.r_injectImage('https://ad.doubleclick.net/activity;src=3877986;type=bntex448;cat=bntha772;qty=1;cost=' + _satellite.getVar('transactionTotalPrice') + ';ord=' + _satellite.getVar('transactionID') + '?');\n</script>"},{html:'<script type="text/javascript">\n\t// <img src="https://tracker.marinsm.com/tp?act=2&cid=r1takxovo0&trans=UTM:T|618564199||22.17|||||%0AUTM:I|618564199|order|||22.17|" />  \n  window.r_injectImage(\'https://tracker.marinsm.com/tp?act=2&cid=r1takxovo0&trans=UTM:T|618564199||22.17|||||%0AUTM:I|618564199|order|||22.17|\');\n</script>'},{html:"<script type=\"text/javascript\">\n    var fb_param = {};\n    fb_param.pixel_id = '6007937378173';\n    fb_param.value = '0.00';\n    fb_param.currency = 'USD';\n    (function() {\n        var fpw = document.createElement('script');\n        fpw.async = true;\n        fpw.src = '//connect.facebook.net/en_US/fp.js';\n        var ref = document.getElementsByTagName('script')[0];\n        ref.parentNode.insertBefore(fpw, ref);\n    })();\n</script>"},{html:"<script type=\"text/javascript\">\n    var params = {\n        cd: {\n            content_ids: '[' + _satellite.getVar('transactionSKUs') + ']',\n            content_type: 'product',\n            value: _satellite.getVar('transactionTotal'),\n            currency: 'USD'\n        },\n        dl: document.location.href.toLowerCase(),\n        rl: document.referrer.toLowerCase(),\n        if: false,\n        v: '2.0',\n        ev: 'Purchase',\n        noscript: 1\n    };\n\n    // BN\n    window.r_injectImage('https://www.facebook.com/tr?id=1473148549574128&' + ($.param(params)), null, true);\n    // NOOK\n    window.r_injectImage('https://www.facebook.com/tr?id=881772185228696&' + ($.param(params)), null, true);\n</script>"},{html:"<script type=\"text/javascript\">\n    var revenue = _satellite.getVar('transactionTotal');\n    var orderId = _satellite.getVar('transactionID');\n    var productsOrdered = window.r_getTransactionSkus().join();\n    var numOfItems = window.r_getTransactionTotalQuantity();\n    var taxes = _satellite.getVar('transactionTotalTax');\n    var shipping = _satellite.getVar('transactionTotalShipping');\n    var city = _satellite.getVar('shippingCity');\n    var state = _satellite.getVar('shippingState');\n    var dt = new Date().getTime();\n    var ean = window.r_getTransactionSkus().join();\n    //\n    window.r_injectIFrame('https://4921982.fls.doubleclick.net/activityi;src=4921982;type=thank0;cat=thank0;qty=1;cost=' + revenue + ';u1=' + orderId + ';u2=' + productsOrdered + ';u3=' + numOfItems + ';u5=' + taxes + ';u6=' + shipping + ';u8=' + city + ';u9=' + state + ';u10=' + dt + ';u11=' + ean + ';ord=' + orderId + '?');\n</script>"},{html:'<div id="orderConfirmPageMbox"  style="display:none;visibility:hidden;"></div>'},{html:'<script type="application/javascript">\n    (function (w, d, t, r, u) {\n        w[u] = w[u] || [];\n        w[u].push({\n            \'projectId\': \'1000236455271\',\n            \'properties\': {\n                \'pixelId\': \'405139\'\n            }\n        });\n        var s = d.createElement(t);\n        s.src = r;\n        s.async = true;\n        s.onload = s.onreadystatechange = function () {\n            var y, rs = this.readyState,\n                c = w[u];\n            if (rs && rs != "complete" && rs != "loaded") {\n                return\n            }\n            try {\n                y = YAHOO.ywa.I13N.fireBeacon;\n                w[u] = [];\n                w[u].push = function (p) {\n                    y([p])\n                };\n                y(c)\n            } catch (e) {}\n        };\n        var scr = d.getElementsByTagName(t)[0],\n            par = scr.parentNode;\n        par.insertBefore(s, scr)\n    })(window, document, "script", "https://s.yimg.com/wi/ytc.js", "dotq");\n</script>'},{html:"<script type=\"text/javascript\">\n    if (_satellite.getVar('transactionHasNOOKDevice') === 'true') {\n        window.r_injectImage('https://analytics.twitter.com/i/adsct?txn_id=l4cxy&p_id=Twitter');\n        window.r_injectImage('//t.co/i/adsct?txn_id=l4cxy&p_id=Twitter');\n    }\n</script>"},{html:"<script type=\"text/javascript\">\n    if (_satellite.getVar('transactionHasNOOKDevice') === 'true') {\n        var revenue = _satellite.getVar('transactionTotal');\n        var orderId = _satellite.getVar('transactionID');\n        var productsOrdered = window.r_getTransactionSkus().join();\n        var totalQty = window.r_getTransactionTotalQuantity();\n        var numOfItems = _satellite.getVar('transactionTotalItems');\n        var taxes = _satellite.getVar('transactionTotalTax');\n        var shipping = _satellite.getVar('transactionTotalShipping');\n        var city = _satellite.getVar('shippingCity');\n        var state = _satellite.getVar('shippingState');\n        var dt = new Date().getTime();\n        var ean = window.r_getTransactionSkus().join();\n        var costs = 0;\n        //\n        window.r_injectIFrame('https://4921982.fls.doubleclick.net/activityi;src=4921982;type=newch0;cat=newsa0;qty=' + totalQty + ';cost=' + revenue + ';u1=' + orderId + ';u2=' + productsOrdered + ';u3=' + numOfItems + ';u4=' + revenue + ';u5=' + taxes + ';u6=' + shipping + ';u7=' + costs + ';u8=' + city + ';u9=' + state + ';u10=' + dt + ';u11=' + ean + ';ord=' + orderId + '?');\n    }\n</script>"},{html:"<script type=\"text/javascript\">\n  \t// Microsoft recommended we use uetq1 to prevent collision\n    window.uetq1 = window.uetq1 || [];\n    window.uetq1.push({\n        'gv': _satellite.getVar('transactionTotalPrice'),\n      \t'gc': 'USD'\n    }); // Pass the computed revenue\n</script>"},{html:'<script type="text/javascript">\n    // <img height="1" width="1" style="display:none;" alt="" src="https://ct.pinterest.com/?tid=quwjSEJM15c&value=0.00&quantity=1"/>\n    window.r_injectImage(\'https://ct.pinterest.com/?tid=quwjSEJM15c&value=\' + _satellite.getVar(\'transactionTotalPrice\') + \'&quantity=\' + _satellite.getVar(\'transactionTotalQuantity\'));\n</script>'},{html:"<script type=\"text/javascript\">\n/*jslint plusplus: false, nomen: true, plusplus: true, white: true */\n/*global window,$,W,_satellite,jQuery */\n\n// DEBUG Edition\n// Troubleshooting CJ Issues  \ntry {\n    var params = {\n        CID: '1530285',\n        OID: _satellite.getVar('transactionID'),\n        CURRENCY: 'USD',\n        COUPON: _satellite.getVar('transactionTotalVoucherCode')\n    };\n    var i = 0,\n        physicalProducts = 0,\n        digitalProducts = 0,\n        unsupportedProducts = 0,\n        combinedProducts = 0,\n        items = window.r_getByPath(window, 'digitalData.transaction.item');\n    //\n    if (items) {\n        var physicalParams = {\n            containerTagId: '10906',\n            TYPE: '372641'\n        };\n        var digitalParams = {\n            containerTagId: '10907',\n            TYPE: '372642'\n        };\n\n        // new going in for a two weeks test\n        var combinedParams = {\n            containerTagId: '23015',\n            TYPE: '397483'\n        };\n\n        // each item check\n        for (i = 0; i < items.length; i++) {\n            var attr = items[i].attributes;\n            if (attr) {\n\n                var isPhysical = (typeof (attr.isPhysicalProduct) !== 'undefined' && attr.isPhysicalProduct === true);\n                var isDigital = (typeof (attr.isDigitalProduct) !== 'undefined' && attr.isDigitalProduct === true);\n                var isNOOK = (typeof (attr.isNOOKProduct) !== 'undefined' && attr.isNOOKProduct === true);\n\n                var sku = items[i].productInfo.sku;\n                var price = items[i].price.basePrice;\n                var qty = items[i].quantity;\n                var deptCode = items[i].productInfo.departmentCode;\n\n                // Truncate SKUs (iTEM) for Marketplace purchases\n                if (sku && sku.length >= 13) {\n                    var cleanSKU = sku.replace(/^0+/, '');\n                    if (cleanSKU.indexOf('267') === 0 || cleanSKU.indexOf('268') === 0 || cleanSKU.indexOf('269') === 0) {\n                        sku = cleanSKU.substring(0, 3);\n                    }\n                }\n\n                // Check by product type\n                if (isPhysical === true) {\n                    // Physical Products\n                    physicalProducts++;\n                    physicalParams['ITEM' + physicalProducts] = sku;\n                    physicalParams['AMT' + physicalProducts] = price;\n                    physicalParams['QTY' + physicalProducts] = qty;\n                    physicalParams['CATEGORY' + physicalProducts] = deptCode;\n                } else if (isDigital === true || isNOOK === true) {\n                    // Digital Products\n                    digitalProducts++;\n                    digitalParams['ITEM' + digitalProducts] = sku;\n                    digitalParams['AMT' + digitalProducts] = price;\n                    digitalParams['QTY' + digitalProducts] = qty;\n                    digitalParams['CATEGORY' + digitalProducts] = deptCode;\n                } else {\n                    // Do nothing\n                    // Increment counter that will allow us to see, how many products\n                    // did not fall into either category above\n                    unsupportedProducts++;\n                }\n\n                // Combined Products\n                if (isPhysical === true || isDigital === true || isNOOK === true) {\n                    combinedProducts++;\n                    combinedParams['ITEM' + combinedProducts] = sku;\n                    combinedParams['AMT' + combinedProducts] = price;\n                    combinedParams['QTY' + combinedProducts] = qty;\n                    combinedParams['CATEGORY' + combinedProducts] = deptCode;\n                }\n            }\n        }\n\n        // CJ Pixels IFrame\n        if (physicalProducts > 0) {\n            W.r_injectIFrame('https://www.emjcd.com/tags/c?' + decodeURIComponent($.param(jQuery.extend(params, physicalParams))));\n        }\n\n        // CJ Pixels IFrame\n        if (digitalProducts > 0) {\n            W.r_injectIFrame('https://www.emjcd.com/tags/c?' + decodeURIComponent($.param(jQuery.extend(params, digitalParams))));\n        }\n\n        // CJ Pixels IFrame (2017 NEW)\n        if (combinedProducts > 0) {\n            W.r_injectIFrame('https://www.emjcd.com/tags/c?' + decodeURIComponent($.param(jQuery.extend(params, combinedParams))));\n        }\n    }\n} catch (e) {\n    /**/\n}\n</script>"},{html:'<script type="text/javascript" src="//static.criteo.net/js/ld/ld.js"></script>\n<script type="text/javascript">\n    function get_criteo_items() {\n        var criteo_items = [];\n        try {\n            for (var i = 0; i < digitalData.transaction.item.length; i++) {\n                criteo_items.push({\n                    id: digitalData.transaction.item[i].productInfo.sku,\n                    // TODO: this should have been price.basePrice\n                    price: digitalData.transaction.item[i].price.basePrice,\n                    quantity: digitalData.transaction.item[i].quantity\n                });\n            }\n        } catch (e) { /* Log the error */ }\n        return criteo_items;\n    }\n\n    // Do it\n    window.criteo_q = window.criteo_q || [];\n    var deviceType = /Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/.test(navigator.userAgent) ? "m" : "d";\n    window.criteo_q.push({\n        event: "setAccount",\n        account: 2641\n    }, {\n        event: "setSiteType",\n        type: deviceType\n    }, {\n        event: "setHashedEmail",\n        email: [_satellite.getVar(\'userHashedEmail\')]\n    }, {\n        event: "trackTransaction",\n        id: _satellite.getVar(\'transactionID\'),\n        item: get_criteo_items()\n    });\n</script>'}]},{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-55b481ba333335001700034c.js"},{src:"satellite-55b484c5333335001400021f.js"},{src:"satellite-55b484c53333350014000222.js"},{src:"satellite-55e341aa6663350014000374.js"},{src:"satellite-55e34aec6663350017000395.js"}]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-562ece8764746d6626001ba7.js"},{src:"satellite-57a144fb64746d0e290010e2.js"},{src:"satellite-57b36e5164746d4d41000eec.js"},{src:"satellite-5736a71664746d2e02003c36.js"},{src:"satellite-5a95b4fe64746d60a1009ce8.js"}]}]}],scope:{URI:{include:[/\/checkout\/thank-you.jsp/i]}},event:"pagebottom"},{name:"Pixels: Thank You: Desktop",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-558cd921653739001400003c.js"}]}]}],scope:{URI:{include:[/\/checkout\/thank-you.jsp/i]}},conditions:[function(){return!BNAnalytics.IsMobile}],event:"windowload"},{name:"Pixels: Toys and Games",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55826e0364373700140001f6.js"}]}]}],scope:{URI:{include:[/^\/b\/toys-games\//i]}},event:"windowload"},{name:"ProductDetail: View",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar11:"%internalCampaign%",eVar15:"%req_eVar15%",eVar31:"%pickUpInStoreStatus%",eVar61:"%productRatingReviews%",eVar62:"%productAvailability%",prop15:"D=v15",prop37:"D=v11",prop66:"%userStoreID%",channel:"%pageType%"}]},{engine:"sc",command:"addEvent",arguments:["event6","prodView"]},{engine:"sc",command:"customSetup",arguments:[function(t,a){r_dtm_notify("LORENA: BOPIS->"+_satellite.getVar("pickUpInStoreStatus")),r_dtm_notify("LORENA: BOPIS v2->"+r_getByPath(e,"digitalData.product[0].attributes.pickupInStoreStatus","NOPE")),r_dtm_notify("LORENA: SKU->"+_satellite.getVar("sku")),a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars=a.apl(a.linkTrackVars,"events,eVar39,prop66,eVar31",",",1),a.linkTrackEvents=a.apl(a.linkTrackEvents,"event57",",",1),a.products=BNAnalytics.getProductsForAdobe(_satellite.getVar("productPrice")),_satellite.getVar("bookGraphProductSku")&&(a.events=a.apl(a.events,"event57",",",1)),a.eVar31=_satellite.getVar("pickUpInStoreStatus")}]},{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5815a47564746d5fd100dccd.js"}]}]}],scope:{URI:{include:["/w/"]}},conditions:[function(){return _satellite.getVar("sku")}],event:"pagebottom"},{name:"ProductList: View/Sort/Filter",trigger:[{engine:"sc",command:"addEvent",arguments:["event1"]},{engine:"sc",command:"customSetup",arguments:[function(e,t){_satellite.getVar("productListFilterValue")&&(t.events=t.apl(t.events,"event2",",",1),t.eVar16=_satellite.getVar("productListFilterValue")),_satellite.getVar("productListSortValue")&&(t.events=t.apl(t.events,"event3",",",1),t.eVar17=_satellite.getVar("productListSortValue"))}]}],scope:{URI:{include:[/\/b\//i]}},event:"pagebottom"}],rules:[{name:"Advertising: Click",trigger:[{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-55197be666343900174d0400.js"}]}]},{command:"delayActivateLink"}],selector:"#relatedAd",event:"elementexists",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Add Item: All",trigger:[{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-55cc3461323365116f0002fc.js"}]}]}],selector:".btn-pdp-addtocart,.submitBuy",event:"click",bubbleFireIfParent:!1,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Add Item: Desktop",trigger:[{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-55788edc3863380017e00400.js"},{src:"satellite-55b1ada03739320014000d52.js"}]}]}],scope:{URI:{exclude:[/^\/mobile\/*/i]}},selector:".btn-pdp-addtocart",event:"click",bubbleFireIfParent:!1,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Add Item: Mobile",trigger:[{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-55a7c386323262291800103e.js"},{src:"satellite-55b1ad8b3634650017000b9a.js"}]}]}],scope:{URI:{include:[/^\/mobile\/*/i]}},selector:".submitBuy",event:"click",bubbleFireIfParent:!1,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Pick Up In Store Intent: Desktop",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55b1b5ca3634650017000bc2.js"}]}]}],scope:{URI:{exclude:[/^\/mobile\/*/i]}},selector:'a[data-modal-class="BN.Modal.Browse.PDP.ReserveTT"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Pick Up In Store Intent: Mobile",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55b1b5db6463610017000f6b.js"}]}]}],conditions:[function(){return BNAnalytics.IsMobile}],selector:'a[data-target="#pickupInstore"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Textbooks: Buyback",trigger:[{command:"loadIframe",arguments:[{pages:[{src:"satellite-55c17f996639384850000c0b.html",data:[]}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},selector:".textbook-options a:nth-child(4)",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Textbooks: New",trigger:[{command:"loadIframe",arguments:[{pages:[{src:"satellite-55c17f5c326430597c000183.html",data:[]}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},selector:".textbook-options a:nth-child(3)",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Textbooks: Rent",trigger:[{command:"loadIframe",arguments:[{pages:[{src:"satellite-55c17f1c6266300017000b10.html",data:[]}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},selector:"section.textbook-options a:nth-child(1)",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Textbooks: Search",trigger:[{command:"loadIframe",arguments:[{pages:[{src:"satellite-55c17ce53264640017000d45.html",data:[]}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},selector:"#txtBookSearch",event:"submit",bubbleFireIfParent:!1,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Textbooks: Subjects",trigger:[{command:"loadIframe",arguments:[{pages:[{src:"satellite-55c17fe53261650014000746.html",data:[]}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},selector:".links-container.textbooks li a",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Pixels: Textbooks: Used",trigger:[{command:"loadIframe",arguments:[{pages:[{src:"satellite-55c17f293264640017000d5d.html",data:[]}]}]}],scope:{URI:{include:[/^\/b\/textbooks\/*/i]}},selector:".textbook-options a:nth-child(2)",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Social Share: Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"SocialShareIcon",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event67"]}]}],selector:".bn-share-link,.social a",event:"click",bubbleFireIfParent:!1,bubbleFireIfChildFired:!0,bubbleStop:!1}],directCallRules:[{name:"onCreateAccountComplete",trigger:[{engine:"sc",command:"trackLink",arguments:[{setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event44"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642ad8864746d40fa00599b.js"}]}]}]},{name:"onCreateAccountFailed",trigger:[{engine:"sc",command:"trackLink",arguments:[{setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event46"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642ad1d64746d10be006f16.js"}]}]}]},{name:"onCreateAccountStart",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"create_account_start",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event43"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642b03b64746d10c1007634.js"}]}]}]},{name:"onSigninComplete",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"sign_in_complete",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event47"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642b0aa64746d10b80081cb.js"}]}]}]},{name:"onSigninFailed",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"sign_in_failed",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event42"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642b14964746d7554006c6b.js"}]}]}]},{name:"onBopisFilterSelected",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bopis_filter_selected",setVars:{channel:"%pageType%"},addEvent:["event156"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a562d5d64746d34960001f3.js"}]}]}]},{name:"onBopisGeoDetectionFailed",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bopis_geo_detection_failed",setVars:{channel:"%pageType%"},addEvent:["event135"]}]},{command:"loadScript",arguments:[{sequential:!1,
scripts:[{src:"satellite-5a562c9c64746d34960001e4.js"}]}]}]},{name:"onBopisGeoDetectionSuccess",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bopis_geo_detection_success",setVars:{channel:"%pageType%"},addEvent:["event134"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a562bd164746d34960001d7.js"}]}]}]},{name:"onBopisOptionalPickupSubmit",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bopis_optional_pickup_submit",setVars:{channel:"%pageType%"},addEvent:["event158"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a562dd964746d1efb01a468.js"}]}]}]},{name:"onBopisStoreSelected",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bopis_store_selected",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="prop66,events",a.linkTrackEvents="event137",a.events=a.apl(a.events,"event137",",",1);var n=e.r_findDigitalDataEvent("bopisStoreSelected",!0,!0);n&&(a.channel=e.r_getByPath(n,"attributes.page.pageInfo.pageType",_satellite.getVar("pageType")).toLowerCase(),a.prop66=e.r_getByPath(n,"attributes.storeId"))}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a562ce364746d16f6000c45.js"}]}]}]},{name:"onBopisStoreUpdate",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bopis_store_update",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="prop66,events",a.linkTrackEvents="event139",a.events=a.apl(a.events,"event139",",",1);var n=e.r_findDigitalDataEvent("bopisStoreUpdate",!0,!0);n&&(a.channel=e.r_getByPath(n,"attributes.page.pageInfo.pageType",_satellite.getVar("pageType")).toLowerCase(),a.prop66=e.r_getByPath(n,"attributes.storeId"))}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a562d1c64746d1efb01a45e.js"}]}]}]},{name:"onBopisTextWhenItemIsReadySubmit",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bopis_text_when_ready",setVars:{channel:"%pageType%"},addEvent:["event157"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a562d9f64746d21a9000209.js"}]}]}]},{name:"onBookGraphAdditionalBookSelected",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bookgraph_additionalbook_selected",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events",a.linkTrackEvents="event54";var n=e.r_findDigitalDataEvent("onBookGraphAdditionalBookSelected");if(n){for(var i=e.r_getByPath(n,"attributes.bookGraph.recommendations",[]),r=0;r<i.length;r++)a.list1=a.apl(a.list1,e.r_getByPath(i[r],"productInfo.sku"),",");a.events=a.apl(a.events,"event54",",",1)}},addEvent:["event54"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5989341864746d25a500cb11.js"}]}]}]},{name:"onBookGraphBookSelected",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bookgraph_book_selection",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events,eVar40,prop40",a.linkTrackEvents="event52";var n=e.r_findDigitalDataEvent("onBookGraphBookSelected");if(n){var i=e.r_getByPath(digitalData,"page.attributes.bookGraph.recommendations",[]),r=e.r_getByPath(n,"attributes.product");a.eVar40=e.r_getByPath(r[0],"productInfo.sku"),a.prop40="D=v40";for(var s=0;s<i.length;s++)a.list1=a.apl(a.list1,e.r_getByPath(i[s],"productInfo.sku"),",");a.events=a.apl(a.events,"event52",",",1)}},addEvent:["event52"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-598932ea64746d0ba5017deb.js"}]}]}]},{name:"onBookGraphExploreNowClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bookgraph_explorenow",setVars:{channel:"%pageType%"},addEvent:["event61"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-59d799ad64746d3e45002d90.js"}]}]}]},{name:"onBookGraphGoBackClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bookgraph_goback_click",setVars:{channel:"%pageType%"},addEvent:["event55"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5989339464746d6deb00d9b0.js"}]}]}]},{name:"onBookGraphStartNewConnection",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"bookgraph_new_connection",setVars:{channel:"%pageType%"},addEvent:["event56"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-59892ffb64746d0b3300398b.js"}]}]}]},{name:"onBookGraphView",trigger:[{engine:"sc",command:"trackPageView",arguments:[{setVars:{pageName:"%pageName%",channel:"%pageType%"},addEvent:["event53"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5989313f64746d0ba5017dde.js"}]}]}]},{name:"onCheckoutView",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"checkout_view",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.clearVars(),a.linkTrackVars="events,prop35",a.linkTrackEvents="event25,event26,event27,event28,event29,event30,event31,event32,event33,event34,scCheckout";var n=e.r_findDigitalDataEvent("checkoutView",!0,!0);if(n){var i=e.r_getByPath(n,"attributes.stepName"),r=e.r_getByPath(n,"attributes.stepValue");if(i)switch(i){case"start":case"regular-start":a.events=a.apl(a.events,"event25,scCheckout",",",1);break;case"express-start":a.events=a.apl(a.events,"event26,scCheckout",",",1);break;case"review-items":a.events=a.apl(a.events,"event27",",",1);break;case"sign-in":a.events=a.apl(a.events,"event28",",",1);break;case"ship-to":a.events=a.apl(a.events,"event29",",",1);break;case"shipping-method":a.events=a.apl(a.events,"event30",",",1);break;case"shipping-preference":a.prop35=r;break;case"billing-info":a.events=a.apl(a.events,"event31",",",1);break;case"coupon-info":a.events=a.apl(a.events,"event32",",",1);break;case"payment-info":a.events=a.apl(a.events,"event33",",",1);break;case"final-confirmation":case"final":a.events=a.apl(a.events,"event34",",",1)}}}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5651603c64746d4d320008a2.js"}]}]}]},{name:"onDynamicYieldExperienceClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"dy_experience_click",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.clearVars(),a.linkTrackVars=a.apl(a.linkTrackVars,"eVar81",",",1),a.linkTrackEvents=a.apl(a.linkTrackEvents,"event93",",",1),a.events=a.apl(a.events,"event93",",",1),"undefined"!=typeof e.r_validateDirectCallRule&&e.r_validateDirectCallRule("Dynamic Yield Experience Click","598cb2ca9a67ea03089ebdad",[],"dynamicYieldExperienceClick",[],!0);var n=e.r_findDigitalDataEvent("dynamicYieldExperienceClick",!0,!0);n&&(a.eVar81=e.r_getByPath(n,"attributes.campaignName")+"|"+e.r_getByPath(n,"attributes.experienceName")+"|"+e.r_getByPath(n,"attributes.variationName"))},addEvent:["event93"]}]}]},{name:"onDynamicYieldExperienceView",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"dy_experience_view",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.clearVars(),a.linkTrackVars=a.apl(a.linkTrackVars,"eVar81",",",1),a.linkTrackEvents=a.apl(a.linkTrackEvents,"event92",",",1),a.events=a.apl(a.events,"event92",",",1),"undefined"!=typeof e.r_validateDirectCallRule&&e.r_validateDirectCallRule("Dynamic Yield Experience View","598895ebe740da4ccc00d427",[],"dynamicYieldExperienceView",[],!0);var n=e.r_findDigitalDataEvent("dynamicYieldExperienceView",!0,!0);n&&(a.eVar81=e.r_getByPath(n,"attributes.campaignName")+"|"+e.r_getByPath(n,"attributes.experienceName")+"|"+e.r_getByPath(n,"attributes.variationName"));var i="_dy_bn_"+r_hashCode(a.eVar81);"1"===_satellite.readCookie(i)?(a.abort=!0,r_dtm_notify("DY Aborted")):(_satellite.setCookie(i,"1"),r_dtm_notify("DY Set for Session"))},addEvent:["event92"]}]}]},{name:"onEmailSignup",trigger:[{engine:"sc",command:"trackLink",arguments:[{setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event45"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5651603264746d4d2b00072c.js"}]}]}]},{name:"onError",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"error",setVars:{eVar10:"%req_eVar10%",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event36"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515ff664746d4d3200089c.js"}]}]}]},{name:"onGloseReadSampleClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"glose_readsample_click",addEvent:["event96"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a298d4764746d39bb0028db.js"}]}]}]},{name:"onInternalSearchResultsProductClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"internal_search_productclick",setVars:{channel:"%pageType%"},addEvent:["event73"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642b20d64746d1dae006fbc.js"}]}]}]},{name:"onInternalSearchResultsQuickView",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"internal_search_productview",setVars:{channel:"%pageType%"},addEvent:["event78"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-58984f7c64746d2d8c00497a.js"}]}]}]},{name:"onInternalSearchResultsQuickView",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"internal_search_quickview",setVars:{channel:"%pageType%"},addEvent:["event77"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-58984bb964746d2ae8003a55.js"}]}]}]},{name:"onInternalSearch",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"internal_search",setVars:{eVar21:"%internalSearchTermAndMethod%",eVar22:"%internalSearchResultsCount%",eVar23:"%internalSearchTermsCorrections%",eVar64:"%internalSearchType%",prop21:"D=v21",prop22:"D=v22",prop23:"D=v23",prop64:"D=v64",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events,prop22,eVar50",a.linkTrackEvents="event50,event13,event49";var n=e.r_findDigitalDataEvent("internalSearch");n&&(a.eVar50=e.r_getByPath(n,"attributes.storeFront"));var i=_satellite.getVar("internalSearchResultsCount");!i||"0"!==i&&"zero"!==i||(a.prop22="zero",a.events=a.apl(a.events,"event50",",",2));var r=_satellite.getVar("internalSearchType");r&&"typeahead"===r&&(a.events=a.apl(a.events,"event13",",",2)),_satellite.getVar("internalSearchTerm").length<=0&&(a.abort=!0)},addEvent:["event49"]}]},{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-598b6b1464746d2c22000e88.js"}]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-563e949964746d41da00433e.js"}]}]}]},{name:"onPageView",trigger:[{engine:"sc",command:"trackPageView",arguments:[{setVars:{pageName:"%pageName%",channel:"%pageType%",pageURL:"%pageURL%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events,eVar24,prop65",a.linkTrackEvents="event136,event138";var n=e.r_findDigitalDataEvent("pageView");if(n){var i=e.r_getByPath(n,"attributes.page.pageInfo.pageName").toLowerCase(),r=e.r_getByPath(n,"attributes.page.pageInfo.pageType").toLowerCase();if(a.channel=r,a.pageName=i,a.pageURL=e.r_getByPath(n,"attributes.page.pageInfo.destinationURL",_satellite.getVar("pageURL")),0===_satellite.getVar("pageType").indexOf("stacks:")&&(a.eVar24="stacks:holiday gift guide"),"buy online pickup in store"===r){var s=!1;switch(i){case"store locator:find my store":a.events=a.apl(a.events,"event136",",",1),s=!0;break;case"store locator:change my store":a.events=a.apl(a.events,"event138",",",1),s=!0}if(!0===s){var o=e.r_getByPath(n,"attributes.page.attributes.searchResults",0);a.prop65="store locator "+e.r_getByPath(n,"attributes.page.attributes.searchType").toLowerCase()+e.r_getByPath(n,"attributes.page.attributes.searchTerm").toLowerCase().replace("|","_")+"|"+(0===parseInt(o)?"zero":o)}}}}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-59de899d64746d6269000d2b.js"}]}]}]},{name:"onFindInStoreClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"find_in_store",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event16"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-57192b1764746d54b2000245.js"}]}]}]},{name:"onProductFormatClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"format_dropdown",setVars:{prop13:"%DCR-productFormat%",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event21"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642abd664746d10b80081c7.js"}]}]}]},{name:"onFormatsEditionsTabClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"formats_editions_tab_click",setVars:{prop18:"%DCR-productFormatTab%",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event7"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56a14d4b64746d320e000d4c.js"}]}]}]},{name:"onProductPhotoClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"product_photo_view",setVars:{prop28:"%DCR-productPhotoView%",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event8"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642ae7664746d7554006c69.js"}]}]}]},{name:"onAvailableForPickUpInStoreClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"pick_up_in_store",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event15"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-571929d264746d0ec40004e2.js"}]}]}]},{name:"onProductQuickView",trigger:[{engine:"sc",command:"trackPageView",arguments:[{type:"o",linkName:"Quick_View",setVars:{eVar11:"%internalCampaign%",prop37:"D=v11",pageName:"%pageName%",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars=a.apl(a.linkTrackVars,"products,events,eVar61,eVar62,eVar24",",",2),a.linkTrackEvents=a.apl(a.linkTrackEvents,"event5,prodView",",",2);var n=e.r_findDigitalDataEvent("productQuickView");if(n){var i=e.r_getByPath(n,"attributes.product[0]");i&&(a.products=BNAnalytics.getCurrentProductsForAdobeFromDL(i),a.eVar61=BNAnalytics.getProductRatingsAndReviews(i),a.eVar62=BNAnalytics.getProductAvailability(i),0===_satellite.getVar("pageType").indexOf("stacks:")&&(a.eVar24="stacks:holiday gift guide"),a.pageName=e.r_getByPath(n,"attributes.page.pageInfo.pageName"),a.pageType=e.r_getByPath(n,"attributes.page.pageInfo.pageType"))}},addEvent:["event5","prodView"]}]},{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5814679c64746d4cc800c693.js"}]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642aec164746d41da00560a.js"},{src:"satellite-587f8b2964746d47ca00c8c4.js"}]}]}]},{name:"onReserveInStore",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"reserve_in_store",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events",a.linkTrackEvents="event63,event64";var n=e.r_findDigitalDataEvent("reserveInStore");n&&(a.events=a.apl(a.events,"event63="+r_getByPath(n,"attributes.revenue"),","),a.events=a.apl(a.events,"event64="+r_getByPath(n,"attributes.quantity"),","))}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515fbe64746d4d32000894.js"}]}]}]},{name:"onProductReviewSubmit",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642af1d64746d3f80006fc1.js"}]}]}]},{name:"onProductReviewsClick",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642ae0964746d10b80081c9.js"}]}]}]},{name:"onPurchase",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"purchase",setVars:{eVar41:"%transactionID%",eVar42:"%transactionAddresses%",eVar45:"%transactionCheckoutType%",eVar46:"%transactionFulfillmentShippingMethod%",eVar48:"%transactionPaymentMethod%",eVar66:"%transactionCustomerID%",state:"%state%",transactionID:"%transactionID%",zip:"%zip%",channel:"%pageType%"},customSetup:function(t,a){if(a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events,products,eVar19,prop19,purchaseID,transactionID,eVar32",a.linkTrackEvents="event19,event39,event40,event84",e.r_getByPath(e,"digitalData.transaction.item")){var n,i,r=!1,s="";for(n=0;n<digitalData.transaction.item.length;n++){var o=digitalData.transaction.item[n];i=";"+o.productInfo.sku+";"+(o.quantity||1)+";"+(o.quantity||1)*o.price.basePrice,i+=";;evar32="+e.r_getByPath(o,"attributes.deliveryMethod","missing").toLowerCase(),a.products=(a.products?a.products+",":"")+i;var c=e.r_getByPath(o,"attributes.purchaseType");c&&(s=a.apl(s,c,"|",2))}var l=_satellite.getVar("transactionCheckoutType");(l&&l.indexOf("instant_")>-1||s.indexOf("instant_")>-1)&&(r=!0),!0===r&&(a.events=a.apl(a.events,"event19",",")),a.eVar19=(digitalData.transaction.item.length>1?"combo:":"")+s,a.eVar19&&(a.prop19="D=v19")}a.events=a.apl(a.events,"event39="+_satellite.getVar("transactionTotalTax"),",",1),a.events=a.apl(a.events,"event40="+_satellite.getVar("transactionTotalShipping"),",",1),a.events=a.apl(a.events,"event84="+_satellite.getVar("transactionTotalPrice"),",",1),a.purchaseID=_satellite.getVar("transactionID"),a.transactionID=a.purchaseID},addEvent:["event34","purchase"]}]},{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5992fdba64746d1e9c00017c.js"},{src:"satellite-59d5063864746d3ec4001853.js"}]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515fc864746d4d32000896.js"}]}]}]},{name:"onShoppingBagAddItem",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Add to Bag",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="products,events,eVar31",a.linkTrackEvents="scAdd,scOpen",a.products=e.r_getProductsForAdobeFromDLEvent("addToBag"),a.events=a.apl(a.events,"scAdd",",",2);var n=e.r_findDigitalDataEvent("addToBag");if(n){var i=e.r_getByPath(n,"attributes.product[0].attributes.purchaseType");i&&i.indexOf("instant_")<0&&(a.events=e.BNAnalytics.getCartOpen(a,"s_scOpen"))}},addEvent:["scAdd"]}]},{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-587e772f64746d47ca00a74f.js"},{src:"satellite-598b627a64746d6deb00ec76.js"},{src:"satellite-59d5033964746d794400a112.js"}]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-563e83e364746d3f80005be1.js"}]}]}]},{name:"onShoppingBagCouponCodeApplied",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-563e94d064746d40fa004683.js"}]}]}]},{name:"onShoppingBagPageView",trigger:[{engine:"sc",command:"trackPageView",arguments:[{setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events",a.linkTrackEvents="scView,scOpen",a.events="scView",a.events=e.BNAnalytics.getCartOpen(a,"s_scOpen")}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-589947c864746d1d7c00168f.js"}]}]}]},{name:"onShoppingBagRemoveItem",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Remove from Bag",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="products,events",a.linkTrackEvents="scRemove,scOpen",a.products=e.r_getProductsForAdobeFromDLEvent("removeFromBag"),a.events=a.apl(a.events,"scRemove",",",1),a.events=e.BNAnalytics.getCartOpen(a,"s_scOpen")},addEvent:["scRemove"]}]},{command:"loadScript",arguments:[{sequential:!0,scripts:[{src:"satellite-598b694c64746d0db3001ea3.js"}]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-563e83ff64746d3f83004691.js"}]}]}]},{name:"onShoppingBagView",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"shopping_bag_view",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events",a.linkTrackEvents=a.apl(a.events,"scView,scOpen,event159,event160",",",1),a.products=e.BNAnalytics.getCartProductsForAdobeFromDL(),a.events=a.apl(a.events,"scView",",",1),a.events=e.BNAnalytics.getCartOpen(a,"s_scOpen");for(var n=e.r_getByPath(e,"digitalData.cart.item",[]),i=0;i<n.length;i++)!0===e.r_getByPath(n[i],"attributes.isInStorePickup")?a.events=a.apl(a.events,"event159",",",1):a.events=a.apl(a.events,"event160",",",1)}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5642afce64746d10c1007632.js"}]}]}]},{name:"onStacksNavListItemClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"stacks_nav_listitem_click",setVars:{pageName:"%pageName%",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.pageName=_satellite.getVar("pageName"),a.channel=_satellite.getVar("pageType")},addEvent:["event85"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-59de89e164746d0e29006155.js"}]}]}]},{name:"onStacksViewModeClick",trigger:[{engine:"sc",command:"trackPageView",arguments:[{type:"o",linkName:"stacks_viewmode_click",setVars:{pageName:"%pageName%",channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars="events",a.linkTrackEvents=a.apl(a.linkTrackEvents,"event88,event89",",",2),a.pageName=_satellite.getVar("pageName");var n=r_findDigitalDataEvent("stacksViewModeClick");if(n){var i=r_getByPath(n,"attributes.mode","cover");a.events="list"===i?a.apl(a.events,"event89",","):a.apl(a.events,"event88",","),a.pageName=e.r_getByPath(n,"attributes.page.pageInfo.pageName"),a.channel=e.r_getByPath(n,"attributes.page.pageInfo.pageType")}}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-59e4d5af64746d38c6005145.js"}]}]}]},{name:"onFindMyStoreSearchClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"find_my_store_search_click",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs(),a.linkTrackVars=a.apl(a.linkTrackVars,"events,prop65",",",1),a.linkTrackEvents=a.apl(a.linkTrackEvents,"event136",",",1),a.events=a.apl(a.events,"event136",",",1);var n=e.r_findDigitalDataEvent("findMyStoreSearchClick");if(n){var i=e.r_getByPath(n,"attributes.page.attributes.searchResults",0);a.prop65="store locator "+e.r_getByPath(n,"attributes.page.attributes.searchType").toLowerCase()+" "+e.r_getByPath(n,"attributes.page.attributes.searchTerm").toLowerCase().replace("|","_")+"|"+(0===parseInt(i)?"zero":i)}}}]}]},{name:"onStoreSearch",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515faa64746d4d2f0005e3.js"}]}]}]},{name:"onTriadAdvertisementClick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"triad_ad_click",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.linkTrackVars=a.apl(a.linkTrackVars,"eVar82",",",1);var n=e.r_findDigitalDataEvent("triadAdvertisementClick",!0,!0);n&&(a.eVar82=e.r_getByPath(n,"attributes.name"))},addEvent:["event104"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a95b05264746d60a1009c6f.js"}]}]}]},{name:"onTriadAdvertisementView",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"triad_ad_view",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.linkTrackVars=a.apl(a.linkTrackVars,"eVar82",",",1);var n=e.r_findDigitalDataEvent("triadAdvertisementView",!0,!0);n&&(a.eVar82=e.r_getByPath(n,"attributes.name"))},addEvent:["event103"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a95b01c64746d1543007d4e.js"}]}]}]},{name:"onAddItemToWishList",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"add_to_wishlist",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event18"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5651602764746d4d3600076b.js"}]}]}]},{name:"onCreateWishList",trigger:[{engine:"sc",command:"trackLink",arguments:[{setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs()},addEvent:["event17"]}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5651601d64746d4d2f0005e9.js"}]}]}]},{name:"onAdvertisingClick",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5651601364746d4d2f0005e7.js"}]}]}]},{name:"onGiftWrappedOptionSelected",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515fda64746d4d2f0005e5.js"}]}]}]},{name:"onNavigate",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"navigate",setVars:{channel:"%pageType%"},customSetup:function(t,a){a.account=e.BNAnalytics.getReportingSuiteIDs();var n=e.r_findDigitalDataEvent("onNavigate");if(n){a.linkTrackVars="events",a.linkTrackEvents="";e.r_getByPath(n,"attributes.name"),e.r_getByPath(n,"attributes.location");e.r_getByPath(n,"category.primaryCategory","")}}}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515fd064746d4d32000898.js"}]}]}]},{name:"onSocialNetworkClick",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515fb464746d4d2b00072a.js"}]}]}]},{name:"onVideo",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56515fa164746d4d32000892.js"}]}]}]}],settings:{trackInternalLinks:!0,libraryName:"satelliteLib-c247216a2145ee58039f29269709adbc59bd1aa8",isStaging:!1,allowGATTcalls:!1,downloadExtensions:/\.(?:doc|docx|eps|jpg|png|svg|xls|ppt|pptx|pdf|xlsx|tab|csv|zip|txt|vsd|vxd|xml|js|css|rar|exe|wma|mov|avi|wmv|mp3|wav|m4v)($|\&|\?)/i,notifications:!1,utilVisible:!1,domainList:["barnesandnoble.com"],scriptDir:"a6ce917b5fc2d1d613b7b801115955bcaacab070/scripts/",tagTimeout:3e3},data:{URI:t.location.pathname+t.location.search,browser:{},cartItems:[],revenue:"",host:{http:"assets.adobedtm.com",https:"assets.adobedtm.com"}},dataElements:{advertisingID:{customJS:function(){return $("#relatedAd iframe").contents().find("#google-content-text-ad-1 img").prop("src").split("/")[4]},storeLength:"pageview"},bookGraphProductSku:{customJS:function(){return e.r_getByPath(digitalData,"product[0].attributes.bookGraphProductSKU",null)},storeLength:"pageview"},breadCrumbs:{customJS:function(){return"undefined"!=typeof s_getP&&s_getP("window.digitalData.page.pageInfo.breadCrumbs")?e.digitalData.page.pageInfo.breadCrumbs.join(":"):""},storeLength:"pageview",forceLowerCase:!0},cartBasePrice:{jsVariable:"digitalData.cart.price.basePrice","default":"zero",storeLength:"pageview"},customerCohort:{customJS:function(){return s_getP("digitalData.user[0].cohort")},storeLength:"pageview"},customerKey:{customJS:function(){var e="";return"undefined"!=typeof s_getP&&s_getP("digitalData.user")&&(e=s_getP("digitalData.user[0].profile[0].profileInfo.customerKey")),e},storeLength:"pageview"},"DCR-productFormat":{customJS:function(){var t=e.r_findDigitalDataEvent("productFormatClick");return t&&t.attributes?t.attributes.formatName:null},storeLength:"pageview"},"DCR-productFormatTab":{customJS:function(){var t=e.r_findDigitalDataEvent("formatsEditionsTabClick");return t&&t.attributes?t.attributes.formatName:null},storeLength:"pageview"},"DCR-productPhotoView":{customJS:function(){return"Photo View|"+_satellite.getVar("sku")},storeLength:"pageview"},eventName:{customJS:function(){return s_getP("window.digitalData.event[0].eventInfo.eventName")},storeLength:"pageview"},filterType:{customJS:function(){return s_getP("window.digitalData.page.attributes.productlist.filter[0].type")},storeLength:"pageview"},firstProduct:{customJS:function(){return s_getP("window.digitalData.cart.item[0].productInfo.sku")},storeLength:"pageview"},geoRegion:{jsVariable:"window.digitalData.page.pageInfo.geoRegion",storeLength:"pageview"},hierarchy:{jsVariable:"window.digitalData.page.category.hierarchy",storeLength:"pageview"},internalCampaign:{customJS:function(){var e=null;return s_getP("digitalData.page.attributes.internalCampaignDescription")&&(e=s_getP("digitalData.page.attributes.internalCampaignPageType"),e+="|"+s_getP("digitalData.page.attributes.internalCampaignElement"),e+="|"+s_getP("digitalData.page.attributes.internalCampaignDescription"),e+="|"+s_getP("digitalData.page.attributes.internalCampaignCTA"),e+="|"+s_getP("digitalData.page.attributes.internalCampaignAdFormat")),e},storeLength:"pageview"},internalSearchResultsCount:{customJS:function(){var e=0;return s_getP("digitalData.page.attributes.internalSearch.resultsCount")&&(e=digitalData.page.attributes.internalSearch.resultsCount),0==e?"zero":e},"default":"zero",storeLength:"pageview"},internalSearchTerm:{jsVariable:"digitalData.page.attributes.internalSearch.term",storeLength:"pageview"},internalSearchTermAndMethod:{customJS:function(){return _satellite.getVar("internalSearchTerm")+"|"+_satellite.getVar("internalSearchType")},storeLength:"pageview"},internalSearchTermsCorrections:{jsVariable:"digitalData.page.attributes.internalSearch.corrections",storeLength:"pageview",forceLowerCase:!0,cleanText:!0},internalSearchType:{jsVariable:"digitalData.page.attributes.internalSearch.type","default":"search",storeLength:"pageview",forceLowerCase:!0,cleanText:!0},isCheckoutFunnel:{customJS:function(){var e=_satellite.getVar("pageName"),t=_satellite.getVar("pageType");return(e.indexOf("checkout")>=0||t.indexOf("checkout")>=0||e.indexOf("cart")>=0||t.indexOf("cart")>=0||e.indexOf("receipt")>=0||t.indexOf("receipt")>=0).toString()},storeLength:"pageview",forceLowerCase:!0,cleanText:!0},isMember:{customJS:function(){var e=!1,t=_satellite.getVar("customerCohort");return t&&"non-members"!=t.toLowerCase()&&(e=!0),e},"default":"false",storeLength:"pageview",forceLowerCase:!0},isVendorHostedSite:{customJS:function(){var e=_satellite.getVar("locationHostName");return("www.barnesandnoble.com"!==e&&"m.barnesandnoble.com"!==e).toString()},storeLength:"pageview"},language:{jsVariable:"window.digitalData.page.pageInfo.language",storeLength:"pageview"},locationHostName:{customJS:function(){return e.location.host||e.location.hostname},storeLength:"pageview"},pageCategoryBreadcrumb:{customJS:function(){var t=r_getByPath(e,"digitalData.page.category.hierarchy");return t&&(0===t.indexOf("/")&&(t=t.substring(1)),t=t.replace(/\//g,"|")),t},storeLength:"pageview"},pageName:{customJS:function(){return s_getP("window.digitalData.page.pageInfo.pageName")||t.location.href},storeLength:"pageview"},pagePath:{customJS:function(){return t.location.pathname},storeLength:"pageview"},pagePrimaryCategory:{jsVariable:"digitalData.page.category.primaryCategory",storeLength:"pageview"},pagePrimaryCategoryId:{jsVariable:"digitalData.page.category.primaryCategoryId",storeLength:"pageview"},pageType:{jsVariable:"digitalData.page.pageInfo.pageType",storeLength:"pageview",forceLowerCase:!0},pageURL:{customJS:function(){return"undefined"!=typeof s&&s.pageURL?s.pageURL:e.location.href},storeLength:"pageview"},pickupInStoreFilterIsVisible:{jsVariable:"digitalData.page.attributes.pickupInStoreFilterIsVisible",storeLength:"pageview"},pickUpInStoreStatus:{jsVariable:"digitalData.product.0.attributes.pickupInStoreStatus",storeLength:"pageview"},platformName:{jsVariable:"digitalData.session.platformName","default":"BN",storeLength:"pageview",forceLowerCase:!0},previousPageName:{customJS:function(){return s_getP("digitalData.page.pageInfo.previousPageName")},storeLength:"pageview"},primaryCategory:{jsVariable:"window.digitalData.page.category.primaryCategory",storeLength:"pageview"},productAvailability:{customJS:function(){return BNAnalytics.getProductAvailability(s_getP("digitalData.product[0]"))},
storeLength:"pageview"},productCategoryBreadcrumb:{customJS:function(){var t=_satellite.getVar("productPrimaryCategory");if(t){var a=r_getByPath(e,"digitalData.product[0].category.subCategory");if(a)for(var n=0;n<a.length;n++)t+="|"+a[n]}return t},storeLength:"pageview"},productFormat:{customJS:function(){var t=e.r_findDigitalDataEvent("productFormatClick");return t?s_getP("attributes.formatName",t):null},storeLength:"pageview"},productListFilterValue:{customJS:function(){var e="",t=s_getP("window.digitalData.page.attributes.productlist");return t&&t.filter&&t.filter.forEach(function(t){e=s.apl(e,t.value,"|",1)}),e},storeLength:"pageview",forceLowerCase:!0},productListSortValue:{customJS:function(){return $("select#sortProducts:first option:selected").text()},storeLength:"pageview",forceLowerCase:!0},productListViewMode:{jsVariable:"digitalData.page.attributes.productList.viewMode",storeLength:"pageview",forceLowerCase:!0},productName:{customJS:function(){var e="";return s_getP("digitalData.product")&&(e=s_getP("digitalData.product[0].productInfo.productName")),e},storeLength:"pageview"},productPrice:{customJS:function(){var e=s_getP("digitalData.product[0].price.basePrice");return e||(e=$("p.price").clone().children().remove().end().text().trim().replace("$",""))||(e=$(".pdp-totval").clone().children().remove().end().text().trim().replace("$","")),e},"default":"zero",storeLength:"pageview"},productPriceFloat:{customJS:function(){return s_getP("digitalData.product[0].price.basePrice")},"default":"0.00",storeLength:"pageview"},productPrimaryCategory:{customJS:function(){var e;return"undefined"!=typeof digitalData&&(e=r_getByPath(digitalData,"product[0].category.primaryCategory")),e},storeLength:"pageview"},productRatingReviews:{customJS:function(){return BNAnalytics.getProductRatingsAndReviews(s_getP("digitalData.product[0]"))},"default":"zero:zero",storeLength:"pageview"},productType:{customJS:function(){var e="";return s_getP("digitalData.product[0].category.productType")&&(e=digitalData.product[0].category.productType),e},storeLength:"pageview"},profileID:{customJS:function(){var e="";return"undefined"!=typeof s_getP&&s_getP("digitalData.user")&&(e=digitalData.user[0].profile[0].profileInfo.profileID),e},storeLength:"pageview"},rating:{customJS:function(){var e=0;return s_getP("digitalData.product[0].attributes.rating")&&(e=digitalData.product[0].attributes.rating),0==e?"zero":e},"default":"zero",storeLength:"pageview"},referringUrl:{customJS:function(){return t.referrer},storeLength:"pageview",forceLowerCase:!0},req_eVar10:{customJS:function(){var e,t="";try{for(var a=0,n=digitalData.event.length;a<n;a++){var i=s_getP("digitalData.event["+a+"].eventInfo.eventAction");if(i&&"error"===i){var r=s_getP("digitalData.event["+a+"].attributes");if(!r.handled){e=r.errorMessage,digitalData.event[a].attributes.handled=!0;break}}}if(e)if((n=(_satellite.getVar("pageName")||"").length+(_satellite.getVar("pageType")||"").length)<200)t=e.substring(0,200-n).toLowerCase()+"|"+(_satellite.getVar("pageName")||"")+"|"+(_satellite.getVar("pageType")||"")}catch(s){}return t},storeLength:"pageview"},req_eVar15:{customJS:function(){var t="",a=r_getByPath(e,"digitalData.product[0].attributes.referrer.searchTerm")||r_getByPath(e,"digitalData.product[0].attributes.referrer.pageName");if(a){var n=r_getByPath(e,"digitalData.product[0].attributes.referrer.pageNumber")+"~"+r_getByPath(e,"digitalData.product[0].attributes.referrer.positionIndex");n&&(t=(e.r_removeSpecialChars(a,!0)+"~"+n).trim())}return t},storeLength:"pageview"},reviews:{customJS:function(){var e=0;return s_getP("digitalData.product[0].attributes.reviews")&&(e=digitalData.product[0].attributes.reviews),0==e?"zero":e},"default":"zero",storeLength:"pageview"},serverName:{customJS:function(){var t="";if("undefined"!=typeof e.s_c_r){var a=e.s_c_r("JSESSIONID");a&&a.indexOf(".")>0&&(t=a.split(".")[1])}return t},storeLength:"pageview"},sessionID:{customJS:function(){var t="";if("undefined"!=typeof e.s_c_r){var a=e.s_c_r("JSESSIONID");a&&a.indexOf(".")>0&&(t=a.split(".")[0])}return t},storeLength:"pageview"},shippingCity:{jsVariable:"digitalData.transaction.profile.shippingAddress.city",storeLength:"pageview"},shippingState:{jsVariable:"digitalData.transaction.profile.shippingAddress.stateProvince",storeLength:"pageview"},shoppingCartSKUs:{customJS:function(){var e=[],t=s_getP("digitalData.cart.item");if(t)for(var a=0;a<t.length;a++)e.push(t[a].productInfo.sku);return e},storeLength:"pageview"},shoppingCartTotalPrice:{jsVariable:"digitalData.cart.price.basePrice","default":"zero",storeLength:"pageview"},sku:{customJS:function(){var t="";return s_getP("digitalData.product")&&(t=e.r_getByPath(digitalData,"product[0].productInfo.sku")||e.r_getByPath(digitalData,"product[0].productInfo.skuId")||""),t},storeLength:"pageview"},state:{jsVariable:"digitalData.transaction.profile.shippingAddress.stateProvince",storeLength:"pageview"},subCategory1:{customJS:function(){return r_getByPath(e,"digitalData.page.category.subCategory[0]")},storeLength:"pageview"},subCategory2:{customJS:function(){return r_getByPath(e,"digitalData.page.category.subCategory[1]")},storeLength:"pageview"},subCategory3:{customJS:function(){return r_getByPath(e,"digitalData.page.category.subCategory[2]")},storeLength:"pageview"},transactionAddresses:{customJS:function(){var e="";return s_getP("digitalData.transaction.profile")&&(e=s_getP("digitalData.transaction.profile.address.country")+"|"+s_getP("digitalData.transaction.profile.address.stateProvince"),e+="|"+(s_getP("digitalData.transaction.profile.shippingAddress.country")||"")+"|"+(s_getP("digitalData.transaction.profile.shippingAddress.stateProvince")||"")),e},storeLength:"pageview"},transactionCheckoutType:{jsVariable:"digitalData.transaction.checkoutType",storeLength:"pageview",forceLowerCase:!0},transactionCustomerID:{jsVariable:"digitalData.transaction.profile.profileInfo.profileID",storeLength:"pageview",forceLowerCase:!0},transactionFulfillmentShippingMethod:{customJS:function(){var e="";return s_getP("digitalData.transaction")&&(e=s_getP("digitalData.transaction.fulfillmentType")+"|"+s_getP("digitalData.transaction.shippingMethod")),e},storeLength:"pageview",forceLowerCase:!0},transactionHasDigitalProduct:{customJS:function(){var e=!1,t=s_getP("digitalData.transaction.item");if(t)for(i=0;i<t.length;i++)if(!0===t[i].attributes.isDigitalProduct){e=!0;break}return e.toString()},storeLength:"pageview"},transactionHasNOOKDevice:{customJS:function(){var e=s_getP("digitalData.transaction.item"),t=["9781400699896","9781400697496","9781400697489","9781400697533","9781400697588","9781400697564","9781400697601"],a=!1;if(e)for(var n=0;n<e.length;n++)if(t.indexOf(e[n].productInfo.sku)>-1){a=!0;break}return a.toString()},storeLength:"pageview"},transactionHasPhysicalProduct:{customJS:function(){var e=!1,t=s_getP("digitalData.transaction.item");if(t)for(i=0;i<t.length;i++)if(!0===t[i].attributes.isPhysicalProduct){e=!0;break}return e.toString()},storeLength:"pageview"},transactionID:{jsVariable:"digitalData.transaction.transactionID",storeLength:"pageview"},transactionPaymentMethod:{jsVariable:"digitalData.transaction.attributes.paymentMethod",storeLength:"pageview",forceLowerCase:!0},transactionSKUs:{customJS:function(){var t=[];if(e.r_getByPath(e,"digitalData.transaction.item"))for(i=0;i<digitalData.transaction.item.length;i++)t.push(e.r_getByPath(digitalData.transaction.item[i],"productInfo.sku","NONE"));return t.join(",")},storeLength:"pageview"},transactionTotal:{jsVariable:"digitalData.transaction.total.transactionTotal",storeLength:"pageview"},transactionTotalItems:{customJS:function(){var e=s_getP("digitalData.transaction.item"),t="";return void 0!==e&&(t=e.length),t},"default":"zero",storeLength:"pageview"},transactionTotalPrice:{customJS:function(){var e=s_getP("digitalData.transaction.total.basePrice"),t="";return void 0!==e?parseFloat(e).toFixed(2):t},storeLength:"pageview"},transactionTotalQuantity:{customJS:function(){var e=s_getP("digitalData.transaction.item"),t="";if(void 0!==e){t=0;for(var a=0;a<e.length;a++)t+=parseInt(e[a].quantity)}return t},"default":"zero",storeLength:"pageview"},transactionTotalShipping:{jsVariable:"digitalData.transaction.total.shipping","default":"0",storeLength:"pageview"},transactionTotalTax:{customJS:function(){var e=s_getP("digitalData.transaction.total.priceWithTax"),t=s_getP("digitalData.transaction.total.basePrice"),a="";return void 0!==e&&void 0!==t&&(a=parseFloat(e-t).toFixed(2)),a},"default":"0",storeLength:"pageview"},transactionTotalVoucherCode:{jsVariable:"digitalData.transaction.total.voucherCode",storeLength:"pageview"},userEmail:{customJS:function(){return s_getP("digitalData.user[0].profile[0].profileInfo.email")||""},storeLength:"pageview",forceLowerCase:!0},userHashedEmail:{customJS:function(){var t="";if("function"==typeof e.r_md5&&"function"==typeof e.r_utf8_encode){var a=e.s_getP("digitalData.user[0].profile[0].profileInfo.email");void 0!==a&&(t=e.r_md5(e.r_utf8_encode(a.toLowerCase().trim()),!0))}return t},storeLength:"pageview",forceLowerCase:!0},userIsMember:{customJS:function(){var e=!1;if(s_getP("digitalData.user")){var t=s_getP("user.cohort");t&&(e="Non-Members"!==t)}return e.toString()},storeLength:"pageview"},userStoreID:{jsVariable:"digitalData.user.0.profile.0.profileInfo.storeID",storeLength:"pageview"},zip:{jsVariable:"digitalData.transaction.profile.shippingAddress.postalCode",storeLength:"pageview"}},appVersion:"7QN",buildDate:"2018-06-21 14:32:18 UTC",publishDate:"2018-06-21 14:32:17 UTC"})}(window,document);